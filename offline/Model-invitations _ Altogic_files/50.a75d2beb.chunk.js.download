(this["webpackJsonpui-designer"]=this["webpackJsonpui-designer"]||[]).push([[50],{441:function(e,t,n){"use strict";var r=n(2),a=n.n(r),i=n(3),o=n(11),s=n(12),l=n(13),c=n(14),u=n(5),p=n.n(u),d=n(18),m=n(442),f=n.n(m),h=n(22),g=n(109),b=n(82),y=n(326),v=n(299),O=n(17),j=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).change=function(e){var t=r.props,n=t.onChange,a=t.disabled,i=t.maxLength;if(!a){var o=r.sanitizeValue(e.target.value).substring(0,i);r.setState({html:o}),n&&n(o)}},r.mouseEnter=function(){r.props.disabled||r.setState({hovering:!0})},r.mouseLeave=function(){r.props.disabled||r.setState({hovering:!1})},r.focus=function(){r.props.disabled||r.setState({focused:!0})},r.blur=function(){var e=r.props,t=e.disabled,n=e.onValidate,a=e.onAction,i=e.children,o=r.state.html;t||(r.setState({focused:!1}),n&&(!1===n()?r.setState({html:i}):a&&r.callOnAction(r.sanitizeValue(o).trim())))},r.keyDown=function(e){27!==e.keyCode&&"Escape"!==e.key||r.blur()},r.keyPress=function(e){var t=r.props,n=t.noEnter,a=t.disabled,i=t.maxLength,o=t.callActionOnEnter,s=t.onAction,l=t.onValidate,c=t.children;if(!a){var u=r.sanitizeValue(e.target.innerHTML);if(i>0&&u&&u.length>=i&&(e.preventDefault&&e.preventDefault(),u=u.substring(0,i),r.setState({html:u})),n)if(13===(e.keyCode||e.which)){if(e.returnValue=!1,e.preventDefault&&e.preventDefault(),l&&!1===l(u))return void r.setState({html:c});o&&s&&r.callOnAction(u.trim())}}},r.callOnAction=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,i,o,s,l,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props,i=n.showProgress,o=n.showStatus,s=n.onAction,l=n.children,i&&r.setState({progress:!!i||void 0}),e.next=4,s(t);case 4:c=e.sent,r.setState({progress:!i&&void 0,status:o?null===c?"success":"error":void 0,statusError:o&&c?c.name:void 0,html:null===c?t:l});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.highlightAll=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},r.sanitizeValue=function(e){return e.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")},r.pastePlainText=function(e){var t=r.props.maxLength;e.preventDefault();var n=e.clipboardData.getData("text/plain").replace(/\n\t\r/g,"");t>0&&(n=n.substring(0,t)),document.execCommand("insertHTML",!1,n)},r.timerId=null,r.contentEditable=p.a.createRef(),r.state={html:"",hovering:!1,focused:!1,status:null,statusError:null,progress:!1},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setState({html:this.props.children})}},{key:"componentWillUnmount",value:function(){this.timerId&&clearTimeout(this.timerId)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.setState({html:this.props.children})}},{key:"render",value:function(){var e=this.state,t=e.html,n=e.progress,r=e.hovering,a=e.focused,i=this.props,o=i.classes,s=i.icon,l=i.disabled,c=i.tagName,u=i.showProgress,m=i.progressSize,h=i.startAdornment,g=i.endAdornment,O=i.showIcon,j=i.showIconOnlyHover,w=i.editIconPlaceholder,E=s;return E||(E=y.ub),p.a.createElement("span",{className:o.container},h,p.a.createElement(f.a,{innerRef:this.contentEditable,html:t,disabled:l,onChange:this.change,tagName:c,onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave,onFocus:this.focus,onBlur:this.blur,onKeyPress:this.keyPress,onPaste:this.pastePlainText,onKeyDown:this.keyDown,className:Object(d.default)(l?null:o.editable,t&&0!==t.length?null:o.padding),spellCheck:"false"}),!1!==l||u&&n||!(O&&!1===j||j&&r||a)?!w||u&&n?null:p.a.createElement(b.a,{icon:E,className:Object(d.default)(o.editIcon,o.hidden),fixedWidth:!0,style:{width:m}}):p.a.createElement(b.a,{icon:E,className:Object(d.default)(o.editIcon,o.visible),fixedWidth:!0,style:{width:m}}),g,u&&n&&p.a.createElement(v.a,{size:m,className:o.progress}),this.renderStatus(),"\xa0")}},{key:"renderStatus",value:function(){var e=this,t=this.props,n=t.classes,r=t.showStatus,a=t.duration,i=t.progressSize,o=t.theme,s=this.state,l=s.status,c=s.statusError;return r&&null!==l?(this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout((function(){e.setState({progress:!1,status:null})}),a),"success"===l?p.a.createElement(b.a,{icon:y.v,className:n.success,fixedWidth:!0,style:{width:i}}):p.a.createElement("span",{style:{color:o.palette.error.main}},p.a.createElement(b.a,{icon:y.N,className:n.error,fixedWidth:!0,style:{width:i,marginRight:o.spacing(.5)}}),p.a.createElement("span",{style:{fontSize:"0.75rem"}},c))):null}}]),n}(p.a.PureComponent);j.defaultProps={maxLength:O.a.maxMicroTxtLength,showIcon:!0,showIconOnlyHover:!1,showProgress:!0,progressSize:16,showStatus:!0,icon:null,disabled:!1,onChange:null,tagName:"span",noEnter:!0,onValidate:null,onAction:null,duration:O.a.actionFlagHideDuration,callActionOnEnter:!0,editIconPlaceholder:!0,startAdornment:null,endAdornment:null},t.a=Object(h.a)((function(e){return{container:{display:"flex",alignItems:"center",cursor:"text",whiteSpace:"normal",wordWrap:"break-word"},editIcon:{color:e.palette.text.primary,fontSize:e.typography.caption.fontSize,marginLeft:e.spacing(1)},show:{display:"inline-block"},visible:{display:"inline-block",visibility:"visible"},hide:{display:"none"},hidden:{visibility:"hidden"},editable:{borderRadius:e.shape.borderRadius,"&:hover":{backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3},"&:focus":{outline:0,backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3}},padding:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},progress:{marginLeft:e.spacing(1)},success:{fontSize:e.typography.body2.fontSize,color:e.palette.success.main,marginLeft:e.spacing(1)},error:{fontSize:e.typography.body2.fontSize,color:e.palette.error.main,marginLeft:e.spacing(1)}}}),{withTheme:!0})(Object(g.a)()(j))},442:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(5)),p=c(n(443)),d=s(n(8));function m(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"===typeof t.props.innerRef?{current:null}:u.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!==typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var a=Object.assign({},e,{target:{value:r}});t.props.onChange(a)}t.lastHtml=r}},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,i=t.innerRef,o=l(t,["tagName","html","innerRef"]);return u.createElement(n||"div",a(a({},o),{ref:"function"===typeof i?function(t){i(t),e.el.current=t}:i||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||(m(e.html)!==m(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||t.placeholder!==e.placeholder||!p.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,function(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var a=document.createRange();a.setStart(t,t.nodeValue.length),a.collapse(!0),r.removeAllRanges(),r.addRange(a)}e instanceof HTMLElement&&e.focus()}}(e))},t.propTypes={html:d.string.isRequired,onChange:d.func,disabled:d.bool,tagName:d.string,className:d.string,style:d.object,innerRef:d.oneOfType([d.object,d.func])},t}(u.Component);t.default=f},443:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!==a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},869:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(3),o=n(11),s=n(12),l=n(13),c=n(14),u=n(122),p=n(5),d=n.n(p),m=n(51),f=n(22),h=n(109),g=n(323),b=n(120),y=n(119),v=n(80),O=n(745),j=n(82),w=n(326),E=n(352),S=n(441),x=n(373),k=n(378),_=n(60),N=n(110),A=n(16),I=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).rename=function(){var t=Object(i.a)(a.a.mark((function t(n){var r,i,o,s,l,c,u,p,d,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,i=r.renameModelAction,o=r.renameFieldAction,s=r.user,l=r.app,c=r.activeSnap,u=r.model,p=r.field,d=r.fieldModel,t.next=3,i(s._id,s.token,l._id,c._id,u._id,{name:n});case 3:if(200===(m=t.sent).status){t.next=6;break}return t.abrupt("return",m.reduxForm);case 6:if(!p||!d){t.next=10;break}return t.next=9,o(s._id,s.token,l._id,c._id,d._id,p._id,{name:n});case 9:m=t.sent;case 10:if(200!==m.status){t.next=14;break}return t.abrupt("return",null);case 14:return t.abrupt("return",m.reduxForm);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.model,r=e.team,a=e.authAction,i=e.app;if(!n||!r)return null;var o=a("update-model",{app:i,model:n});return d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,{className:t.content},d.a.createElement("div",{className:t.head},d.a.createElement(v.a,{component:"h1",variant:"h6",style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},d.a.createElement(S.a,{onAction:this.rename,onValidate:function(e){return!!(e&&e.length>0)},startAdornment:d.a.createElement(O.a,{smDown:!0},d.a.createElement(j.a,{icon:this.getModelIcon(),className:t.icon})),disabled:1!==o},n.name))),d.a.createElement(k.a,null)),this.renderBreadcrumbs())}},{key:"renderTrail",value:function(){var e=this.props,t=e.classes,n=e.model,r=e.user,a=n;return d.a.createElement("div",{className:t.trailHolder},d.a.createElement(y.a,{className:t.avatarHolder,variant:"outlined"},d.a.createElement(E.a,{user:this.getUser(a.createdBy),showName:!0,size:"micro",boldUsername:!0,createdBy:!0,createdAt:a.createdAt,hover:!0,you:a.createdBy===r._id})),a.updatedBy&&d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{className:t.seperatorMargin,style:{display:"inline-block"}}),d.a.createElement(y.a,{className:t.avatarHolder,variant:"outlined"},d.a.createElement(E.a,{user:this.getUser(a.updatedBy),showName:!0,size:"micro",boldUsername:!0,updatedBy:!0,updatedAt:a.updatedAt,hover:!0,you:a.updatedBy===r._id}))))}},{key:"renderBreadcrumbs",value:function(){var e=this.props,t=e.classes,n=e.user,r=e.app,a=e.snaps,i=e.activeSnap,o=e.models,s=e.model;return d.a.createElement("div",{className:t.breadcrumbs},d.a.createElement(x.a,{user:n,app:r,snaps:a,snap:i,models:o,model:s,text:s.name,icon:this.getModelIcon()}))}},{key:"getModelIcon",value:function(){var e=this.props.model;return"model"===e.type?w.Ob:"sub-model-object"===e.type?w.b:"sub-model-list"===e.type?w.c:null}},{key:"renderModelType",value:function(){var e=this.props,t=e.t,n=e.classes,r=e.model,a=null;return"model"===r.type?a=t("model"):"sub-model-object"===r.type?a=t("object"):"sub-model-list"===r.type&&(a=t("object list")),d.a.createElement("span",{className:n.modelType},a)}},{key:"getUser",value:function(e){var t=this.props,n=t.t,r=t.team,a=Object(A.e)(e);if(a)return a;for(var i=0;i<r.length;i++){var o=r[i];if(o.userId._id===e)return o.userId}return{_id:e,profile:{userName:n("Former-member"),email:e,firstName:null,lastName:null,imgUrl:null}}}}]),n}(d.a.PureComponent);function C(e,t){if(!e)return null;var n=e.find((function(e){return e._id===t}));return!n||"sub-model-object"!==n.type&&"sub-model-list"!==n.type?null:e.find((function(e){return e.iname===n.parentiname}))}function T(e,t){if(!e)return null;var n=e.find((function(e){return e._id===t}));if(n&&("sub-model-object"===n.type||"sub-model-list"===n.type)){var r=e.find((function(e){return e.iname===n.parentiname}));if(r)for(var a=0;a<r.fields.length;a++){var i=r.fields[a];if("object"===i.type&&i.object.iname===n.iname)return i;if("object-list"===i.type&&i.objectList.iname===n.iname)return i}}return null}t.default=Object(m.b)((function(e,t){return{user:e.user,app:e.app,team:e.team,snaps:e.snaps,activeSnap:e.activeSnap,models:e.models,model:e.models&&e.models.length>0?e.models.find((function(e){return e._id===t.match.params.modelId})):null,field:T(e.models,t.match.params.modelId),fieldModel:C(e.models,t.match.params.modelId)}}),{authAction:N.a,renameModelAction:_.se,renameFieldAction:_.re})(Object(g.a)()(Object(f.a)((function(e){var t,n;return{content:(t={overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",flexWrap:"nowrap",marginTop:e.spacing(0)},Object(u.a)(t,e.breakpoints.down("md"),{marginLeft:e.spacing(.5)}),Object(u.a)(t,e.breakpoints.up("md"),{marginLeft:e.spacing(2)}),Object(u.a)(t,"marginRight",e.spacing(2)),Object(u.a)(t,"marginBottom",e.spacing(0)),Object(u.a)(t,"height",e.spacing(6)),Object(u.a)(t,"minHeight",e.spacing(6)),t),icon:{marginRight:e.spacing(1)},head:{marginTop:e.spacing(.5),flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap",overflow:"hidden"},trailHolder:{margin:e.spacing(0,0,0,2),display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"wrap",fontSize:e.typography.caption.fontSize},avatarHolder:{marginBottom:e.spacing(1),padding:e.spacing(.5)},seperatorMargin:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},breadcrumbs:(n={},Object(u.a)(n,e.breakpoints.down("md"),{margin:e.spacing(0,0,1,.5)}),Object(u.a)(n,e.breakpoints.up("md"),{margin:e.spacing(0,0,1,2)}),Object(u.a)(n,"fontSize",e.typography.caption.fontSize),n),modelType:{fontSize:"0.6rem",marginLeft:e.spacing(1),color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,padding:e.spacing(.25)}}}),{withTheme:!0})(Object(h.a)()(I))))}}]);