(this["webpackJsonpui-designer"]=this["webpackJsonpui-designer"]||[]).push([[39],{335:function(e,t,a){"use strict";var n=a(11),r=a(12),i=a(13),l=a(14),o=a(5),c=a.n(o),d=a(22),s=a(109),m=a(120),p=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.children;return e.centered?c.a.createElement(m.a,{className:t.centeredContainer},a):c.a.createElement(m.a,{className:t.container},a)}}]),a}(c.a.PureComponent);p.defaultProps={centered:!1},t.a=Object(d.a)((function(e){return{container:{overflowY:"auto",overflowX:"hidden",flexGrow:1,display:"flex",flexDirection:"column",padding:e.spacing(0,1)},centeredContainer:{flexGrow:1,display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",overflowY:"auto",overflowX:"hidden"}}}),{withTheme:!0})(Object(s.a)()(p))},353:function(e,t,a){"use strict";var n=a(11),r=a(12),i=a(13),l=a(14),o=a(122),c=a(5),d=a.n(c),s=a(22),m=a(109),p=a(814),u=a(778),h=a(80),g=a(82),f=a(328),b=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.children,n=e.rightPanel,r=e.open,i=e.onClose;return d.a.createElement(d.a.Fragment,null,a,d.a.createElement(p.a,{anchor:"right",open:r,onClose:i,classes:{paper:t.rightPanel},elevation:4,ModalProps:{BackdropProps:{invisible:!0}}},this.renderHeader(),n))}},{key:"renderHeader",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.onClose;return d.a.createElement("div",{className:a.header},d.a.createElement("div",{className:a.title},d.a.createElement(h.a,{component:"h1",variant:"h6"},t("Activity history"))),d.a.createElement(u.a,{className:a.closeButton,onClick:n},d.a.createElement(g.a,{icon:f.x,className:a.closeButtonIcon})))}}]),a}(d.a.PureComponent);b.defaultProps={rightPanel:null,rightPanelName:null,open:!1,onClose:null},t.a=Object(s.a)((function(e){var t;return{rightPanel:(t={},Object(o.a)(t,e.breakpoints.down("sm"),{width:"100%"}),Object(o.a)(t,e.breakpoints.up("sm"),{width:"380px"}),t),header:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:e.spacing(1),marginTop:e.spacing(1),flexShrink:0},title:{flexGrow:1,paddingLeft:e.spacing(2)},closeButton:{padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"}}}),{withTheme:!0})(Object(m.a)()(b))},399:function(e,t,a){"use strict";var n=a(122);t.a=function(e){return{container:{overflowY:"auto",overflowX:"hidden",flexGrow:1,display:"flex",flexDirection:"column",padding:e.spacing(0,1)},containerNoScroll:{overflowY:"hidden",overflowX:"hidden",flexGrow:1,display:"flex",flexDirection:"column",padding:e.spacing(0,1)},content:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",marginTop:e.spacing(2),marginRight:e.spacing(0),marginLeft:e.spacing(0),marginBottom:e.spacing(2),overflowY:"hidden",overflowX:"hidden"},contentPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},noDataPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",marginTop:e.spacing(5)},headBar:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",marginTop:e.spacing(0),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flexShrink:0},headBarToolBar:{display:"flex",alignItems:"center",fontSize:e.typography.body2.fontSize,minHeight:"40px"},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1),width:180},closeIcon:{color:e.palette.text.disabled,width:"16px",height:"16px","&:hover":{color:e.palette.text.primary,cursor:"pointer"}},menuButton:{padding:e.spacing(.5),marginRight:e.spacing(.5),color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},menuButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},noScroll:{overflowY:"hidden",overflowX:"hidden"},scrollY:{overflowY:"auto",overflowX:"hidden"},toolbarDivider:{height:22,marginTop:e.spacing(.5),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),marginLeft:e.spacing(1)},flexCenter:{display:"flex",flexDirection:"row",alignItems:"center"},flexRow:{display:"flex",flexDirection:"row",alignItems:"flex-start"},flexStack:{display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap"},justifyCenter:{justifyContent:"center"},flexGrow:{flexGrow:1},borderFocused:{borderColor:e.palette.primary.light},block:{display:"block"},mlhalf:{marginLeft:e.spacing(.5)},mrhalf:{marginRight:e.spacing(.5)},ml1:{marginLeft:e.spacing(1)},ml2:{marginLeft:e.spacing(2)},mr1:{marginRight:e.spacing(1)},mr2:{marginRight:e.spacing(2)},mthalf:{marginTop:e.spacing(.5)},mt1:{marginTop:e.spacing(1)},mt2:{marginTop:e.spacing(2)},mt3:{marginTop:e.spacing(2)},mb1:{marginBottom:e.spacing(1)},mb2:{marginBottom:e.spacing(2)},padding3:{padding:e.spacing(3)},padding2:{padding:e.spacing(2)},padding1:{padding:e.spacing(1)},pr2:{paddingRight:e.spacing(2)},pl2:{paddingLeft:e.spacing(2)},pt2:{paddingTop:e.spacing(2)},pb2:{paddingBottom:e.spacing(2)},bgcolor:{backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3},body1:{fontSize:e.typography.body1.fontSize},body2:{fontSize:e.typography.body2.fontSize},caption:{fontSize:e.typography.caption.fontSize},disabled:{color:e.palette.text.disabled},success:{color:e.palette.success.main},error:{color:e.palette.error.main},warning:{color:e.palette.warning.main},primary:{color:e.palette.text.primary},secondary:{color:e.palette.text.secondary},secondaryColor:{color:"light"===e.palette.type?"#f50057":"#ff4081"},primaryMain:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},italic:{fontStyle:"italic"},bold:{fontWeight:500},extraBold:{fontWeight:700},showLineBreaks:{whiteSpace:"pre-wrap"},pointer:{cursor:"pointer"},link:{color:e.palette.text.primary,"&:hover":{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},anchor:{cursor:"pointer",color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,"&:hover":{textDecoration:"underline"}},highlight:{backgroundColor:"#ffeb3b"},tabArea:{flexGrow:1,overflowY:"auto",overflowX:"hidden"},tabList:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.divider,marginBottom:e.spacing(2),borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},tabTextWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},tabIcon:{marginRight:e.spacing(1),width:"18px",height:"18px",minWidth:"18px"},tabRoot:{minWidth:0},borderTop:{borderTop:"1px solid",borderTopColor:e.palette.divider},paper:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2},rounded:{borderRadius:e.spacing(1)},roundedStd:{borderRadius:e.shape.borderRadius},border:{border:"1px solid",borderColor:e.palette.divider},selectCount:{marginLeft:e.spacing(0),minWidth:"24px"},tableArea:{flexGrow:1,overflowY:"auto",overflowX:"auto"},table:{"& .ReactVirtualized__Table__headerRow":{borderBottom:"2px solid",borderBottomColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.16)"},"& .ReactVirtualized__Table__Grid":{outline:"none"}},headerCell:{display:"flex",alignItems:"center",boxSizing:"border-box",flex:1,border:0,fontWeight:500},dataCell:{display:"flex",alignItems:"center",boxSizing:"border-box",flex:1,border:0},visible:{overflow:"visible"},borderBottom:{borderBottom:"1px solid",borderBottomColor:e.palette.divider},contextMenuCell:{padding:0},contextMenuButton:{padding:e.spacing(.5),color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},contextMenuIcon:{width:"24px",height:"24px",minWidth:"24px"},contextMenuIcon2:{width:"24px",height:"24px",minWidth:"24px",padding:e.spacing(.75)},tableHeadIcon:{marginRight:e.spacing(.5)},breakWord:{whiteSpace:"normal",wordWrap:"break-word"},folderColor:{color:"#ffd600"},noBorder:{border:0},badge:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,minHeight:"20px",padding:e.spacing(0,.75),fontSize:e.typography.caption.fontSize,minWidth:"20px",alignContent:"center",display:"inline-block",borderRadius:"10px",lineHeight:"20px",textAlign:"center"},badgeGrey:{backgroundColor:"light"===e.palette.type?e.palette.background.layer3:e.palette.background.default,color:e.palette.text.secondary,minHeight:"20px",padding:e.spacing(0,.75),fontSize:e.typography.caption.fontSize,minWidth:"20px",alignContent:"center",display:"inline-block",borderRadius:"10px",lineHeight:"20px",textAlign:"center"},badgeSmall:{backgroundColor:"light"===e.palette.type?e.palette.background.layer3:e.palette.background.default,color:e.palette.text.secondary,minHeight:"16px",padding:e.spacing(0,.5),fontSize:e.typography.caption.fontSize,minWidth:"16px",alignContent:"center",display:"inline-block",borderRadius:"8px",lineHeight:"16px",textAlign:"center"},gridArea:Object(n.a)({flexGrow:1,display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",flexWrap:"wrap",overflowY:"auto",overflowX:"hidden"},e.breakpoints.up("md"),{paddingRight:e.spacing(1)}),gridItemLogo:{position:"absolute",fontSize:60,color:e.palette.background.layer3,bottom:e.spacing(2.5),right:e.spacing(1.5)},gridItemHeader:{padding:e.spacing(1,2),flexShrink:0,fontWeight:500,display:"flex",alignItems:"center",borderBottom:"1px solid",borderBottomColor:e.palette.divider,backgroundColor:e.palette.background.layer2,overflow:"hidden"},gridItemHeaderLink:{cursor:"pointer","&:hover":{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},gridItemContent:{padding:e.spacing(1,2),flexGrow:1,overflowY:"auto",overflowX:"hidden",zIndex:1},gridItemContentLink:{cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover}},gridItemContentEntry:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.5),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},gridItemContentEntryBreakWord:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.5),whiteSpace:"normal",wordWrap:"break-word"},gridItemContentEntryLink:{borderRadius:e.spacing(1),cursor:"pointer","&:hover":{backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover,color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},gridItemContentEntryDisabled:{color:e.palette.text.disabled},gridItemFooter:{padding:e.spacing(.5,1.5),flexShrink:0,display:"flex",alignItems:"center"},fullWidth:{width:"100%"},description:{fontSize:e.typography.caption.fontSize,color:e.palette.text.disabled,fontStyle:"italic"},favorite:{marginLeft:e.spacing(.5),color:"#ff8a80",fontSize:"0.6rem",position:"relative",top:"-4px"},chip:{border:"none",height:"24px",display:"inline-flex",outline:0,fontSize:e.typography.caption.fontSize,alignItems:"center",whiteStapce:"nowrap",borderRadius:e.spacing(2),verticalAlign:"middle",justifyContent:"center",backgroundColor:e.palette.divider,padding:e.spacing(0,1),marginRight:e.spacing(.5),marginBottom:e.spacing(.25)},"@keyframes fadeBgColor":{"0%":{backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover},"100%":{backgroundColor:"inherit"}},newEntry:{animation:"$fadeBgColor 6s forwards"},ellipsis:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},thickCellBorder:{borderBottom:"2px solid",borderBottomColor:e.palette.divider},cellBorder:{borderBottom:"1px solid",borderBottomColor:e.palette.divider},overflowHidden:{overflow:"hidden"},getMethod:{backgroundColor:e.palette.info.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},postMethod:{backgroundColor:e.palette.success.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},putMethod:{backgroundColor:e.palette.warning.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},deleteMethod:{backgroundColor:e.palette.error.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},disabledMethod:{backgroundColor:e.palette.background.layer3,color:e.palette.text.disabled,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},getMethodText:{color:e.palette.info.main,fontWeight:700},postMethodText:{color:e.palette.success.main,fontWeight:700},putMethodText:{color:e.palette.warning.main,fontWeight:700},deleteMethodText:{color:e.palette.error.main,fontWeight:700},disabledMethodText:{color:e.palette.error.disabled,fontWeight:700},nodeSystem:{color:e.palette.text.disabled},nodeBasic:{color:e.palette.success.main},nodeAdvanced:{color:e.palette.warning.main},nodeObject:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},formLabel:{color:e.palette.text.primary,fontWeight:500,marginBottom:e.spacing(1),fontSize:e.typography.body2.fontSize,textTransform:"uppercase"}}}},552:function(e,t,a){"use strict";var n=a(122),r=a(4),i=a(399);t.a=function(e){var t;return Object(r.a)(Object(r.a)({},Object(i.a)(e)),{},{content:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",marginTop:e.spacing(2),paddingRight:e.spacing(2),paddingLeft:e.spacing(2),marginBottom:e.spacing(2)},modelContainer:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch"},gridItem:(t={},Object(n.a)(t,e.breakpoints.down("sm"),{width:"100%",height:300}),Object(n.a)(t,e.breakpoints.up("sm"),{width:250,height:300}),Object(n.a)(t,"display","flex"),Object(n.a)(t,"flexDirection","column"),Object(n.a)(t,"backgroundColor",e.palette.background.layer1),Object(n.a)(t,"margin",e.spacing(1)),t),gridItemFooter:{padding:e.spacing(.5,1.5),flexShrink:0,display:"flex",alignItems:"center",borderTop:"1px solid",borderTopColor:e.palette.divider,backgroundColor:e.palette.background.layer2},fieldEntry:{padding:e.spacing(.5),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:e.typography.caption.fontSize},fieldEntryLink:{borderRadius:e.spacing(1),cursor:"pointer","&:hover":{backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover,color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},activeTab:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.5,1),backgroundColor:e.palette.primary.main,color:e.palette.common.white,marginRight:e.spacing(1),borderRadius:e.spacing(1.5),cursor:"pointer"},passiveTab:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.5,1),backgroundColor:e.palette.action.hover,color:e.palette.text.primary,marginRight:e.spacing(1),borderRadius:e.spacing(1.5),cursor:"pointer"},persistence:{textTransform:"uppercase",fontWeight:500,color:e.palette.success.main},enabledTimestamp:{textTransform:"uppercase",fontWeight:500,color:e.palette.success.main},disabledTimestamp:{textTransform:"uppercase",fontWeight:500,color:e.palette.warning.main},fieldInfo:{marginTop:e.spacing(.5),fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary},dependentExp:{fontSize:e.typography.body2.fontSize,wordBreak:"break-word",overflow:"auto",whiteSpace:"normal",wordWrap:"break-word"},dependentExpHeader:{fontStyle:"italic",color:e.palette.text.secondary},dependentExpHolder:{backgroundColor:e.palette.background.layer2,borderRadius:e.shape.borderRadius,padding:e.spacing(1),color:e.palette.text.primary,maxWidth:"450px"},expressionButton:{padding:e.spacing(.5),color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},expression:{width:"24px",height:"24px",minWidth:"24px",fontSize:e.typography.body2.fontSize},dense:{marginLeft:e.spacing(1.5),padding:e.spacing(.5)},modelTreeWrapper:{minHeight:"295px",maxHeight:"295px",height:"295px",overflow:"auto",padding:e.spacing(1),backgroundColor:e.palette.background.default,borderRadius:e.shape.borderRadius,borderWidth:"1px",borderStyle:"solid",borderColor:e.palette.divider},lockedIcon:{color:e.palette.warning.main,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},examples:{color:e.palette.text.disabled,fontSize:e.typography.caption.fontSize,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},fixedWidthSelect:{width:"380px"},ruleExpHolder:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,borderRadius:e.shape.borderRadius,padding:e.spacing(1),color:e.palette.text.primary,marginBottom:e.spacing(1),maxWidth:"550px"},ruleExpHeader:{fontSize:e.typography.caption.fontSize,fontStyle:"italic",color:e.palette.text.disabled},errMsgExpHolder:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,borderRadius:e.shape.borderRadius,padding:e.spacing(1),color:e.palette.error.main,maxWidth:"550px"},errMsgExpHeader:{fontSize:e.typography.caption.fontSize,fontStyle:"italic",color:e.palette.text.disabled},ruleInfo:{margin:e.spacing(.5,0,.5,0),fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary}})}},818:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(15),i=a(2),l=a.n(i),o=a(3),c=a(11),d=a(12),s=a(13),m=a(14),p=a(5),u=a.n(p),h=a(18),g=a(349),f=a.n(g),b=a(346),y=a.n(b),E=a(51),x=a(22),v=a(511),k=a(109),w=a(323),C=a(498),S=a(555),M=a(888),A=a(554),F=a(120),j=a(634),D=a(499),O=a(671),N=a(804),T=a(877),_=a(794),I=a(533),R=a(537),W=a(790),B=a(774),z=a(80),P=a(807),L=a(811),q=a(810),H=a(904),G=a(808),V=a(809),Y=a(880),U=a(299),X=a(778),K=a(177),$=a(589),J=a(745),Q=a(82),Z=a(328),ee=a(326),te=a(81),ae=a(359),ne=a(552),re=a(17),ie=a(342),le=a(335),oe=a(353),ce=a(337),de=a(71),se=a(377),me=a(388),pe=a(352),ue=a(351),he=a(368),ge=a(392),fe=a(543),be=a(569),ye=a(542),Ee=a(330),xe=a(502),ve=a(60),ke=a(110),we=a(338),Ce=a(16),Se=a(366),Me=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).isFavorite=function(e){for(var t=n.props,a=t.activeSnap,r=t.user,i=0;i<r.favModels.length;i++){var l=r.favModels[i];if(l.snapId===a._id&&l.modelId===e._id)return!0}return!1},n.dSort=function(e){var t=n.state,a=t.dSortKey,r=t.dOrder;e===a?n.setState({dOrder:"asc"===r?"desc":"asc"}):n.setState({dSortKey:e,dOrder:"asc"})},n.dSearch=function(e){n.setState({dSearchStr:e.target.value&&e.target.value.trim()})},n.loadDependencies=Object(o.a)(l.a.mark((function e(){var t,a,r,i,o,c,d,s,m,p,u,h,g,f,b,y,E;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.t,r=t.user,i=t.app,o=t.activeSnap,c=t.models,d=t.model,s=t.getDependentsToModelsAction,n.setState({refreshDependency:!0,dSearchStr:""}),e.next=4,s(r._id,r.token,i._id,o._id,{modelIds:[d._id]});case 4:if(200===(m=e.sent).status){e.next=9;break}return n.setState({errorTitle:a("An error has occured while loading model dependencies!"),errorMessage:m.data.details}),n.setState({refreshDependency:!1}),e.abrupt("return");case 9:for(p=[],u=0;u<m.data.length;u++){for(h=m.data[u].impactedExp,g=function(e){var t=h[e],r=c.find((function(e){return e.iname===t.modeliName})),i=r.fields.find((function(e){return e.iname===t.fieldiName})),l=n.getPathArray(r),o={type:"exp",key:t._id,model:r,field:i,pathArray:l,fullPath:l.map((function(e){return e.name})).join(" \xbb "),modeliName:t.modeliName,fieldiName:t.fieldiName,expType:Object(Se.a)(a,t.expType),expStrExt:n.getExpString(t),createdAt:t.createdAt,createdBy:t.createdBy};p.push(o)},f=0;f<h.length;f++)g(f);for(b=m.data[u].impactedRef,y=function(e){var t=b[e],a=c.find((function(e){return e.iname===t.modeliname})),r=a.fields.find((function(e){return e.iname===t.fieldiname})),i=n.getPathArray(a),l=c.find((function(e){return e.iname===r.reference.iname})),o={type:"ref",key:t.fieldId+t.modelId,model:a,field:r,pathArray:i,fullPath:i.map((function(e){return e.name})).join(" \xbb "),modeliName:t.modeliname,fieldiName:t.fieldiname,refFullPath:n.getPathArray(l).map((function(e){return e.name})).join("."),createdAt:r.createdAt,createdBy:r.createdBy};p.push(o)},E=0;E<b.length;E++)y(E)}n.setState({dependencies:p,refreshDependency:!1});case 12:case"end":return e.stop()}}),e)}))),n.validateName=function(e){var t=n.props.t,a=new Ee.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be max {{length}} characters long.",{length:re.a.maxMicroTxtLength}),{max:re.a.maxMicroTxtLength}).add(a.bail).add(a.regex,t("Only numbers, letters, spaces and underscore '_' characters allowed."),{regex:/^[A-Za-z0-9_ ]+$/}).add(a.bail).add(a.notStartsWith,t("Field names cannot start with underscore (_) character."),{searchStr:"_"}).validate(e)},n.validateNameWithCond=function(e,t){var a=n.props,r=a.t,i=a.model,l=n.validateName(e);if(l)return l;for(var o=0;o<i.fields.length;o++){var c=i.fields[o];if(e.toLowerCase()===c.name.toLowerCase())return r("Field with the provided name already exists")}return t.timestamps&&t.timestamps.createdAt===t.timestamps.updatedAt?r("Created at and updated at timestamp field names cannot be the same"):void 0},n.validateLabel=function(e){var t=n.props.t,a=new Ee.a;return a.add(a.trim).add(a.optional).add(a.textLength,t("Can be max {{length}} chars long.",{length:re.a.maxMicroTxtLength}),{max:re.a.maxMicroTxtLength}).validate(e)},n.validateDescription=function(e){var t=n.props.t,a=new Ee.a;return a.add(a.trim).add(a.optional).add(a.textLength,t("Can be max {{length}} chars long.",{length:re.a.maxDetailTxtLength}),{max:re.a.maxDetailTxtLength}).validate(e)},n.showNewFieldMenu=function(e){n.setState({newFieldAnchorEl:e.currentTarget})},n.closeNewFieldMenu=function(){n.setState({newFieldAnchorEl:null})},n.showSelectedMenu=function(e){n.setState({selectedMenuAnchorEl:e.currentTarget})},n.closeSelectedMenu=function(){n.setState({selectedMenuAnchorEl:null})},n.showFilterMenu=function(e){n.setState({filterAnchorEl:e.currentTarget})},n.closeFilterMenu=function(){n.setState({filterAnchorEl:null})},n.showContextMenu=function(e,t){n.setState({contextAnchorEl:e.currentTarget,selectedObj:t})},n.closeContextMenu=function(){n.setState({contextAnchorEl:null,selectedObj:null})},n.clearFlag=function(){n.setState({savedFlag:!1,errorFlag:!1})},n.handleTabChange=function(e,t){var a=n.props,r=a.user,i=a.app,l=a.activeSnap,o=a.model;a.history.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(l._id,"/models/").concat(o._id,"?tab=").concat(t))},n.showMenu=function(e){n.setState({menuAnchorEl:e.currentTarget})},n.closeMenu=function(){n.setState({menuAnchorEl:null})},n.showConfirmDialog=function(){n.setState({openConfirmDialog:!0,menuAnchorEl:null})},n.hideConfirmDialog=function(){n.setState({openConfirmDialog:!1})},n.showDeleteFieldConfirmDialog=function(){n.setState({openDeleteFieldConfirmDialog:!0,contextAnchorEl:null})},n.hideDeleteFieldConfirmDialog=function(){n.setState({openDeleteFieldConfirmDialog:!1})},n.showDeleteMultiFieldConfirmDialog=function(){n.setState({openDeleteMultiFieldConfirmDialog:!0,selectedMenuAnchorEl:null})},n.hideDeleteMultiFieldConfirmDialog=function(){n.setState({openDeleteMultiFieldConfirmDialog:!1})},n.showDisableTimestampsConfirmDialog=function(){n.setState({openDisableTimestampsConfirmDialog:!0})},n.hideDisableTimestampsConfirmDialog=function(){n.setState({openDisableTimestampsConfirmDialog:!1})},n.showHideHistory=function(){var e=n.state.showRightPanel;n.setState({showRightPanel:!e,menuAnchorEl:null})},n.showCreateModelGroupDialog=function(){var e=n.props.formValues;n.setState({openCreateModelGroupDialog:!0,groupId:e.groupId})},n.hideCreateModelGroupDialog=function(){n.setState({openCreateModelGroupDialog:!1})},n.setModelGroup=function(e){(0,n.props.change)("groupId",e.group._id)},n.setPrevModelGroup=function(){var e=n.state.groupId;(0,n.props.change)("groupId",e)},n.onSubmit=function(e){var t=n.props,a=t.reset,r=t.updateModelAction,i=t.updateFieldAction,c=t.user,d=t.app,s=t.activeSnap,m=t.model,p=t.field,u=t.fieldModel;return new Promise(function(){var t=Object(o.a)(l.a.mark((function t(o,h){var g,f,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1===e.groupId&&(e.groupId=null),g={groupId:e.groupId,label:e.label,description:e.description},f=null,g.label===m.label&&g.description===m.description&&(g.groupId?g.groupId:null)===(m.groupId?m.groupId:null)){t.next=11;break}return p&&(g.doNotRedeploy=!0),t.next=7,r(c._id,c.token,d._id,s._id,m._id,g);case 7:if(200===(f=t.sent).status){t.next=11;break}return h(new C.a(f.reduxForm)),t.abrupt("return");case 11:if(!p){t.next=16;break}return b={label:e.label,description:e.description,required:e.required,omitted:e.omitted,immutable:e.immutable},t.next=15,i(c._id,c.token,d._id,s._id,u._id,p._id,b);case 15:f=t.sent;case 16:200===f.status?(o(),a(),n.setState({savedFlag:!0})):(n.setState({errorFlag:!0}),h(new C.a(f.reduxForm)));case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},n.manageTimestamps=Object(o.a)(l.a.mark((function e(){var t,a,r,i,o,c,d,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.enableModelTimestampsAction,r=t.disableModelTimestampsAction,i=t.user,o=t.app,c=t.activeSnap,d=t.model,s=t.formValues,!d.timestamps.enabled){e.next=8;break}return n.setState({managing:!0}),e.next=5,r(i._id,i.token,o._id,c._id,d._id);case 5:n.setState({managing:!1}),e.next=12;break;case 8:return n.setState({managing:!0}),e.next=11,a(i._id,i.token,o._id,c._id,d._id,{createdAt:s.timestamps.createdAt,updatedAt:s.timestamps.updatedAt});case 11:n.setState({managing:!1});case 12:case"end":return e.stop()}}),e)}))),n.deleteModel=Object(o.a)(l.a.mark((function e(){var t,a,r,i,o,c,d,s,m,p,u,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.user,r=t.app,i=t.activeSnap,o=t.models,c=t.model,d=t.deleteModelAction,s=t.deleteFieldAction,m=t.refreshModelAction,p=t.history,"model"!==c.type){e.next=13;break}return n.setState({menuProgress:!0,menuAnchorEl:null}),e.next=5,d(a._id,a.token,r._id,i._id,c._id);case 5:if(200!==e.sent.status){e.next=10;break}return p.push("/users/".concat(a._id,"/apps/").concat(r._id,"/snaps/").concat(i._id,"/models")),m(),e.abrupt("return");case 10:n.setState({menuProgress:!1}),e.next=25;break;case 13:if(u=Ae(c,o),!(h=Fe(c,o))){e.next=25;break}return n.setState({menuProgress:!0,menuAnchorEl:null}),e.next=19,s(a._id,a.token,r._id,i._id,u._id,h._id);case 19:if(200!==e.sent.status){e.next=24;break}return p.push("/users/".concat(a._id,"/apps/").concat(r._id,"/snaps/").concat(i._id,"/models/").concat(u._id)),m(),e.abrupt("return");case 24:n.setState({menuProgress:!1});case 25:case"end":return e.stop()}}),e)}))),n.deleteField=Object(o.a)(l.a.mark((function e(){var t,a,r,i,o,c,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.user,r=t.app,i=t.activeSnap,o=t.model,c=t.deleteFieldAction,d=n.state.selectedObj,n.setState({progress:!0}),e.next=5,c(a._id,a.token,r._id,i._id,o._id,d._id);case 5:200===e.sent.status&&n.isChecked(d)&&n.manageSelection(d),n.setState({progress:!1,selectedObj:null});case 8:case"end":return e.stop()}}),e)}))),n.deleteFields=Object(o.a)(l.a.mark((function e(){var t,a,r,i,o,c,d,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.user,r=t.app,i=t.activeSnap,o=t.model,c=t.deleteFieldsAction,d=n.state.selectedFields,n.setState({multiProgress:!0}),s=d.filter((function(e){return!Object(Se.g)(r,o,e)})),e.next=6,c(a._id,a.token,r._id,i._id,o._id,{fieldIds:s.map((function(e){return e._id}))});case 6:n.setState({multiProgress:!1,selectedFields:[],multiSelect:!1});case 7:case"end":return e.stop()}}),e)}))),n.updateOrder=function(){var e=Object(o.a)(l.a.mark((function e(t,a){var i,o,c,d,s,m,p,u,h,g,f,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=n.props,o=i.user,c=i.app,d=i.activeSnap,s=i.model,m=i.updateMultipleFieldOrderAction,p=n.state.selectedObj,n.setState({progress:!0,contextAnchorEl:null}),(u=(u=Object(r.a)(s.fields)).filter((function(e){return e._id!==p._id}))).sort((function(e,t){var a=e.seqNum,n=t.seqNum;return a<n?-1:a>n?1:0})),h=[],g=0;g<u.length;g++)(f=u[g])._id===a._id?"before"===t?h.push(p,f):h.push(f,p):h.push(f);return b=1,e.next=11,m(o._id,o.token,c._id,d._id,s._id,{fields:h.map((function(e){return{id:e._id,order:b++}}))});case 11:n.setState({progress:!1,selectedObj:null});case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.updateMultipleFieldOrder=function(){var e=Object(o.a)(l.a.mark((function e(t,a,i){var o,c,d,s,m,p,u,h,g,f,b,y,E,x,v,k;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=n.props,c=o.user,d=o.app,s=o.activeSnap,m=o.model,p=o.updateMultipleFieldOrderAction,u=n.state.selectedFields,n.setState({multiProgress:!0,selectedMenuAnchorEl:null}),(h=(h=Object(r.a)(m.fields)).filter((function(e){return void 0===u.find((function(t){return t._id===e._id}))}))).sort((function(e,t){var a=e.seqNum,n=t.seqNum;return a<n?-1:a>n?1:0})),g=[],f=0;f<h.length;f++)if((b=h[f])._id===i._id)if("before"===a){for(y=u.length-1;y>=0;y--)E=u[y],g.push(E);g.push(b)}else for(g.push(b),x=0;x<u.length;x++)v=u[x],g.push(v);else g.push(b);return k=1,e.next=11,p(c._id,c.token,d._id,s._id,m._id,{fields:g.map((function(e){return{id:e._id,order:k++}}))});case 11:n.setState({multiProgress:!1});case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.manageFav=function(){var e=Object(o.a)(l.a.mark((function e(t){var a,r,i,o,c,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,r=a.user,i=a.app,o=a.activeSnap,c=a.addModelToFavorites,d=a.removeModelFromFavorites,n.setState({progress:!0,contextAnchorEl:null}),!n.isFavorite(t)){e.next=7;break}return e.next=5,d(r._id,r.token,i._id,o._id,t._id);case 5:e.next=9;break;case 7:return e.next=9,c(r._id,r.token,i._id,o._id,t._id);case 9:n.setState({progress:!1,selectedObj:null});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.filter=function(e,t,a){if("all"!==e||"all"!==t)if(a){var i=n.addFilter(e,t);n.setState({filter:Object(r.a)(i)})}else{var l=n.removeFilter(e,t);n.setState({filter:Object(r.a)(l)})}else n.setState({filter:[]})},n.sort=function(e){var t=n.state,a=t.sortKey,r=t.order;e===a?n.setState({order:"asc"===r?"desc":"asc"}):n.setState({sortKey:e,order:"asc"})},n.search=function(e){n.setState({searchStr:e.target.value&&e.target.value.trim()})},n.selectMultiple=function(){var e=n.state,t=e.multiSelect,a=e.selectedFields,r=n.getProcessedFields();t?n.setState({multiSelect:!t,selectedFields:a.filter((function(e){for(var t=0;t<r.length;t++){if(r[t]._id===e._id)return!1}return!0}))}):n.setState({multiSelect:!t,selectedFields:r.filter((function(e){if("system"===e.creator)return!1;if(n.isSubModelField(e)&&!n.getFieldSubModel(e))return!1;return!0}))})},n.isChecked=function(e){for(var t=n.state.selectedFields,a=0;a<t.length;a++){if(t[a]._id===e._id)return!0}return!1},n.manageSelection=function(e){var t=n.state,a=t.selectedFields,i=t.multiSelect;if(n.isChecked(e)){var l=a.filter((function(t){return t._id!==e._id}));n.setState({selectedFields:l,multiSelect:0!==l.length&&i})}else{var o=Object(r.a)(a);o.push(e),n.setState({selectedFields:o})}},n.addField=function(e,t){n.setState({newFieldAnchorEl:null,openNewFieldDialog:!0,newFieldName:e,newFieldType:t})},n.hideNewFieldDialog=function(){n.setState({openNewFieldDialog:!1})};var i=n.props.user.uiPreferences.defaultSortOrder,d="createdAt",s="desc",m="createdAt",p="desc";return"most-recent"===i?(d="createdAt",s="desc",m="createdAt",p="desc"):"oldest-first"===i?(d="createdAt",s="asc",m="createdAt",p="asc"):"alphabetically-asc"===i?(d="name",s="asc",m="field",p="asc"):(d="name",s="desc",m="field",p="desc"),n.state={errorMessage:null,errorTitle:null,menuAnchorEl:null,progress:!1,menuProgress:!1,openConfirmDialog:!1,openDeleteFieldConfirmDialog:!1,openDeleteMultiFieldConfirmDialog:!1,openDisableTimestampsConfirmDialog:!1,savedFlag:!1,errorFlag:!1,addingField:!1,managing:!1,sortKey:d,order:s,searchStr:"",selectedObj:null,contextAnchorEl:null,filterAnchorEl:null,newFieldAnchorEl:null,filter:[],multiSelect:!1,selectedFields:[],selectedMenuAnchorEl:null,multiProgress:!1,openNewFieldDialog:!1,newFieldName:null,newFieldType:null,dependencies:null,dSortKey:m,dOrder:p,dSearchStr:"",refreshDependency:!1,openCreateModelGroupDialog:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,r,i,o,c,d,s,m,p,u,h,g,f,b,y,E,x,v,k,w,C;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,a=this.props,r=a.t,i=a.user,o=a.app,c=a.activeSnap,d=a.team,s=a.models,m=a.model,p=a.getAppAction,u=a.getAppTeamAction,h=a.getSnapshotAction,g=a.setActiveSnapshotAction,f=a.getModelsAction,b=a.getModelAction,y=a.refreshModelAction,E=a.match,x=o||null,v=d||null,k=s||null,w=m||null,C=null,c&&c._id===E.params.snapId?C=c:(C=null,k=null,w=null),x){e.next=18;break}return e.next=11,p(E.params.userId,i.token,E.params.appId);case 11:if(200===(t=e.sent).status){e.next=17;break}return this.setState({errorTitle:r("An error has occured while loading the application!"),errorMessage:t.data.details}),e.abrupt("return");case 17:x=t.data;case 18:if(v||!x){e.next=28;break}return e.next=21,u(E.params.userId,i.token,E.params.appId);case 21:if(200===(t=e.sent).status){e.next=27;break}return this.setState({errorTitle:r("An error has occured while loading the team information!"),errorMessage:t.data.details}),e.abrupt("return");case 27:v=t.data;case 28:if(C||!v){e.next=39;break}return e.next=31,h(E.params.userId,i.token,E.params.appId,E.params.snapId);case 31:if(200===(t=e.sent).status){e.next=37;break}return this.setState({errorTitle:r("An error has occured while loading the snapshot information!"),errorMessage:t.data.details}),e.abrupt("return");case 37:C=t.data,g(t.data);case 39:if(k||!C){e.next=49;break}return e.next=42,f(E.params.userId,i.token,E.params.appId,E.params.snapId);case 42:if(200===(t=e.sent).status){e.next=48;break}return this.setState({errorTitle:r("An error has occured while loading models!"),errorMessage:t.data.details}),e.abrupt("return");case 48:k=t.data;case 49:if(w||!k){e.next=61;break}return e.next=52,b(E.params.userId,i.token,E.params.appId,E.params.snapId,E.params.modelId);case 52:if(200===(t=e.sent).status){e.next=58;break}return this.setState({errorTitle:r("An error has occured while loading the model!"),errorMessage:t.data.details}),e.abrupt("return");case 58:w=t.data;case 59:e.next=62;break;case 61:y(Object(n.a)({},w));case 62:document.title=r("Model")+"-"+w.name+" | Altogic";case 63:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTab",value:function(){var e=this.props.location;if(e.search){var t=e.search.split("=");if(2!==t.length)return"0";var a=t[0].trim(),n=t[1].trim();return"?tab"!==a||"0"!==n&&"1"!==n&&"2"!==n?"0":n}return"0"}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.app,i=t.models,l=t.model,o=t.activeSnap,c=t.width,d=this.state,s=d.errorMessage,m=d.errorTitle,p=d.openConfirmDialog,h=d.openDeleteFieldConfirmDialog,g=d.openDeleteMultiFieldConfirmDialog,f=d.openDisableTimestampsConfirmDialog,b=d.openNewFieldDialog,y=d.newFieldName,E=d.newFieldType,x=d.selectedObj,v=d.selectedFields,k=d.openCreateModelGroupDialog,w=this.getTab(),C=v.filter((function(e){return!Object(Se.g)(r,l,e)}));return s?u.a.createElement(le.a,{centered:!0},u.a.createElement(F.a,{className:n.content},u.a.createElement(F.a,{className:n.contentPlaceholder},u.a.createElement(de.a,{mainMessage:m,message:s})))):r&&i&&l&&o?u.a.createElement(F.a,{className:"xs"===c?n.container:n.containerNoScroll},this.renderContent(w),p&&u.a.createElement(fe.a,{fullWidth:!0,maxWidth:"sm",open:p,handleClose:this.hideConfirmDialog,title:a("Confirm delete model"),action:a("Delete"),onAction:function(){return e.deleteModel()},objects:[l],objectType:"model"}),h&&u.a.createElement(fe.a,{fullWidth:!0,maxWidth:"sm",open:h,handleClose:this.hideDeleteFieldConfirmDialog,title:a("Confirm delete field"),action:a("Delete"),onAction:function(){return e.deleteField()},objects:[x],objectType:"field",model:l}),g&&u.a.createElement(fe.a,{fullWidth:!0,maxWidth:"sm",open:g,handleClose:this.hideDeleteMultiFieldConfirmDialog,title:C.length>1?a("Confirm delete fields"):a("Confirm delete field"),action:a("Delete"),onAction:function(){return e.deleteFields()},objects:C,objectType:"field",model:l}),f&&u.a.createElement(fe.a,{fullWidth:!0,maxWidth:"sm",open:f,handleClose:this.hideDisableTimestampsConfirmDialog,title:a("Confirm disable timestamps"),action:a("Disable"),onAction:function(){return e.manageTimestamps()},objects:l.fields.filter((function(e){return"system"===e.creator&&("createdat"===e.type||"updatedat"===e.type)})),objectType:"timestamps",model:l}),b&&u.a.createElement(be.a,{fullWidth:!0,maxWidth:"sm",open:b,handleClose:this.hideNewFieldDialog,fieldType:E,fieldName:y,model:l}),k&&u.a.createElement(ye.a,{fullWidth:!0,maxWidth:"sm",open:k,handleClose:this.hideCreateModelGroupDialog,activeSnap:o,callback:this.setModelGroup,cancelCallback:this.setPrevModelGroup})):u.a.createElement(le.a,{centered:!0},u.a.createElement(F.a,{className:n.content},u.a.createElement(F.a,{className:n.contentPlaceholder},u.a.createElement(ce.a,{message:a("Loading model...")}))))}},{key:"renderContent",value:function(e){var t=this.props,a=t.classes,n=t.width,r=[];return"0"===e&&(r=this.getProcessedFields()),u.a.createElement(F.a,{className:Object(h.default)(a.content,"xs"!==n?a.overflowHidden:null)},this.renderPlanConstraint(),this.renderReadonlyMode(),this.renderToolBar(e,r),this.renderMenu(e),this.renderProperties(e,r))}},{key:"renderPlanConstraint",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.app,r=e.model;return-1===(0,e.authActionGroup)(["create-field","create-submodel-field"],{app:n,model:r})["create-field"]?u.a.createElement("div",{style:{display:"block"}},u.a.createElement(O.a,{severity:"info",className:a.mb1},u.a.createElement(v.a,{defaults:t("The app plan has a limit of <bold>max %s fields per model</bold>. You have reached the max number of fields for this model and you can't create new fields.").sprintf(n.planId.properties.fieldCountPerModel),components:{bold:u.a.createElement("strong",null)}}))):null}},{key:"renderReadonlyMode",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.authAction,r=e.app,i=e.model;return 0===n("update-model",{app:r,model:i})?u.a.createElement("div",{style:{display:"block"}},u.a.createElement(O.a,{severity:"warning",className:a.info},u.a.createElement(v.a,{defaults:t("You don't have the authorization to edit this model. You are viewing model <bold>%s</bold> in <bold>read-only mode</bold>.").sprintf(i.name),components:{bold:u.a.createElement("strong",null)}}))):null}},{key:"renderToolBar",value:function(e,t){var a=this,n=this.state,r=n.menuProgress,i=n.savedFlag,l=n.errorFlag,o=n.addingField,c=n.selectedFields,d=n.multiProgress,s=n.refreshDependency,m=n.searchStr,p=n.dSearchStr,g=this.props,f=g.t,b=g.classes,y=g.app,E=g.model,x=g.field,v=g.formValues,k=g.submitting,w=g.handleSubmit,C=g.authActionGroup,S=g.width,M=g.change,A=C(["update-model","create-field","delete-model"],{app:y,model:E}),F=this.getFilterCount(),j=C(["view-logs"],{app:y});return u.a.createElement(u.a.Fragment,null,u.a.createElement(ie.d,{margin:"lg"===S||"xl"===S||"1"===e||"2"===e||"0"===e&&"xs"===S},u.a.createElement(J.a,{mdDown:!0},u.a.createElement(ie.b,null," ","0"===e&&this.renderCount(t))),u.a.createElement(J.a,{lgUp:!0},u.a.createElement(ie.b,null)),i&&u.a.createElement(se.a,{open:i,text:f("Saved changes"),onClose:this.clearFlag}),l&&u.a.createElement(se.a,{open:l,text:f("Error saving changes"),onClose:this.clearFlag,type:"error"}),"0"===e&&u.a.createElement(u.a.Fragment,null,u.a.createElement(J.a,{mdDown:!0},u.a.createElement(ie.e,{placeholder:f("Search..."),onChange:this.search,value:m,width:180,clearSearch:function(){return a.setState({searchStr:""})}})),1===A["update-model"]&&c.length>0&&u.a.createElement(ie.a,{drop:!0,text:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,f("Selected")),"xs"!==S&&u.a.createElement("span",{className:Object(h.default)(b.badge,b.mlhalf)},c.length)),onClick:this.showSelectedMenu,spinner:d}),u.a.createElement(J.a,{xsDown:!0},u.a.createElement(ie.a,{drop:!0,text:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,f("Filter")),F>0&&u.a.createElement("span",{className:Object(h.default)(b.badge,b.mlhalf)},F)),icon:ee.V,onClick:this.showFilterMenu}))),"1"===e&&1===A["update-model"]&&u.a.createElement(ie.a,{action:!0,spinner:k,text:f("Save changes"),icon:te.Oc,onClick:w(this.onSubmit),disabled:x?E&&v&&v.groupId===E.groupId&&v.label===E.label&&v.description===E.description&&v.required===x.required&&v.omitted===x.omitted&&v.immutable===x.immutable:E&&v&&v.groupId===E.groupId&&v.label===E.label&&v.description===E.description}),"1"===e&&1===A["update-model"]&&u.a.createElement(ie.a,{text:f("Ignore changes"),icon:te.xd,onClick:function(){M("label",E.label),M("description",E.description),M("groupId",E.groupId),M("timestamps.enabled",E.timestamps.enabled),M("timestamps.createdAt",E.timestamps.createdAt),M("timestamps.updatedAt",E.timestamps.updatedAt),x&&(M("required",x.required),M("omitted",x.omitted)),a.closeMenu()},disabled:x?E&&v&&v.groupId===E.groupId&&v.label===E.label&&v.description===E.description&&v.required===x.required&&v.omitted===x.omitted&&v.timestamps.enabled===E.timestamps.enabled&&v.timestamps.createdAt===E.timestamps.createdAt&&v.timestamps.updatedAt===E.timestamps.updatedAt:E&&v&&v.groupId===E.groupId&&v.label===E.label&&v.description===E.description&&v.timestamps.enabled===E.timestamps.enabled&&v.timestamps.createdAt===E.timestamps.createdAt&&v.timestamps.updatedAt===E.timestamps.updatedAt}),"0"===e&&0!==A["create-field"]&&(1===A["update-model"]&&c.length>0&&"xs"===S?u.a.createElement(ie.c,{icon:ee.wb,onClick:this.showNewFieldMenu,disabled:-1===A["create-field"],action:!0,tooltip:f("Create new field")}):u.a.createElement(ie.a,{action:!0,drop:!0,spinner:o,text:f("New field"),icon:ee.wb,onClick:this.showNewFieldMenu,disabled:-1===A["create-field"]})),"2"===e&&u.a.createElement(u.a.Fragment,null,u.a.createElement(J.a,{xsDown:!0},u.a.createElement(ie.e,{placeholder:f("Search..."),onChange:this.dSearch,width:200,value:p,clearSearch:function(){return a.setState({dSearchStr:""})}})),u.a.createElement(ie.a,{spinner:s,text:f("Refresh"),icon:te.id,onClick:function(){a.setState({dependencies:null})}})),j.isAuthorized&&("xs"===S||"sm"===S)&&u.a.createElement(ie.c,{icon:te.Vb,onClick:this.showHideHistory,spinner:r,tooltip:f("View activity history")})),"0"===e&&u.a.createElement(J.a,{lgUp:!0},u.a.createElement(J.a,{xsDown:!0},u.a.createElement(ie.d,{margin:!0},u.a.createElement(ie.b,null),u.a.createElement(ie.e,{placeholder:f("Search..."),onChange:this.search,grow:"xs"===S,width:180,value:m,clearSearch:function(){return a.setState({searchStr:""})}}))," ")))}},{key:"renderFilterMenu",value:function(){var e=this.state.filterAnchorEl,t=this.props.t;return u.a.createElement(B.a,{id:"fieldsFilterPopUpMenu",anchorEl:e,open:Boolean(e),onClose:this.closeFilterMenu,elevation:4,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"center"}},u.a.createElement("div",null,u.a.createElement(xe.f,{onChange:this.filter},u.a.createElement(xe.c,{title:t("Type"),name:"type"},u.a.createElement(xe.e,{title:t("Auto number"),name:"auto-number",checked:this.getFilterValue("type","auto-number")}),u.a.createElement(xe.e,{title:t("Basic values list"),name:"basic-values-list",checked:this.getFilterValue("type","basic-values-list")}),u.a.createElement(xe.e,{title:t("Boolean"),name:"boolean",checked:this.getFilterValue("type","boolean")}),u.a.createElement(xe.e,{title:t("Created at"),name:"createdat",checked:this.getFilterValue("type","createdat")}),u.a.createElement(xe.e,{title:t("Date-time"),name:"datetime",checked:this.getFilterValue("type","datetime")}),u.a.createElement(xe.e,{title:t("Decimal"),name:"decimal",checked:this.getFilterValue("type","decimal")}),u.a.createElement(xe.e,{title:t("Monetary"),name:"monetary",checked:this.getFilterValue("type","monetary")}),u.a.createElement(xe.e,{title:t("Email"),name:"email",checked:this.getFilterValue("type","email")}),u.a.createElement(xe.d,null),u.a.createElement(xe.c,{title:t("Required"),name:"required"},u.a.createElement(xe.e,{title:t("Mandatory"),name:"mandatory",checked:this.getFilterValue("required","mandatory")}),u.a.createElement(xe.e,{title:t("Optional"),name:"optional",checked:this.getFilterValue("required","optional")}))),u.a.createElement(xe.c,{title:u.a.createElement("span",null,"\xa0"),name:"type"},u.a.createElement(xe.e,{title:t("Encrypted text"),name:"encrypted-text",checked:this.getFilterValue("type","encrypted-text")}),u.a.createElement(xe.e,{title:t("File reference"),name:"file",checked:this.getFilterValue("type","file")}),u.a.createElement(xe.e,{title:t("Geo point"),name:"geo-point",checked:this.getFilterValue("type","geo-point")}),u.a.createElement(xe.e,{title:t("Identifier"),name:"id",checked:this.getFilterValue("type","id")}),u.a.createElement(xe.e,{title:t("Integer"),name:"integer",checked:this.getFilterValue("type","integer")}),u.a.createElement(xe.e,{title:t("Link"),name:"link",checked:this.getFilterValue("type","link")}),u.a.createElement(xe.e,{title:t("Object"),name:"object",checked:this.getFilterValue("type","object")}),u.a.createElement(xe.d,null),u.a.createElement(xe.c,{title:t("Immutability"),name:"readwrite"},u.a.createElement(xe.e,{title:t("Read-only"),name:"readonly",checked:this.getFilterValue("readwrite","readonly")}),u.a.createElement(xe.e,{title:t("Read & write"),name:"readwrite",checked:this.getFilterValue("readwrite","readwrite")}))),u.a.createElement(xe.c,{title:u.a.createElement("span",null,"\xa0"),name:"type"},u.a.createElement(xe.e,{title:t("Object list"),name:"object-list",checked:this.getFilterValue("type","object-list")}),u.a.createElement(xe.e,{title:t("Object reference"),name:"reference",checked:this.getFilterValue("type","reference")}),u.a.createElement(xe.e,{title:t("Options list"),name:"enum",checked:this.getFilterValue("type","enum")}),u.a.createElement(xe.e,{title:t("Parent"),name:"parent",checked:this.getFilterValue("type","parent")}),u.a.createElement(xe.e,{title:t("Rich text"),name:"rich-text",checked:this.getFilterValue("type","rich-text")}),u.a.createElement(xe.e,{title:t("Text"),name:"text",checked:this.getFilterValue("type","text")}),u.a.createElement(xe.e,{title:t("Updated at"),name:"updatedat",checked:this.getFilterValue("type","updatedat")}),u.a.createElement(xe.d,null),u.a.createElement(xe.c,{title:t("Persistence"),name:"persistence"},u.a.createElement(xe.e,{title:t("Permanent"),name:"permanent",checked:this.getFilterValue("persistence","permanent")}),u.a.createElement(xe.e,{title:t("Transient"),name:"transient",checked:this.getFilterValue("persistence","transient")}))))))}},{key:"renderSelectedMenu",value:function(){var e=this,t=this.state,a=t.selectedMenuAnchorEl,n=t.selectedFields,r=this.props,i=r.t,l=r.classes,o=r.app,c=r.authActionGroup,d=r.model,s=c(["update-model"],{app:o,model:d}),m=d.fields.sort((function(e,t){return e.order-t.order})).filter((function(e){for(var t=0;t<n.length;t++){if(n[t]._id===e._id)return!1}return!0})),p=n.filter((function(e){return!Object(Se.g)(o,d,e)}));return u.a.createElement(D.a,{id:"modelsToolBarMenu",anchorEl:a,open:Boolean(a),onClose:this.closeSelectedMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},1===s["update-model"]&&m.length>0&&u.a.createElement(ge.a,{key:2,icon:te.Qb,text:u.a.createElement("span",null,i("Change order"),u.a.createElement("span",{className:Object(h.default)(l.badgeSmall,l.ml1)},n.length)),parentMenuOpen:Boolean(a)},u.a.createElement(ge.a,{icon:te.l,text:i("Move before"),parentMenuOpen:Boolean(a)},u.a.createElement(he.a,{onClick:this.closeToolBarMenu,icon:null},i("Move before")),m.map((function(t){return u.a.createElement(ue.a,{key:t._id,onClick:function(){return e.updateMultipleFieldOrder(t.order,"before",t)}},"(",t.seqNum,")\xa0",t.name)}))),u.a.createElement(ge.a,{icon:te.Hb,text:i("Move after"),parentMenuOpen:Boolean(a)},u.a.createElement(he.a,{onClick:this.closeToolBarMenu,icon:null},i("Move after")),m.map((function(t){return u.a.createElement(ue.a,{key:t._id,onClick:function(){return e.updateMultipleFieldOrder(t.order,"after",t)}},"(",t.seqNum,")\xa0",t.name)})))),1===s["update-model"]&&p.length>0&&u.a.createElement(ue.a,{onClick:this.showDeleteMultiFieldConfirmDialog,icon:te.wd,helperTip:n.length>p.length?i("Authentication user data model fields cannot be deleted"):null},u.a.createElement("span",null,i("Delete fields"),u.a.createElement("span",{className:Object(h.default)(l.badgeSmall,l.ml1)},p.length))))}},{key:"renderMenu",value:function(e){var t=this,a=this.state.menuAnchorEl,n=this.props,r=n.t,i=n.app,l=n.authActionGroup,o=n.model,c=n.field,d=n.formValues,s=n.change,m=l(["update-model","delete-model"],{app:i,model:o}),p=l(["view-logs"],{app:i});return u.a.createElement(D.a,{id:"modelToolBarMenu",anchorEl:a,open:Boolean(a),onClose:this.closeMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},1===m["update-model"]&&"1"===e&&u.a.createElement(ue.a,{onClick:function(){s("label",o.label),s("description",o.description),s("groupId",o.groupId),s("timestamps.enabled",o.timestamps.enabled),s("timestamps.createdAt",o.timestamps.createdAt),s("timestamps.updatedAt",o.timestamps.updatedAt),c&&(s("required",c.required),s("omitted",c.omitted)),t.closeMenu()},icon:te.xd,disabled:c?o&&d&&d.groupId===o.groupId&&d.label===o.label&&d.description===o.description&&d.required===c.required&&d.omitted===c.omitted&&d.timestamps.enabled===o.timestamps.enabled&&d.timestamps.createdAt===o.timestamps.createdAt&&d.timestamps.updatedAt===o.timestamps.updatedAt:o&&d&&d.groupId===o.groupId&&d.label===o.label&&d.description===o.description&&d.timestamps.enabled===o.timestamps.enabled&&d.timestamps.createdAt===o.timestamps.createdAt&&d.timestamps.updatedAt===o.timestamps.updatedAt},r("Ignore changes")),1===m["update-model"]&&"1"===e&&u.a.createElement(N.a,null),p.isAuthorized&&u.a.createElement(ue.a,{onClick:this.showHideHistory,icon:te.Vb},r("View activity history")),1===m["delete-model"]&&u.a.createElement(N.a,null),1===m["delete-model"]&&u.a.createElement(ue.a,{onClick:this.showConfirmDialog,icon:te.wd},"model"===o.type?r("Delete model"):r("Delete sub-model")))}},{key:"renderNewFieldMenu",value:function(){var e=this,t=this.state.newFieldAnchorEl,a=this.props,n=a.t,r=a.app,i=(0,a.authActionGroup)(["create-field","create-submodel-field"],{app:r,activeSnap:a.activeSnap,model:a.model});return 1!==i["create-field"]?null:u.a.createElement(D.a,{id:"newFieldToolBarMenu",anchorEl:t,open:Boolean(t),onClose:this.closeNewFieldMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"}},u.a.createElement(he.a,{onClick:this.closeModelMenu,icon:null},n("Basic")),u.a.createElement(ge.a,{icon:Object(Se.d)("text"),text:n("Text field"),parentMenuOpen:Boolean(t)},u.a.createElement(ue.a,{onClick:function(){return e.addField("Text","text")},icon:Object(Se.d)("text")},n("Text")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Object id","id")},icon:Object(Se.d)("id")},n("Object id")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Rich text","rich-text")},icon:Object(Se.d)("rich-text")},n("Rich text")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Encrypted text","encrypted-text")},icon:Object(Se.d)("encrypted-text")},n("Encrypted text")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Email","email")},icon:Object(Se.d)("email")},n("Email")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Link","link")},icon:Object(Se.d)("link")},n("Link"))),u.a.createElement(ue.a,{onClick:function(){return e.addField("Boolean","boolean")},icon:Object(Se.d)("boolean")},n("Boolean")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Integer","integer")},icon:Object(Se.d)("integer")},n("Integer")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Decimal","decimal")},icon:Object(Se.d)("decimal")},n("Decimal")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Monetary","monetary")},icon:Object(Se.d)("monetary")},n("Monetary")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Date-time","datetime")},icon:Object(Se.d)("datetime")},n("Date-time")),u.a.createElement(N.a,null),u.a.createElement(he.a,{onClick:this.closeModelMenu,icon:null},n("Advanced")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Auto number","auto-number")},icon:Object(Se.d)("auto-number")},n("Auto number")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Options list","enum")},icon:Object(Se.d)("enum")},n("Options list")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Geo point","geo-point")},icon:Object(Se.d)("geo-point")},n("Geo point")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Object reference","reference")},icon:Object(Se.d)("reference")},n("Object reference")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Basic values list","basic-values-list")},icon:Object(Se.d)("basic-values-list")},n("Basic values list")),u.a.createElement(ue.a,{onClick:function(){return e.addField("File","file")},icon:Object(Se.d)("file")},n("File reference")),u.a.createElement(N.a,null),u.a.createElement(he.a,{onClick:this.closeModelMenu,icon:null},n("Sub-models")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Object","object")},icon:Object(Se.d)("object"),disabled:1!==i["create-submodel-field"],helperTip:1!==i["create-submodel-field"]?u.a.createElement(v.a,{defaults:n("The app plan has a limit of <bold>max model hierarchy depth of %s nested sub-models</bold>. You have reached the max model hierarchy depth and you can't create new sub-models.").sprintf(r.planId.properties.maxModelHierarchyDepth),components:{bold:u.a.createElement("strong",null)}}):null},n("Object")),u.a.createElement(ue.a,{onClick:function(){return e.addField("Object list","object-list")},icon:Object(Se.d)("object-list"),disabled:1!==i["create-submodel-field"],helperTip:1!==i["create-submodel-field"]?u.a.createElement(v.a,{defaults:n("The app plan has a limit of <bold>max model hierarchy depth of %s nested sub-models</bold>. You have reached the max model hierarchy depth and you can't create new sub-models.").sprintf(r.planId.properties.maxModelHierarchyDepth),components:{bold:u.a.createElement("strong",null)}}):null},n("Object list")))}},{key:"renderProperties",value:function(e,t){var a=this.props,n=a.authAction,r=a.app,i=a.model,l=this.state.showRightPanel,o=!1;return 0===n("update-model",{app:r,model:i})&&(o=!0),u.a.createElement(oe.a,{rightPanel:this.renderRightPanel(),rightPanelName:"snapHistory",open:l,onClose:this.showHideHistory},this.renderTab(e),"0"===e&&this.renderFields(t,o),"1"===e&&this.renderModelDetails(o),"2"===e&&this.renderDependencies(o))}},{key:"renderTab",value:function(e){var t=this.props,a=t.t,n=t.classes,r=t.model,i=this.state.dependencies;return u.a.createElement("div",{className:n.tabList},u.a.createElement(T.a,{value:e,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},u.a.createElement(_.a,{value:"0",label:u.a.createElement("div",{className:n.tabTextWrapper},u.a.createElement(Q.a,{icon:te.E,className:n.tabIcon}),a("Fields"),u.a.createElement("span",{className:Object(h.default)("0"===e?n.badge:n.badgeGrey,n.mlhalf)},r.fields.length)),classes:{root:n.tabRoot}}),u.a.createElement(_.a,{value:"1",label:u.a.createElement("div",{className:n.tabTextWrapper},u.a.createElement(Q.a,{icon:te.Ab,className:n.tabIcon}),this.isSubModel()?a("Sub-model details"):a("Model details")),classes:{root:n.tabRoot}}),u.a.createElement(_.a,{value:"2",label:u.a.createElement("div",{className:n.tabTextWrapper},u.a.createElement(Q.a,{icon:te.bb,className:n.tabIcon}),i&&i.length>0?u.a.createElement("span",null,a("Dependencies"),u.a.createElement("span",{className:Object(h.default)("2"===e?n.badge:n.badgeGrey,n.mlhalf)},i.length)):a("Dependencies")),classes:{root:n.tabRoot}})))}},{key:"renderModelDetails",value:function(e){var t=this.props,a=t.t,n=t.classes,i=t.model,l=t.theme,o=t.app,c=t.activeSnap,d=t.invalid,s=t.authAction,m=this.state.managing,p=s("update-snapshot",{app:o,activeSnap:c}),g=Object(r.a)(c.modelGroups);return u.a.createElement(F.a,{className:n.tabArea},u.a.createElement(j.a,{container:!0,spacing:1},u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(I.a,{component:"legend",className:n.formLabel},a("Data Persistence")),u.a.createElement(R.a,null,u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("Objects of models are either stored in database <bold>(permanent)</bold> or not <bold>(transient)</bold>. If a model is set as transient then child sub-models of this model needs to be all transient and they cannot be marked as permanent. <bold>Typical use case for transient models is passing their objects as input parameters to service requests</bold> where you do not necessarily need to store the input value in database."),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{className:n.mt2},u.a.createElement("span",{className:n.persistence},u.a.createElement(Q.a,{icon:i.transient?te.Ld:te.gb,style:{marginRight:l.spacing(.5)},fixedWidth:!0}),i.transient?a("Transient"):a("Permanent"),"\xa0",this.isSubModel()?a("Sub-model"):a("Model"))))),this.isSubModel()&&"sub-model-object"===i.type&&u.a.createElement(j.a,{container:!0,spacing:0},u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement("div",{style:{margin:l.spacing(0,0)}},"\xa0"),u.a.createElement(I.a,{component:"legend",className:n.formLabel},a("Properties")),u.a.createElement(R.a,{style:{marginBottom:l.spacing(1)}},u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("For child models which are sub-model fields of a top level model, you can also specify <bold>mandatory vs. optinal</bold> parameter. If the sub-model is marked as required then during object creation value existence checks are applied."),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{paddingLeft:l.spacing(.5)}},u.a.createElement(S.a,{name:"required",label:u.a.createElement("div",{className:n.body2},u.a.createElement(v.a,{defaults:a("<bold>Required</bold> field, apply value existence checks during object creation"),components:{bold:u.a.createElement("strong",null)}})),component:Ee.d,dense:!0})))),this.isSubModel()&&u.a.createElement(j.a,{container:!0,spacing:0},u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(R.a,{style:{marginBottom:l.spacing(1),marginTop:"sub-model-object"===i.type||"sub-model-list"===i.type?l.spacing(1):0}},u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("Omission defines if the sub-model data will be returned during parent model GET method requests. A typical use-case is the sensitive fields such as passwords stored in the database, but their values are not returned."),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{paddingLeft:l.spacing(.5)}},u.a.createElement(S.a,{name:"omitted",label:u.a.createElement("div",{className:n.body2},u.a.createElement(v.a,{defaults:a("<bold>Omitted</bold> field, the the value of the field is not returned in responses"),components:{bold:u.a.createElement("strong",null)}})),component:Ee.d,dense:!0})))),!1===i.transient&&!1===i.timestamps.enabled&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{margin:l.spacing(0,0)}},"\xa0"),u.a.createElement(I.a,{component:"legend",className:n.formLabel},a("Timestamps")),u.a.createElement(j.a,{container:!0,spacing:0,className:n.grid},u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(R.a,{style:{marginBottom:l.spacing(1)}},u.a.createElement(v.a,{defaults:a("Models with timestamps automatically set create and update timestamp fields so that you can <bold>track the creation and last modification date of model objects.</bold>"),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",null,u.a.createElement("span",{className:n.disabledTimestamp},u.a.createElement(Q.a,{icon:te.td,style:{marginRight:l.spacing(.5)},fixedWidth:!0}),a("Disabled"))))),u.a.createElement("div",{className:n.mt1},u.a.createElement(j.a,{container:!0,spacing:2,className:n.grid},u.a.createElement(j.a,{item:!0,xs:12,sm:4},u.a.createElement(S.a,{color:"dark"===l.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"timestamps.createdAt",label:a("Created at field name"),id:"timestamps.createdAt",component:Ee.g,autoComplete:"off",inputProps:{maxLength:re.a.maxMicroTxtLength},validate:this.validateNameWithCond,disabled:e})),u.a.createElement(j.a,{item:!0,xs:12,sm:4},u.a.createElement(S.a,{color:"dark"===l.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"timestamps.updatedAt",label:a("Updated at field name"),id:"timestamps.updatedAt",component:Ee.g,autoComplete:"off",inputProps:{maxLength:re.a.maxMicroTxtLength},validate:this.validateNameWithCond,disabled:e})))),u.a.createElement("div",{className:n.mt1},u.a.createElement(ie.a,{spinner:m,text:a("Enable timestamps"),icon:te.Ec,onClick:this.manageTimestamps,disabled:e||d,margin:!1}))),!1===i.transient&&!0===i.timestamps.enabled&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{margin:l.spacing(0,0)}},"\xa0"),u.a.createElement("div",{className:n.formLabel},a("Timestamps")),u.a.createElement(j.a,{container:!0,spacing:0,className:n.grid},u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(R.a,{style:{marginBottom:l.spacing(1)}},u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("Models with timestamps automatically set create and update timestamp fields so that you can <bold>track the creation and last modification date of model objects</bold>. <bold>If you disable timestamps, historical timestamps data will be deleted</bold> and you cannot recover the data when you enable timestamps again."),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",null,u.a.createElement("span",{className:n.enabledTimestamp},u.a.createElement(Q.a,{icon:te.ud,style:{marginRight:l.spacing(.5)},fixedWidth:!0}),a("Enabled"))))),u.a.createElement("div",{className:n.mt1},u.a.createElement(j.a,{container:!0,spacing:2,className:n.grid},u.a.createElement(j.a,{item:!0,xs:12,sm:4},u.a.createElement(S.a,{color:"dark"===l.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"timestamps.createdAt",label:a("Created at field name"),id:"timestamps.createdAt",component:Ee.g,autoComplete:"off",inputProps:{maxLength:re.a.maxMicroTxtLength},validate:this.validateName,disabled:!0})),u.a.createElement(j.a,{item:!0,xs:12,sm:4},u.a.createElement(S.a,{color:"dark"===l.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"timestamps.updatedAt",label:a("Updated at field name"),id:"timestamps.updatedAt",component:Ee.g,autoComplete:"off",inputProps:{maxLength:re.a.maxMicroTxtLength},validate:this.validateName,disabled:!0})))),u.a.createElement("div",{className:n.mt1},u.a.createElement(ie.a,{spinner:m,text:a("Disable timestamps"),icon:te.Ec,onClick:this.showDisableTimestampsConfirmDialog,disabled:e,margin:!1}))),!1===this.isSubModel()&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{margin:l.spacing(0,0)}},"\xa0"),u.a.createElement(I.a,{component:"legend",className:Object(h.default)(n.formLabel,n.mt2)},a("Model Group")),u.a.createElement(R.a,null,u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("Model groups help <bold>categorize your models into logical groupings</bold>."),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement(j.a,{container:!0,spacing:0,style:{marginTop:l.spacing(1)}},u.a.createElement(j.a,{item:!0,xs:12,sm:6},u.a.createElement(S.a,{color:"dark"===l.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"groupId",label:a("Group"),component:Ee.f,disabled:e},1===p&&u.a.createElement(W.a,{key:-2,value:-2,className:n.body2,onClick:this.showCreateModelGroupDialog},u.a.createElement(Q.a,{icon:te.Dc,style:{marginRight:l.spacing(1.5),fontSize:"1rem"},fixedWidth:!0}),a("Add new group")),1===p&&u.a.createElement(N.a,null),u.a.createElement(W.a,{key:-1,value:-1,className:n.body2},a("No group")),c.modelGroups.length>0&&u.a.createElement(N.a,null),g.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})).map((function(e){return u.a.createElement(W.a,{key:e._id,value:e._id,className:n.body2},e.name)})))))),u.a.createElement("div",{style:{margin:l.spacing(0,0)}},"\xa0"),u.a.createElement(I.a,{component:"legend",className:Object(h.default)(n.formLabel,n.mt2)},a("Label & Description")),u.a.createElement(j.a,{container:!0,spacing:0,style:{marginTop:l.spacing(1)}},u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(R.a,{style:{marginBottom:l.spacing(1)}},u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("<bold>Labels are mainly used in reports and data navigator</bold> and are short descriptive names for models without the naming constraints. If omitted, the model name is used as its label."),components:{bold:u.a.createElement("strong",null)}}))),u.a.createElement(j.a,{item:!0,xs:12,sm:4}),u.a.createElement(j.a,{item:!0,xs:12,sm:6},u.a.createElement(S.a,{color:"dark"===l.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"label",label:a("Label"),id:"label",component:Ee.g,autoComplete:"off",inputProps:{maxLength:re.a.maxMicroTxtLength},validate:this.validateLabel,disabled:e})),u.a.createElement(j.a,{item:!0,xs:12,sm:6}),u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(R.a,{style:{margin:l.spacing(2,0,1,0)}},u.a.createElement(Q.a,{icon:te.q,style:{marginRight:l.spacing(.5)}}),u.a.createElement(v.a,{defaults:a("<bold>Descriptions are used to document the model</bold>, what it is used for, what kind of data managed, its dependencies etc. so that other team members can better understand this model."),components:{bold:u.a.createElement("strong",null)}}))),u.a.createElement(j.a,{item:!0,xs:12,sm:4}),u.a.createElement(j.a,{item:!0,xs:12,sm:8},u.a.createElement(S.a,{variant:"filled",color:"dark"===l.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,name:"description",label:a("Description"),id:"description",component:Ee.g,autoComplete:"off",multiline:!0,rows:6,inputProps:{maxLength:re.a.maxDetailTxtLength},validate:this.validateDescription,disabled:e}))))}},{key:"renderFields",value:function(e,t){var a=this.props.classes;return u.a.createElement(F.a,{className:a.tabArea},this.renderTable(e,t),this.renderContextMenu(),this.renderFilterMenu(),this.renderSelectedMenu(),this.renderNewFieldMenu())}},{key:"renderCount",value:function(e,t){var a=this.props,n=a.t,r=null,i=a.model.fields.filter((function(e){return!e.hidden}));return 0===i.length?r=n("No fields"):i.length>0&&0===e.length?r=n("No matching fields"):i.length===e.length?r=1===i.length?n("1 field"):i.length+" "+n("fields"):1===e.length?r=n("1 field match of")+" "+i.length:e.length>1&&(r=e.length+" "+n("fields match of")+" "+i.length),u.a.createElement(z.a,{variant:"h6"},r)}},{key:"renderTable",value:function(e,t){var a=this,n=this.props,r=n.t,i=n.classes,l=n.app,o=n.model,c=n.authActionGroup,d=n.width,s=n.team,m=this.state,p=m.sortKey,g=m.order,f=m.multiSelect,b=c(["update-model","delete-model"],{app:l,model:o});return u.a.createElement(P.a,{stickyHeader:!0},u.a.createElement(G.a,null,u.a.createElement(V.a,null,1===b["update-model"]?u.a.createElement(q.a,{width:"32px",className:i.contextMenuCell,align:"center"},"\xa0"):null,1===b["update-model"]?u.a.createElement(q.a,{width:"32px",className:i.contextMenuCell,align:"center"},u.a.createElement(Y.a,{checked:f,onChange:this.selectMultiple,color:"primary",disabled:t})):null,u.a.createElement(J.a,{xsDown:!0},u.a.createElement(q.a,{width:"32px"},u.a.createElement(H.a,{active:"sequence"===p,direction:"sequence"===p?g:"asc",onClick:function(){return a.sort("sequence")}},u.a.createElement(Q.a,{icon:te.Qb,className:i.tableHeadIcon})))),u.a.createElement(q.a,null,u.a.createElement(H.a,{active:"name"===p,direction:"name"===p?g:"asc",onClick:function(){return a.sort("name")}},u.a.createElement(Q.a,{icon:te.ld,className:i.tableHeadIcon}),r("Name"))),u.a.createElement(J.a,{xsDown:!0},u.a.createElement(q.a,{className:Object(h.default)(i.contextMenuCell,i.breakWord),align:"sm"===d?"left":"center"},u.a.createElement(H.a,{active:"mandatory"===p,direction:"mandatory"===p?g:"asc",onClick:function(){return a.sort("mandatory")}},r("Required"))),u.a.createElement(q.a,{className:Object(h.default)(i.contextMenuCell,i.breakWord),align:"sm"===d?"left":"center"},u.a.createElement(H.a,{active:"readonly"===p,direction:"readonly"===p?g:"asc",onClick:function(){return a.sort("readonly")}},r("Read-only"))),u.a.createElement(q.a,{className:Object(h.default)(i.contextMenuCell,i.breakWord),align:"sm"===d?"left":"center"},u.a.createElement(H.a,{active:"permanent"===p,direction:"permanent"===p?g:"asc",onClick:function(){return a.sort("permanent")}},r("Permanent")))),s.length>1&&u.a.createElement(J.a,{mdDown:!0},u.a.createElement(q.a,null,u.a.createElement(H.a,{active:"createdAt"===p,direction:"createdAt"===p?g:"asc",onClick:function(){return a.sort("createdAt")}},u.a.createElement(Q.a,{icon:te.B,className:i.tableHeadIcon}),r("Created at"))),u.a.createElement(q.a,null,u.a.createElement(H.a,{active:"updatedAt"===p,direction:"updatedAt"===p?g:"asc",onClick:function(){return a.sort("updatedAt")}},u.a.createElement(Q.a,{icon:te.B,className:i.tableHeadIcon}),r("Updated at")))))),u.a.createElement(L.a,null,this.renderFieldContents(e,t)))}},{key:"renderFieldContents",value:function(e,t){var a=this,n=this.state,r=n.progress,i=n.selectedObj,l=n.searchStr,o=n.filter,c=this.props,d=c.t,s=c.classes,m=c.theme,p=c.user,g=c.app,b=c.activeSnap,E=c.model,x=c.authActionGroup,k=c.width,w=c.team,C=x(["update-model","delete-model"],{app:g,activeSnap:b,model:E});return 0===E.fields.length?u.a.createElement(V.a,null,u.a.createElement(q.a,{colSpan:10},u.a.createElement("div",{className:s.noDataPlaceholder},u.a.createElement(we.a,{icon:te.jd,mainMessage:1===C["update-model"]?u.a.createElement(v.a,{defaults:d("You don't have any fields in model <bold>'%s'</bold> to work on. Click <bold>New field</bold> to create one.").sprintf(E.name),components:{bold:u.a.createElement("strong",null)}}):u.a.createElement(v.a,{defaults:d("There aren't any fields in model <bold>'%s'</bold>. Your authorization rights do not permit update of this model."),components:{bold:u.a.createElement("strong",null)}}),message:u.a.createElement("span",{style:{fontSize:m.typography.caption.fontSize}},u.a.createElement(v.a,{defaults:d("Learn <link1>Field Basics</link1> or explore <link2>Adding Fields to a Model</link2> guide"),components:{link1:u.a.createElement($.a,{href:"https://altogic.com/docs/platform-concepts/models#fields",target:"_blank"}),link2:u.a.createElement($.a,{href:"https://altogic.com/docs/help-guides/data-modeling/fields",target:"_blank"})}})),smallIcon:!1,action:null})))):0===e.length&&(l||o.length>0)?u.a.createElement(V.a,null,u.a.createElement(q.a,{colSpan:10},u.a.createElement("div",{className:s.noDataPlaceholder},u.a.createElement(we.a,{icon:te.Ab,mainMessage:d("No items matching search and/or filter criteria"),message:d("Didn't find what you're looking for? Some fields may be hidden because of the search filters you've entered."),smallIcon:!0,action:d("Reset filters"),actionIcon:te.xd,callBack:function(){a.setState({searchStr:"",filter:[]})},searchResult:!0})))):e.map((function(e){var n=null,o=a.isSubModelField(e);return o&&(n=a.getFieldSubModel(e)),u.a.createElement(V.a,{key:e._id},1===C["update-model"]?u.a.createElement(q.a,{className:s.contextMenuCell,align:"center"},r&&i._id===e._id?u.a.createElement(U.a,{size:20,className:s.spinner}):u.a.createElement(X.a,{className:s.contextMenuButton,onClick:function(t){return a.showContextMenu(t,e)},disabled:r||t},u.a.createElement(Q.a,{icon:Z.k,className:s.contextMenuIcon}))):null,1===C["update-model"]?u.a.createElement(q.a,{width:"32px",className:s.contextMenuCell,align:"center"},u.a.createElement(Y.a,{checked:a.isChecked(e),onChange:function(){return a.manageSelection(e)},color:"primary",disabled:t||"system"===e.creator||o&&!n})):null,u.a.createElement(J.a,{xsDown:!0},u.a.createElement(q.a,{width:"32px"},e.seqNum)),u.a.createElement(q.a,{className:s.breakWord},o&&n?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement($.a,{href:"#",component:K.a,to:"/users/".concat(p._id,"/apps/").concat(g._id,"/snaps/").concat(b._id,"/models/").concat(n._id)},u.a.createElement(y.a,{highlightClassName:s.highlight,searchWords:[l],autoEscape:!0,textToHighlight:e.name})),a.isFavorite(n)&&u.a.createElement(Q.a,{icon:ae.g,className:s.favorite})),u.a.createElement("div",{className:Object(h.default)(s.caption,s.disabled,s.italic)},u.a.createElement(Q.a,{icon:Object(Se.d)(e),fixedWidth:!0,style:{marginRight:m.spacing(.5)}}),Object(Se.c)(d,e))):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement($.a,{href:"#",component:K.a,to:"/users/".concat(p._id,"/apps/").concat(g._id,"/snaps/").concat(b._id,"/models/").concat(E._id,"/fields/").concat(e._id)},u.a.createElement(y.a,{highlightClassName:s.highlight,searchWords:[l],autoEscape:!0,textToHighlight:e.name}))),u.a.createElement("div",{className:Object(h.default)(s.caption,s.disabled,s.italic)},u.a.createElement(Q.a,{icon:Object(Se.d)(e),fixedWidth:!0,style:{marginRight:m.spacing(.5)}}),Object(Se.c)(d,e))),u.a.createElement(J.a,{smUp:!0},u.a.createElement("div",{className:s.fieldInfo},u.a.createElement(Q.a,{icon:e.required?te.i:te.N,style:{marginRight:m.spacing(.5)},fixedWidth:!0}),e.required?d("Required"):d("Optional")),u.a.createElement("div",{className:s.fieldInfo},u.a.createElement(Q.a,{icon:e.immutable?te.nc:te.yc,style:{marginRight:m.spacing(.5)},fixedWidth:!0}),e.immutable?d("Read-only"):d("Read & write")),u.a.createElement("div",{className:s.fieldInfo},u.a.createElement(Q.a,{icon:e.transient?te.Ld:te.gb,style:{marginRight:m.spacing(.5)},fixedWidth:!0}),e.transient?d("Transient"):d("Permanent")))),u.a.createElement(J.a,{xsDown:!0},u.a.createElement(q.a,{className:Object(h.default)(s.breakWord,s.contextMenuCell),align:"sm"===k?"left":"center",style:{paddingRight:m.spacing(3)}},a.getCheckIcon(e.required)),u.a.createElement(q.a,{className:Object(h.default)(s.breakWord,s.contextMenuCell),align:"sm"===k?"left":"center",style:{paddingRight:m.spacing(3)}},a.getCheckIcon(e.immutable)),u.a.createElement(q.a,{className:Object(h.default)(s.breakWord,s.contextMenuCell),align:"sm"===k?"left":"center",style:{paddingRight:m.spacing(3)}},a.getCheckIcon(!e.transient))),w.length>1&&u.a.createElement(J.a,{mdDown:!0},u.a.createElement(q.a,{className:s.breakWord},u.a.createElement("div",{style:{display:"flex",alignItems:"center"}},u.a.createElement(pe.a,{user:a.getMember(e.createdBy),size:"small"}),u.a.createElement("div",{style:{marginLeft:m.spacing(1)}},u.a.createElement("div",null,f()(e.createdAt).format("MMM Do, YYYY")),u.a.createElement("div",{style:{fontStyle:"italic",color:m.palette.text.disabled,fontSize:m.typography.caption.fontSize}},f()(e.createdAt).format("hh:mm a"))))),u.a.createElement(q.a,{className:s.breakWord},e.updatedAt&&e.updatedBy?u.a.createElement("div",{style:{display:"flex",alignItems:"center"}},u.a.createElement(pe.a,{user:a.getMember(e.updatedBy),size:"small"}),u.a.createElement("div",{style:{marginLeft:m.spacing(1)}},u.a.createElement("div",null,f()(e.updatedAt).format("MMM Do, YYYY")),u.a.createElement("div",{style:{fontStyle:"italic",color:m.palette.text.disabled,fontSize:m.typography.caption.fontSize}},f()(e.updatedAt).format("hh:mm a")))):null)))}))}},{key:"renderContextMenu",value:function(){var e=this,t=this.state,a=t.contextAnchorEl,n=t.selectedObj,r=this.props,i=r.t,l=r.authActionGroup,o=r.user,c=r.app,d=r.activeSnap,s=r.model,m=r.history;if(!n)return null;var p=l(["update-model"],{app:c,activeSnap:d,model:s}),h=null,g=!1;return this.isSubModelField(n)&&((h=this.getFieldSubModel(n))||(g=!0)),u.a.createElement(D.a,{id:"fieldPopUpMenu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:this.closeContextMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},1===p["update-model"]&&[u.a.createElement(he.a,{key:0,icon:Object(Se.d)(n),color:!0},n.name),u.a.createElement(ue.a,{key:1,onClick:function(){h?m.push("/users/".concat(o._id,"/apps/").concat(c._id,"/snaps/").concat(d._id,"/models/").concat(h._id)):m.push("/users/".concat(o._id,"/apps/").concat(c._id,"/snaps/").concat(d._id,"/models/").concat(s._id,"/fields/").concat(n._id))},icon:te.yc,disabled:"system"===n.creator||g,helperTip:"system"===n.creator?i("System managed fields cannot be edited"):g?i("You do not have the authorization to edit this sub-model"):null},i("Edit field")),s.fields.length>1&&u.a.createElement(ge.a,{key:2,icon:te.Qb,text:i("Change order"),parentMenuOpen:Boolean(a)},u.a.createElement(ge.a,{icon:te.l,text:i("Move before"),parentMenuOpen:Boolean(a)},u.a.createElement(he.a,{onClick:this.closeToolBarMenu,icon:null},i("Move before")),s.fields.sort((function(e,t){return e.order-t.order})).filter((function(e){return e._id!==n._id})).map((function(t){return u.a.createElement(ue.a,{key:t._id,onClick:function(){return e.updateOrder("before",t)}},"(",t.seqNum,")\xa0",t.name)}))),u.a.createElement(ge.a,{icon:te.Hb,text:i("Move after"),parentMenuOpen:Boolean(a)},u.a.createElement(he.a,{onClick:this.closeToolBarMenu,icon:null},i("Move after")),s.fields.sort((function(e,t){return e.order-t.order})).filter((function(e){return e._id!==n._id})).map((function(t){return u.a.createElement(ue.a,{key:t._id,onClick:function(){return e.updateOrder("after",t)}},"(",t.seqNum,")\xa0",t.name)})))),u.a.createElement(N.a,{key:4}),u.a.createElement(ue.a,{key:5,onClick:this.showDeleteFieldConfirmDialog,icon:te.wd,disabled:"system"===n.creator||g||Object(Se.g)(c,s,n),helperTip:Object(Se.g)(c,s,n)?i("Authentication user data model fields cannot be deleted"):"system"===n.creator?i("System managed fields cannot be deleted"):g?i("You do not have the authorization to delete this sub-model"):null},i("Delete field"))])}},{key:"getCheckIcon",value:function(e){var t=this.props.theme;return e?u.a.createElement(Q.a,{icon:te.H,fixedWidth:!0,style:{width:20,height:20,color:t.palette.success.main}}):u.a.createElement(Q.a,{icon:te.rd,fixedWidth:!0,style:{width:20,height:20,color:t.palette.error.light}})}},{key:"renderDependencies",value:function(e){var t=this,a=this.props,n=a.t,r=a.classes,i=a.width,l=a.models,o=a.model,c=this.state,d=c.dependencies,s=c.dSortKey,m=c.dOrder,p=c.refreshDependency;return d?u.a.createElement(F.a,{className:r.tabArea},u.a.createElement(P.a,{stickyHeader:!0},u.a.createElement(G.a,null,u.a.createElement(V.a,null,u.a.createElement(J.a,{mdDown:!0},u.a.createElement(q.a,null,u.a.createElement(H.a,{active:"model"===s,direction:"model"===s?m:"asc",onClick:function(){return t.dSort("model")}},u.a.createElement(Q.a,{icon:te.ld,className:r.tableHeadIcon}),n("Model/sub-model")))),u.a.createElement(q.a,null,"xs"===i?n("Dependents"):u.a.createElement(H.a,{active:"field"===s,direction:"field"===s?m:"asc",onClick:function(){return t.dSort("field")}},u.a.createElement(Q.a,{icon:te.ld,className:r.tableHeadIcon}),n("Field"))),u.a.createElement(J.a,{lgDown:!0},u.a.createElement(q.a,null,u.a.createElement(H.a,{active:"type"===s,direction:"type"===s?m:"asc",onClick:function(){return t.dSort("type")}},u.a.createElement(Q.a,{icon:te.Cb,className:r.tableHeadIcon}),n("Type")))),u.a.createElement(J.a,{xsDown:!0},u.a.createElement(q.a,null,u.a.createElement(Q.a,{icon:te.bb,className:r.tableHeadIcon}),n("Dependencies"))),u.a.createElement(J.a,{mdDown:!0},u.a.createElement(q.a,null,u.a.createElement(H.a,{active:"createdAt"===s,direction:"createdAt"===s?m:"asc",onClick:function(){return t.dSort("createdAt")}},u.a.createElement(Q.a,{icon:te.B,className:r.tableHeadIcon}),n("Created at")))))),u.a.createElement(L.a,null,this.renderDependenciesContents()))):(!1===p&&l&&o&&setTimeout(this.loadDependencies,0),u.a.createElement(F.a,{className:r.content},u.a.createElement(F.a,{className:r.contentPlaceholder},u.a.createElement(ce.a,{message:n("Loading dependencies...")}))))}},{key:"renderDependenciesContents",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.model,i=t.theme,l=t.user,o=t.app,c=t.activeSnap,d=t.width,s=this.state,m=s.dependencies,p=s.dSearchStr;if(0===m.length)return u.a.createElement(V.a,null,u.a.createElement(q.a,{colSpan:5},u.a.createElement("div",{className:n.noDataPlaceholder},u.a.createElement(we.a,{icon:te.bb,mainMessage:u.a.createElement(v.a,{defaults:a('There are <bold>no expression or object reference depedencies</bold> to model <bold>"%s"</bold>.').sprintf(r.name),components:{bold:u.a.createElement("strong",null)}}),message:u.a.createElement("span",{style:{fontSize:i.typography.caption.fontSize}},u.a.createElement(v.a,{defaults:a("Explore <link1>Managing dependencies</link1> guide"),components:{link1:u.a.createElement($.a,{href:"https://altogic.com/docs/help-guides/data-modeling/dependencies",target:"_blank"})}})),smallIcon:!1,action:null}))));var g=this.getProcessedDependencies();return 0===g.length?u.a.createElement(V.a,null,u.a.createElement(q.a,{colSpan:5},u.a.createElement("div",{className:n.noDataPlaceholder},u.a.createElement(we.a,{icon:te.Ab,mainMessage:a("No items matching search and/or filter criteria"),message:a("Didn't find what you're looking for? Some dependencies may be hidden because of the search filter you've entered."),smallIcon:!0,action:a("Reset filter"),actionIcon:te.xd,callBack:function(){e.setState({dSearchStr:""})},searchResult:!0})))):g.map((function(t,s){return u.a.createElement(V.a,{key:t.key+s},u.a.createElement(J.a,{mdDown:!0},u.a.createElement(q.a,null,u.a.createElement($.a,{href:"#",component:K.a,to:"/users/".concat(l._id,"/apps/").concat(o._id,"/snaps/").concat(c._id,"/models/").concat(t.model._id)},u.a.createElement(y.a,{highlightClassName:n.highlight,searchWords:[p],autoEscape:!0,textToHighlight:t.fullPath})))),u.a.createElement(q.a,null,u.a.createElement("div",null,u.a.createElement($.a,{href:"#",component:K.a,to:"/users/".concat(l._id,"/apps/").concat(o._id,"/snaps/").concat(c._id,"/models/").concat(t.model._id,"/fields/").concat(t.field._id)},u.a.createElement(y.a,{highlightClassName:n.highlight,searchWords:[p],autoEscape:!0,textToHighlight:"xs"===d||"sm"===d||"md"===d?t.fullPath+" \xbb "+t.field.name:t.field.name}))),u.a.createElement("div",{className:Object(h.default)(n.caption,n.disabled,n.italic)},u.a.createElement(Q.a,{icon:Object(Se.d)(t.field),fixedWidth:!0,style:{marginRight:i.spacing(.5)}}),Object(Se.c)(a,t.field)),"xs"===d&&u.a.createElement("div",{className:n.dependentExpHolder},u.a.createElement("div",{className:n.dependentExpHeader},"exp"===t.type?t.expType:a("Object reference"),":"),u.a.createElement("code",{className:n.dependentExp},u.a.createElement(y.a,{highlightClassName:n.highlight,searchWords:[r.name],autoEscape:!0,textToHighlight:"exp"===t.type?t.expStrExt:t.refFullPath})))),u.a.createElement(J.a,{lgDown:!0},u.a.createElement(q.a,null,"exp"===t.type?t.expType:a("Object reference"))),u.a.createElement(J.a,{xsDown:!0},u.a.createElement(q.a,null,u.a.createElement("div",{className:n.dependentExpHolder},("xs"===d||"sm"===d||"md"===d||"lg"===d)&&u.a.createElement("div",{className:n.dependentExpHeader},"exp"===t.type?u.a.createElement(u.a.Fragment,null,u.a.createElement(Q.a,{icon:te.Ib,style:{marginRight:i.spacing(.5)}}),t.expType,":"):u.a.createElement(u.a.Fragment,null,u.a.createElement(Q.a,{icon:te.ic,style:{marginRight:i.spacing(.5)}}),a("Object reference"),":")),u.a.createElement("code",{className:n.dependentExp},u.a.createElement(y.a,{highlightClassName:n.highlight,searchWords:[r.name],autoEscape:!0,textToHighlight:"exp"===t.type?t.expStrExt:t.refFullPath}))))),u.a.createElement(J.a,{mdDown:!0},u.a.createElement(q.a,{className:n.breakWord},u.a.createElement("div",{style:{display:"flex",alignItems:"center"}},u.a.createElement(pe.a,{user:e.getMember(t.createdBy),size:"small"}),u.a.createElement("div",{style:{marginLeft:i.spacing(1)}},u.a.createElement("div",null,f()(t.createdAt).format("MMM Do, YYYY")),u.a.createElement("div",{style:{fontStyle:"italic",color:i.palette.text.disabled,fontSize:i.typography.caption.fontSize}},f()(t.createdAt).format("hh:mm a")))))))}))}},{key:"getProcessedDependencies",value:function(){var e=this.state,t=e.dependencies,a=e.dSortKey,n=e.dOrder,i=e.dSearchStr,l="asc"===n?1:-1,o=Object(r.a)(t);if(i&&i.length>0){var c=new RegExp(i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");o=o.filter((function(e){return e.fullPath.search(c)>=0||e.field.name.search(c)>=0}))}return"model"===a?o.sort((function(e,t){var a=e.model.name.toLowerCase(),n=t.model.name.toLowerCase();return a<n?-1*l:a>n?1*l:0})):"field"===a?o.sort((function(e,t){var a=e.field.name.toLowerCase(),n=t.field.name.toLowerCase();return a<n?-1*l:a>n?1*l:0})):"type"===a?o.sort((function(e,t){var a=e.expType.toLowerCase(),n=t.expType.toLowerCase();return a<n?-1*l:a>n?1*l:0})):"createdAt"===a?o.sort((function(e,t){return(new Date(e.createdAt)-new Date(t.createdAt))*l})):o}},{key:"getExpString",value:function(e){var t=this.props.models,a=e.expStrInt;if(e.dependencies)for(var n=function(n){var r=e.dependencies[n],i=t.find((function(e){return e.iname===r.modeliName})).fields.find((function(e){return e.iname===r.fieldiName})),l=new RegExp(r.modeliName+".","gi"),o=new RegExp(r.fieldiName,"gi"),c=new RegExp("\xa7","gi");a=a.replace(l,""),a=(a=i?a.replace(o,i.name):a.replace(o,"<error>")).replace(c,"")},r=0;r<e.dependencies.length;r++)n(r);return a}},{key:"getPathArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.props.models;return t.unshift(e),e.parentiname&&this.getPathArray(a.find((function(t){return t.iname===e.parentiname})),t),t}},{key:"renderRightPanel",value:function(){var e=this.props,t=e.app,a=e.model,n=e.activeSnap,r=e.authActionGroup,i=this.state.showRightPanel,l=r(["view-logs"],{app:t});return i&&l.isAuthorized?u.a.createElement(me.a,{snapId:n._id,objectType:this.isSubModel()?"sub-model":"model",object:a,logAuth:"view-logs",commentAuth:"comment-model"}):null}},{key:"addFilter",value:function(e,t){for(var a=this.state.filter,n=!1,r=0;r<a.length;r++){var i=a[r];if(i.name===e){i.items.push(t),n=!0;break}}return n||a.push({name:e,items:[t]}),a}},{key:"removeFilter",value:function(e,t){for(var a=this.state.filter,n=null,r=0;r<a.length;r++){var i=a[r];if(i.name===e){n=i,i.items=i.items.filter((function(e){return e!==t}));break}}return n&&0===n.items.length&&(a=a.filter((function(t){return t.name!==e}))),a}},{key:"getFilterValue",value:function(e,t){for(var a=this.state.filter,n=0;n<a.length;n++){var r=a[n];if(r.name===e)for(var i=0;i<r.items.length;i++){if(r.items[i]===t)return!0}}return!1}},{key:"getFilterCount",value:function(){for(var e=this.state.filter,t=0,a=0;a<e.length;a++){t+=e[a].items.length}return t}},{key:"applyFilters",value:function(e){for(var t=this,a=this.state.filter,n=function(n){var r=a[n];"type"===r.name?e=e.filter((function(e){return t.matchType(r.items,e)})):"required"===r.name?e=e.filter((function(e){return t.matchRequired(r.items,e.required)})):"unique"===r.name?e=e.filter((function(e){return t.matchUnique(r.items,e.unique)})):"readwrite"===r.name?e=e.filter((function(e){return t.matchReadWrite(r.items,e.immutable)})):"persistence"===r.name&&(e=e.filter((function(e){return t.matchPersistence(r.items,e.transient)})))},r=0;r<a.length;r++)n(r);return e}},{key:"matchType",value:function(e,t){for(var a=0;a<e.length;a++){if("id"===e[a]&&"text"===t.type&&"system"===t.creator)return!0;if("text"===e[a]&&"text"===t.type&&"system"===t.creator)return!1;if("refobject"===e[a]&&"object"===t.type&&"reference"===t.object.type)return!0;if("refobject"===e[a]&&"object"===t.type&&"child"===t.object.type)return!1;if("object"===e[a]&&"object"===t.type&&"reference"===t.object.type)return!1;if(e[a]===t.type)return!0}return!1}},{key:"matchRequired",value:function(e,t){for(var a=0;a<e.length;a++){if("mandatory"===e[a]&&t)return!0;if("optional"===e[a]&&!t)return!0}return!1}},{key:"matchUnique",value:function(e,t){for(var a=0;a<e.length;a++){if("unique"===e[a]&&t)return!0;if("not-unique"===e[a]&&!t)return!0}return!1}},{key:"matchReadWrite",value:function(e,t){for(var a=0;a<e.length;a++){if("readonly"===e[a]&&t)return!0;if("readwrite"===e[a]&&!t)return!0}return!1}},{key:"matchPersistence",value:function(e,t){for(var a=0;a<e.length;a++){if("transient"===e[a]&&t)return!0;if("permanent"===e[a]&&!t)return!0}return!1}},{key:"getProcessedFields",value:function(){for(var e=this.props.model,t=this.state,a=t.sortKey,n=t.order,r=t.searchStr,i="asc"===n?1:-1,l=e.fields.sort((function(e,t){return e.order-t.order})),o=0;o<l.length;o++){l[o].seqNum=o+1}if(l=l.filter((function(e){return!e.hidden})),r&&r.length>0){var c=new RegExp(r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");l=l.filter((function(e){return e.name.search(c)>=0}))}return l=this.applyFilters(l),"sequence"===a?l.sort((function(e,t){var a=e.seqNum,n=t.seqNum;return a<n?-1*i:a>n?1*i:0})):"name"===a?l.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1*i:a>n?1*i:0})):"type"===a?l.sort((function(e,t){var a=e.type.toLowerCase(),n=t.type.toLowerCase();return"text"===e.type&&"system"===e.creator&&(a="identifier"),"text"===t.type&&"system"===t.creator&&(n="identifier"),"object"===e.type&&"reference"===e.object.type&&(a="object reference"),"object"===t.type&&"reference"===t.object.type&&(n="object reference"),a<n?-1*i:a>n?1*i:0})):"mandatory"===a?l.sort((function(e,t){var a=e.required?1:0,n=t.required?1:0;return a<n?-1*i:a>n?1*i:0})):"unique"===a?l.sort((function(e,t){var a=e.unique?1:0,n=t.unique?1:0;return a<n?-1*i:a>n?1*i:0})):"readonly"===a?l.sort((function(e,t){var a=e.immutable?0:1,n=t.immutable?0:1;return a<n?-1*i:a>n?1*i:0})):"permanent"===a?l.sort((function(e,t){var a=e.transient?0:1,n=t.transient?0:1;return a<n?-1*i:a>n?1*i:0})):"createdAt"===a?l.sort((function(e,t){return(new Date(e.createdAt)-new Date(t.createdAt))*i})):"updatedAt"===a?l.sort((function(e,t){return((e.updatedAt&&e.updatedBy?new Date(e.updatedAt):new Date)-(t.updatedAt&&t.updatedBy?new Date(t.updatedAt):new Date))*i})):void 0}},{key:"getMember",value:function(e){var t=this.props,a=t.t,n=t.team,r=Object(Ce.e)(e);if(r)return r;for(var i=0;i<n.length;i++){var l=n[i];if(l.userId._id===e)return l.userId}return{_id:e,profile:{userName:a("Former-member"),email:e,firstName:null,lastName:null,imgUrl:null}}}},{key:"isSubModel",value:function(){return"model"!==this.props.model.type}},{key:"isSubModelField",value:function(e){return"object"===e.type||"object-list"===e.type}},{key:"getFieldSubModel",value:function(e){var t=this.props.models,a=null;return"object"===e.type?a=e.object.iname:"object-list"===e.type&&(a=e.objectList.iname),t.find((function(e){return e.iname===a}))}},{key:"getModelIcon",value:function(){var e=this.props.model;return"model"===e.type?te.jd:"sub-model-object"===e.type?te.b:"sub-model-list"===e.type?te.c:null}}]),a}(u.a.PureComponent);function Ae(e,t){return e&&t&&e.parentiname?t.find((function(t){return t.iname===e.parentiname})):null}function Fe(e,t){var a=Ae(e,t);if(a)for(var n=0;n<a.fields.length;n++){var r=a.fields[n];if("object"===r.type&&r.object.iname===e.iname)return r;if("object-list"===r.type&&r.objectList.iname===e.iname)return r}return null}t.default=Object(E.b)((function(e,t){var a=Fe(e.model,e.models),n=Ae(e.model,e.models);return{user:e.user,team:e.team,app:e.app,activeSnap:e.activeSnap,models:e.models,model:e.models&&e.models.length>0?e.models.find((function(e){return e._id===t.match.params.modelId})):null,fieldModel:n,field:a,initialValues:{groupId:e.model?e.model.groupId:null,label:e.model?e.model.label:null,description:e.model?e.model.description:null,timestamps:e.model?e.model.timestamps:null,omitted:!!a&&a.omitted,required:!!a&&a.required,immutable:!!a&&a.immutable},formValues:Object(M.a)("editModel")(e)}}),{authAction:ke.a,authActionGroup:ke.b,getAppAction:ve.fc,getAppTeamAction:ve.pc,getSnapshotAction:ve.wd,setActiveSnapshotAction:ve.Je,getModelsAction:ve.ad,getModelAction:ve.Yc,refreshModelAction:ve.de,updateModelAction:ve.yf,enableModelTimestampsAction:ve.cc,disableModelTimestampsAction:ve.Wb,deleteModelAction:ve.zb,deleteFieldAction:ve.ub,deleteFieldsAction:ve.wb,updateMultipleFieldOrderAction:ve.Af,updateFieldAction:ve.wf,getDependentsToModelsAction:ve.Ac,addModelToFavorites:ve.k,removeModelFromFavorites:ve.le})(Object(A.a)({form:"editModel",enableReinitialize:!0,destroyOnUnmount:!1})(Object(w.a)()(Object(x.a)(ne.a,{withTheme:!0})(Object(k.a)()(Me)))))}}]);