(this["webpackJsonpui-designer"]=this["webpackJsonpui-designer"]||[]).push([[25],{399:function(e,t,a){"use strict";var n=a(122);t.a=function(e){return{container:{overflowY:"auto",overflowX:"hidden",flexGrow:1,display:"flex",flexDirection:"column",padding:e.spacing(0,1)},containerNoScroll:{overflowY:"hidden",overflowX:"hidden",flexGrow:1,display:"flex",flexDirection:"column",padding:e.spacing(0,1)},content:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",marginTop:e.spacing(2),marginRight:e.spacing(0),marginLeft:e.spacing(0),marginBottom:e.spacing(2),overflowY:"hidden",overflowX:"hidden"},contentPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},noDataPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",marginTop:e.spacing(5)},headBar:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",marginTop:e.spacing(0),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flexShrink:0},headBarToolBar:{display:"flex",alignItems:"center",fontSize:e.typography.body2.fontSize,minHeight:"40px"},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1),width:180},closeIcon:{color:e.palette.text.disabled,width:"16px",height:"16px","&:hover":{color:e.palette.text.primary,cursor:"pointer"}},menuButton:{padding:e.spacing(.5),marginRight:e.spacing(.5),color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},menuButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},noScroll:{overflowY:"hidden",overflowX:"hidden"},scrollY:{overflowY:"auto",overflowX:"hidden"},toolbarDivider:{height:22,marginTop:e.spacing(.5),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),marginLeft:e.spacing(1)},flexCenter:{display:"flex",flexDirection:"row",alignItems:"center"},flexRow:{display:"flex",flexDirection:"row",alignItems:"flex-start"},flexStack:{display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap"},justifyCenter:{justifyContent:"center"},flexGrow:{flexGrow:1},borderFocused:{borderColor:e.palette.primary.light},block:{display:"block"},mlhalf:{marginLeft:e.spacing(.5)},mrhalf:{marginRight:e.spacing(.5)},ml1:{marginLeft:e.spacing(1)},ml2:{marginLeft:e.spacing(2)},mr1:{marginRight:e.spacing(1)},mr2:{marginRight:e.spacing(2)},mthalf:{marginTop:e.spacing(.5)},mt1:{marginTop:e.spacing(1)},mt2:{marginTop:e.spacing(2)},mt3:{marginTop:e.spacing(2)},mb1:{marginBottom:e.spacing(1)},mb2:{marginBottom:e.spacing(2)},padding3:{padding:e.spacing(3)},padding2:{padding:e.spacing(2)},padding1:{padding:e.spacing(1)},pr2:{paddingRight:e.spacing(2)},pl2:{paddingLeft:e.spacing(2)},pt2:{paddingTop:e.spacing(2)},pb2:{paddingBottom:e.spacing(2)},bgcolor:{backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3},body1:{fontSize:e.typography.body1.fontSize},body2:{fontSize:e.typography.body2.fontSize},caption:{fontSize:e.typography.caption.fontSize},disabled:{color:e.palette.text.disabled},success:{color:e.palette.success.main},error:{color:e.palette.error.main},warning:{color:e.palette.warning.main},primary:{color:e.palette.text.primary},secondary:{color:e.palette.text.secondary},secondaryColor:{color:"light"===e.palette.type?"#f50057":"#ff4081"},primaryMain:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},italic:{fontStyle:"italic"},bold:{fontWeight:500},extraBold:{fontWeight:700},showLineBreaks:{whiteSpace:"pre-wrap"},pointer:{cursor:"pointer"},link:{color:e.palette.text.primary,"&:hover":{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},anchor:{cursor:"pointer",color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,"&:hover":{textDecoration:"underline"}},highlight:{backgroundColor:"#ffeb3b"},tabArea:{flexGrow:1,overflowY:"auto",overflowX:"hidden"},tabList:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.divider,marginBottom:e.spacing(2),borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},tabTextWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},tabIcon:{marginRight:e.spacing(1),width:"18px",height:"18px",minWidth:"18px"},tabRoot:{minWidth:0},borderTop:{borderTop:"1px solid",borderTopColor:e.palette.divider},paper:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2},rounded:{borderRadius:e.spacing(1)},roundedStd:{borderRadius:e.shape.borderRadius},border:{border:"1px solid",borderColor:e.palette.divider},selectCount:{marginLeft:e.spacing(0),minWidth:"24px"},tableArea:{flexGrow:1,overflowY:"auto",overflowX:"auto"},table:{"& .ReactVirtualized__Table__headerRow":{borderBottom:"2px solid",borderBottomColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.16)"},"& .ReactVirtualized__Table__Grid":{outline:"none"}},headerCell:{display:"flex",alignItems:"center",boxSizing:"border-box",flex:1,border:0,fontWeight:500},dataCell:{display:"flex",alignItems:"center",boxSizing:"border-box",flex:1,border:0},visible:{overflow:"visible"},borderBottom:{borderBottom:"1px solid",borderBottomColor:e.palette.divider},contextMenuCell:{padding:0},contextMenuButton:{padding:e.spacing(.5),color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},contextMenuIcon:{width:"24px",height:"24px",minWidth:"24px"},contextMenuIcon2:{width:"24px",height:"24px",minWidth:"24px",padding:e.spacing(.75)},tableHeadIcon:{marginRight:e.spacing(.5)},breakWord:{whiteSpace:"normal",wordWrap:"break-word"},folderColor:{color:"#ffd600"},noBorder:{border:0},badge:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,minHeight:"20px",padding:e.spacing(0,.75),fontSize:e.typography.caption.fontSize,minWidth:"20px",alignContent:"center",display:"inline-block",borderRadius:"10px",lineHeight:"20px",textAlign:"center"},badgeGrey:{backgroundColor:"light"===e.palette.type?e.palette.background.layer3:e.palette.background.default,color:e.palette.text.secondary,minHeight:"20px",padding:e.spacing(0,.75),fontSize:e.typography.caption.fontSize,minWidth:"20px",alignContent:"center",display:"inline-block",borderRadius:"10px",lineHeight:"20px",textAlign:"center"},badgeSmall:{backgroundColor:"light"===e.palette.type?e.palette.background.layer3:e.palette.background.default,color:e.palette.text.secondary,minHeight:"16px",padding:e.spacing(0,.5),fontSize:e.typography.caption.fontSize,minWidth:"16px",alignContent:"center",display:"inline-block",borderRadius:"8px",lineHeight:"16px",textAlign:"center"},gridArea:Object(n.a)({flexGrow:1,display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",flexWrap:"wrap",overflowY:"auto",overflowX:"hidden"},e.breakpoints.up("md"),{paddingRight:e.spacing(1)}),gridItemLogo:{position:"absolute",fontSize:60,color:e.palette.background.layer3,bottom:e.spacing(2.5),right:e.spacing(1.5)},gridItemHeader:{padding:e.spacing(1,2),flexShrink:0,fontWeight:500,display:"flex",alignItems:"center",borderBottom:"1px solid",borderBottomColor:e.palette.divider,backgroundColor:e.palette.background.layer2,overflow:"hidden"},gridItemHeaderLink:{cursor:"pointer","&:hover":{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},gridItemContent:{padding:e.spacing(1,2),flexGrow:1,overflowY:"auto",overflowX:"hidden",zIndex:1},gridItemContentLink:{cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover}},gridItemContentEntry:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.5),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},gridItemContentEntryBreakWord:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.5),whiteSpace:"normal",wordWrap:"break-word"},gridItemContentEntryLink:{borderRadius:e.spacing(1),cursor:"pointer","&:hover":{backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover,color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark}},gridItemContentEntryDisabled:{color:e.palette.text.disabled},gridItemFooter:{padding:e.spacing(.5,1.5),flexShrink:0,display:"flex",alignItems:"center"},fullWidth:{width:"100%"},description:{fontSize:e.typography.caption.fontSize,color:e.palette.text.disabled,fontStyle:"italic"},favorite:{marginLeft:e.spacing(.5),color:"#ff8a80",fontSize:"0.6rem",position:"relative",top:"-4px"},chip:{border:"none",height:"24px",display:"inline-flex",outline:0,fontSize:e.typography.caption.fontSize,alignItems:"center",whiteStapce:"nowrap",borderRadius:e.spacing(2),verticalAlign:"middle",justifyContent:"center",backgroundColor:e.palette.divider,padding:e.spacing(0,1),marginRight:e.spacing(.5),marginBottom:e.spacing(.25)},"@keyframes fadeBgColor":{"0%":{backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover},"100%":{backgroundColor:"inherit"}},newEntry:{animation:"$fadeBgColor 6s forwards"},ellipsis:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},thickCellBorder:{borderBottom:"2px solid",borderBottomColor:e.palette.divider},cellBorder:{borderBottom:"1px solid",borderBottomColor:e.palette.divider},overflowHidden:{overflow:"hidden"},getMethod:{backgroundColor:e.palette.info.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},postMethod:{backgroundColor:e.palette.success.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},putMethod:{backgroundColor:e.palette.warning.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},deleteMethod:{backgroundColor:e.palette.error.main,color:e.palette.common.white,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},disabledMethod:{backgroundColor:e.palette.background.layer3,color:e.palette.text.disabled,fontWeight:700,padding:e.spacing(.5),borderRadius:e.shape.borderRadius,minWidth:"65px",textAlign:"center"},getMethodText:{color:e.palette.info.main,fontWeight:700},postMethodText:{color:e.palette.success.main,fontWeight:700},putMethodText:{color:e.palette.warning.main,fontWeight:700},deleteMethodText:{color:e.palette.error.main,fontWeight:700},disabledMethodText:{color:e.palette.error.disabled,fontWeight:700},nodeSystem:{color:e.palette.text.disabled},nodeBasic:{color:e.palette.success.main},nodeAdvanced:{color:e.palette.warning.main},nodeObject:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},formLabel:{color:e.palette.text.primary,fontWeight:500,marginBottom:e.spacing(1),fontSize:e.typography.body2.fontSize,textTransform:"uppercase"}}}},501:function(e,t,a){"use strict";var n=a(11),r=a(12),o=a(13),i=a(14),l=a(5),s=a.n(l),c=a(22),p=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:this.props.noMargin?e.separatorNoTopMargin:e.separator},s.a.createElement("span",{className:e.or},this.props.text))}}]),a}(s.a.PureComponent);t.a=Object(c.a)((function(e){return{separator:{width:"100%",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.divider,position:"relative",marginTop:e.spacing(2),marginBottom:e.spacing(2),textAlign:"center"},separatorNoTopMargin:{width:"100%",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.divider,position:"relative",marginBottom:e.spacing(2),textAlign:"center"},or:{backgroundColor:"light"===e.palette.type?e.palette.background.paper:e.palette.background.layer2,position:"relative",top:"10px",padding:"10px",color:e.palette.text.secondary}}}),{withTheme:!0})(p)},578:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),i=a(11),l=a(12),s=a(13),c=a(14),p=a(5),d=a.n(p),m=a(349),u=a.n(m),h=a(51),g=a(22),f=a(109),v=a(61),b=a(323),y=a(346),E=a.n(y),x=a(796),w=a(805),k=a(799),S=a(806),A=a(800),C=a(298),N=a(778),T=a(80),R=a(71),D=a(337),I=a(807),O=a(811),j=a(810),B=a(904),P=a(808),_=a(809),M=a(561),W=a(589),L=a(671),F=a(381),z=a(745),H=a(82),G=a(328),q=a(81),Y=a(17),V=a(60),U=a(342),K=a(338),X=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).isDefault=function(e){for(var t=n.props,a=t.user,r=t.app,o=0;o<a.apps.length;o++){var i=a.apps[o];if(i.appId===r._id&&i.defaultSnapId===e._id)return!0}return!1},n.onClose=function(){(0,n.props.handleClose)(),n.setState({error:null,snaps:null,sortKey:"name",order:"asc",searchStr:""})},n.sort=function(e){var t=n.state,a=t.sortKey,r=t.order;e===a?n.setState({order:"asc"===r?"desc":"asc"}):n.setState({sortKey:e,order:"asc"})},n.searchSnaps=function(e){n.setState({searchStr:e.target.value&&e.target.value.trim()})},n.openSnap=function(e){var t=n.props,a=t.handleClose,r=t.history,o=t.user,i=t.app,l=t.callback;a(),l?l(e):r.push("/users/".concat(o._id,"/apps/").concat(i._id,"/snaps/").concat(e._id,"/models"))};var r=n.props.user.uiPreferences.defaultSortOrder,o="date",l="desc";return"most-recent"===r?(o="date",l="desc"):"oldest-first"===r?(o="date",l="asc"):"alphabetically-asc"===r?(o="name",l="asc"):(o="name",l="desc"),n.state={error:null,sortKey:o,order:l,searchStr:"",snaps:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,n=e.open,r=e.handleClose,o=e.fullWidth,i=e.maxWidth,l=e.isDeployment,s=e.width,c=this.state.error;return d.a.createElement(x.a,{fullWidth:o,maxWidth:i,fullScreen:"xs"===s,open:n,onClose:function(e,t){if("backdropClick"===t)return!1;r()},"aria-labelledby":"load-snapshot-dialog",classes:{paper:"xs"===s?null:t.dialogPaper}},d.a.createElement(w.a,{id:"load-snapshot-dialog"},d.a.createElement(T.a,{component:"span",variant:"h6"},a(l?"Deploy snapshot":"Open snapshot")),d.a.createElement(N.a,{"aria-label":"close",className:t.closeButton,onClick:this.onClose},d.a.createElement(H.a,{icon:G.x,className:t.closeButtonIcon}))),this.renderSearch(),d.a.createElement(k.a,{classes:{root:t.dialogContentRoot},className:t.dialogContentContainer,style:{flexGrow:"xs"===s?0:1}},c?this.renderError():this.renderContent()),d.a.createElement(A.a,{className:t.dialogActions},d.a.createElement(C.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},a("Cancel"))))}},{key:"renderError",value:function(){var e=this.props,t=e.t,a=e.classes,n=this.state.error;return n?d.a.createElement(S.a,{component:"div",className:a.fillSpace},d.a.createElement(R.a,{mainMessage:t("An error has occured while loading snapshots!"),message:n,bottomMargin:!1})):null}},{key:"renderSearch",value:function(){var e=this,t=this.state.searchStr,a=this.props,n=a.t,r=a.classes,o=a.isDeployment,i=a.isSwitch;return d.a.createElement("div",{className:r.searchBar},d.a.createElement(T.a,{component:"h1",variant:"body2",className:r.marginBottom},d.a.createElement(L.a,{severity:"info"},n(o?"Select a snapshot from table below for deployment":i?"Select a snapshot from table below to replace the current deployed snapshot of the environment":"Select a snapshot from table below to open it in designer."))),d.a.createElement(U.e,{placeholder:n("Search..."),align:"left",onChange:this.searchSnaps,marginLeft:!1,value:t,clearSearch:function(){return e.setState({searchStr:""})}}))}},{key:"renderContent",value:function(){var e=this.props,t=e.t,a=e.classes;return this.state.snaps?this.renderTable():(this.loadSnaps(),d.a.createElement("div",{className:a.fillSpace},d.a.createElement(D.a,{message:t("Loading snapshots..."),bottomMargin:!1})))}},{key:"renderTable",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.width,o=this.state,i=o.sortKey,l=o.order;return d.a.createElement("div",{className:n.tableArea},d.a.createElement(I.a,{stickyHeader:!0,size:"small"},d.a.createElement(P.a,null,d.a.createElement(_.a,null,d.a.createElement(j.a,null,d.a.createElement(B.a,{active:"name"===i,direction:"name"===i?l:"asc",onClick:function(){return e.sort("name")}},d.a.createElement(H.a,{icon:q.ld,className:n.tableHeadIcon}),a("xs"===r?"Snapshot":"Name"))),d.a.createElement(z.a,{xsDown:!0},d.a.createElement(j.a,null,d.a.createElement(B.a,{active:"access"===i,direction:"access"===i?l:"asc",onClick:function(){return e.sort("access")}},d.a.createElement(H.a,{icon:q.nc,className:n.tableHeadIcon}),a("Access")))),d.a.createElement(j.a,null,d.a.createElement(B.a,{active:"date"===i,direction:"date"===i?l:"asc",onClick:function(){return e.sort("date")}},d.a.createElement(H.a,{icon:q.B,className:n.tableHeadIcon}),a("Created at"))))),d.a.createElement(O.a,null,this.renderSnapshots())))}},{key:"renderSnapshots",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=t.theme,o=t.isDeployment,i=this.state.searchStr,l=this.getProcessedSnaps();return 0===this.state.snaps.length?d.a.createElement(_.a,null,d.a.createElement(j.a,{colSpan:3},d.a.createElement(L.a,{severity:"info"},n(o?"Either you don't have any snapshots to deploy or you do not have authorization to view other team member's snapshots.":"Either you don't have any snapshots to work on or you do not have authorization to view other team member's snapshots.")))):0===l.length&&this.state.snaps.length>0?d.a.createElement(_.a,null,d.a.createElement(j.a,{colSpan:3},d.a.createElement("div",{className:a.noDataPlaceholder},d.a.createElement(K.a,{icon:q.Ab,mainMessage:n("No items matching search and/or filter criteria"),message:n("Didn't find what you're looking for? Some snapshots may be hidden because of the search query you've entered."),smallIcon:!0,action:n("Reset filters"),actionIcon:q.xd,callBack:function(){e.setState({searchStr:""})},searchResult:!0}))," ")):l.map((function(t){return d.a.createElement(_.a,{key:t._id,hover:!0,className:a.selectRow,onClick:function(){return e.openSnap(t)}},d.a.createElement(j.a,{component:"th",scope:"row",className:a.noWrap},d.a.createElement("div",null,d.a.createElement(W.a,null,d.a.createElement("span",{className:a.noWrap},d.a.createElement(E.a,{highlightClassName:a.highlight,searchWords:[i],autoEscape:!0,textToHighlight:t.name}))),t.master?d.a.createElement(F.a,{title:n("Master snapshot"),placement:"bottom",enterDelay:Y.a.tooltipEnterDelay,enterNextDelay:Y.a.tooltipEnterNextDelay},d.a.createElement("span",{className:a.sticker},d.a.createElement(H.a,{icon:q.xb}))):null,e.isDefault(t)?d.a.createElement(F.a,{title:n("Default snapshot"),placement:"bottom",enterDelay:Y.a.tooltipEnterDelay,enterNextDelay:Y.a.tooltipEnterNextDelay},d.a.createElement("span",{className:a.sticker},d.a.createElement(H.a,{icon:q.m}))):null),d.a.createElement(z.a,{smUp:!0},d.a.createElement("div",{style:{marginTop:r.spacing(.5)}},d.a.createElement(M.a,{size:"small",label:t.private?d.a.createElement("span",null,d.a.createElement(H.a,{icon:q.ub,className:a.tableHeadIcon}),n("Private")):d.a.createElement("span",null,d.a.createElement(H.a,{icon:q.tb,className:a.tableHeadIcon}),n("Public")),className:t.private?a.private:a.public})))),d.a.createElement(z.a,{xsDown:!0},d.a.createElement(j.a,null,d.a.createElement(M.a,{size:"small",label:t.private?d.a.createElement("span",null,d.a.createElement(H.a,{icon:q.ub,className:a.tableHeadIcon}),n("Private")):d.a.createElement("span",null,d.a.createElement(H.a,{icon:q.tb,className:a.tableHeadIcon}),n("Public")),className:t.private?a.private:a.public}))),d.a.createElement(j.a,null,u()(t.createdAt).format("MMM Do, YYYY hh:mm a")))}))}},{key:"loadSnaps",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.user,n=t.app,o=t.getSnapshotsAction,i=t.match,!a||!n){e.next=6;break}return e.next=4,o(i.params.userId,a.token,n._id);case 4:200!==(l=e.sent).status?this.setState({error:l.data.details,snaps:null}):this.setState({error:null,snaps:l.data});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProcessedSnaps",value:function(){var e=this.state,t=e.snaps,a=e.sortKey,n=e.order,r=e.searchStr,o=this.props.filteredSnaps,i="asc"===n?1:-1,l=t;if(o&&o.length>0&&(l=l.filter((function(e){return!o.includes(e._id)}))),r&&r.length>0){var s=new RegExp(r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");l=t.filter((function(e){return e.name.search(s)>=0}))}return"name"===a?l.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1*i:a>n?1*i:0})):"access"===a?l.sort((function(e,t){var a=e.private?1:0;return((t.private?1:0)-a)*i})):l.sort((function(e,t){return(new Date(e.createdAt)-new Date(t.createdAt))*i}))}}]),a}(d.a.PureComponent);t.a=Object(v.g)(Object(h.b)((function(e){return{user:e.user}}),{getSnapshotsAction:V.zd})(Object(b.a)()(Object(g.a)((function(e){return{dialogPaper:{minHeight:"600px",maxHeight:"600px"},dialogContentContainer:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",paddingTop:0,marginRight:"2px"},fillSpace:{flexGrow:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},fillSpaceTop:{flexGrow:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},dialogContentRoot:{"&:first-child":{paddingTop:8}},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},searchBar:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},marginBottom:{marginBottom:e.spacing(1)},tableHeadIcon:{marginRight:e.spacing(.5)},selectRow:{cursor:"pointer",borderBottom:0},noWrap:{whiteSpace:"normal",wordWrap:"break-word"},private:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,color:e.palette.error.main,cursor:"pointer"},public:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,color:e.palette.success.main,cursor:"pointer"},master:{height:"20px",fontSize:"0.6rem",cursor:"pointer"},highlight:{backgroundColor:"#ffeb3b"},tableArea:{flexGrow:1,overflowY:"auto",overflowX:"auto",paddingRight:e.spacing(1)},sticker:{marginLeft:e.spacing(.5),fontSize:"0.6rem",padding:e.spacing(.5),borderRadius:e.shape.borderRadius,color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,backgroundColor:e.palette.background.layer2}}}),{withTheme:!0})(Object(f.a)()(X)))))},579:function(e,t,a){"use strict";var n=a(11),r=a(12),o=a(13),i=a(14),l=a(5),s=a.n(l),c=a(22),p=a(109),d=a(887),m=a(671),u=a(17);function h(e){return s.a.createElement(m.a,Object.assign({elevation:4,variant:"standard"},e))}var g=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.type,n=e.autoHideDuration,r=e.open,o=e.onClose,i=e.anchorOrigin,l=e.children;return s.a.createElement(d.a,{open:r,autoHideDuration:n,onClose:o,anchorOrigin:i,className:t.snack},s.a.createElement(h,{onClose:o,severity:a},l))}}]),a}(s.a.PureComponent);g.defaultProps={autoHideDuration:u.a.snackBarAutoHideDuration,type:"success",anchorOrigin:{vertical:"top",horizontal:"center"}},t.a=Object(c.a)((function(e){return{snack:{top:e.spacing(.5)}}}),{withTheme:!0})(Object(p.a)()(g))},613:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),i=a(11),l=a(12),s=a(13),c=a(14),p=a(5),d=a.n(p),m=a(51),u=a(22),h=a(511),g=a(109),f=a(61),v=a(323),b=a(796),y=a(805),E=a(799),x=a(806),w=a(800),k=a(298),S=a(778),A=a(80),C=a(671),N=a(498),T=a(555),R=a(554),D=a(299),I=a(82),O=a(328),j=a(81),B=a(330),P=a(60),_=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClose=function(){var e=n.props,t=e.reset;(0,e.handleClose)(),t()},n.onSubmit=function(e){var t=n.props,a=t.reset,i=t.handleClose,l=t.deleteAppAction,s=t.user,c=t.app,p=t.match,d=t.callback;return new Promise(function(){var e=Object(o.a)(r.a.mark((function e(t,n){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(p.params.userId,s.token,c._id);case 2:200===(o=e.sent).status?(t(),i(),a(),d&&d()):n(new N.a(o.reduxForm));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.onValueChange=function(e,t){n.props.app.name===t?n.setState({match:!0}):n.setState({match:!1})},n.state={match:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,n=e.theme,r=e.open,o=e.handleClose,i=e.fullWidth,l=e.maxWidth,s=e.handleSubmit,c=e.submitting,p=e.app,m=e.error,u=e.width,g=this.state.match;return p?d.a.createElement(b.a,{fullWidth:i,maxWidth:l,fullScreen:"xs"===u,open:r,onClose:function(e,t){if("backdropClick"===t)return!1;o()},"aria-labelledby":"delete-app-dialog"},d.a.createElement(y.a,{id:"delete-app-dialog",className:t.deleteHeader},d.a.createElement(A.a,{component:"span",variant:"h6",style:{color:n.palette.common.white}},a("Delete app")),d.a.createElement(S.a,{"aria-label":"close",className:t.closeButton,onClick:this.onClose},d.a.createElement(I.a,{icon:O.x,className:t.closeButtonIcon}))),d.a.createElement("form",{className:t.form,onSubmit:s(this.onSubmit),noValidate:!0},d.a.createElement(E.a,{classes:{root:t.dialogContentRoot}},m&&d.a.createElement(x.a,{component:"div"},d.a.createElement(C.a,{severity:"error"}," ",this.renderError()," ")),d.a.createElement("div",{className:t.container},d.a.createElement(I.a,{icon:j.pb,className:t.icon}),d.a.createElement("div",{className:t.message},d.a.createElement(h.a,{defaults:"Deleting app '{{appName}}' will <bold>delete all application data permanently (excluding private repository and marketplace templates) and stop all application services</bold>. Application data includes all design and deployment data, including snapshot, model, service, environment, setting and application specific databases and resources.",values:{appName:p.name},components:{bold:d.a.createElement("strong",null)}}))),d.a.createElement("div",{className:t.confirmText},d.a.createElement(h.a,{defaults:"Confirm app delete by typing <code>{{code}}</code> below.",values:{code:p.name},components:{code:d.a.createElement("strong",{className:t.red})}})),d.a.createElement(T.a,{color:"dark"===n.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,name:"confirm",label:"Confirmation",placeholder:p.name,id:"confirm",component:B.g,autoComplete:"off",onChange:this.onValueChange})),d.a.createElement(w.a,{className:t.dialogActions},d.a.createElement(k.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",disabled:c||!g},c&&d.a.createElement(D.a,{size:20,className:t.progress}),a("Delete")),d.a.createElement(k.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},a("Cancel"))))):null}},{key:"renderError",value:function(){var e=this.props.error;return e?d.a.createElement(A.a,{component:"div",variant:"body2",color:"error"},e):null}}]),a}(d.a.PureComponent);t.a=Object(f.g)(Object(m.b)((function(e){return{user:e.user}}),{deleteAppAction:P.kb})(Object(R.a)({form:"deleteApp",enableReinitialize:!0})(Object(v.a)()(Object(u.a)((function(e){return{progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.common.white},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},red:{color:e.palette.error.main},container:{display:"flex",flexDirection:"row",alignItems:"flext-start",marginBottom:e.spacing(4)},icon:{fontSize:"3rem",color:e.palette.error.main,marginRight:e.spacing(2)},message:{flexGrow:1},dialogContentRoot:{"&:first-child":{paddingTop:8}},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},confirmText:{marginBottom:e.spacing(1)},deleteHeader:{backgroundColor:e.palette.error.main,color:e.palette.common.white}}}),{withTheme:!0})(Object(g.a)()(_))))))},614:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),i=a(11),l=a(12),s=a(13),c=a(14),p=a(5),d=a.n(p),m=a(51),u=a(22),h=a(511),g=a(109),f=a(61),v=a(323),b=a(796),y=a(805),E=a(799),x=a(800),w=a(298),k=a(778),S=a(80),A=a(589),C=a(790),N=a(671),T=a(299),R=a(634),D=a(555),I=a(498),O=a(621),j=a(888),B=a(554),P=a(421),_=a.n(P),M=a(505),W=a.n(M),L=a(82),F=a(328),z=a(81),H=a(330),G=a(60),q=a(110),Y=a(17),V=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderSingleInvites=function(e){var t=e.fields,a=e.classes,n=e.roles,r=e.t,o=e.theme,i=e.show,l=e.auth,s=t.map((function(e,i){return d.a.createElement(d.a.Fragment,{key:i},d.a.createElement(R.a,{item:!0,xs:7,style:{marginBottom:o.spacing(1)}},d.a.createElement(D.a,{color:"dark"===o.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"".concat(e,".email"),label:r("Email"),component:H.g,autoComplete:"off"})),d.a.createElement(R.a,{item:!0,xs:4,className:a.roleCell,style:{marginBottom:o.spacing(1)}},d.a.createElement(D.a,{color:"dark"===o.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"".concat(e,".roleId"),label:r("Role"),component:H.f,disabled:1!==l},n.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})).map((function(e,t){return"owner"!==e.type?d.a.createElement(C.a,{key:t,value:e._id,className:a.body2},e.name):null})))),d.a.createElement(R.a,{item:!0,xs:1,className:a.removeButtonCell},t.length>1&&d.a.createElement(k.a,{"aria-label":"remove-invite",className:a.removeInviteButton,onClick:function(){return t.remove(i)}},d.a.createElement(L.a,{icon:F.x,className:a.removeInviteButtonIcon}))))}));return d.a.createElement(d.a.Fragment,null,s,d.a.createElement(R.a,{item:!0,xs:12,className:a.lastRow},d.a.createElement(A.a,{href:"#",onClick:t.length>=Y.a.maxInvitations?null:function(){return t.push({email:null,roleId:n.find((function(e){return"member"===e.type}))._id})},className:t.length>=Y.a.maxInvitations?a.disabledLink:null},d.a.createElement(L.a,{icon:z.Dc})," ",r("Add another one"))," or ",d.a.createElement(A.a,{href:"#",onClick:function(){return i("multi")}},r("add many at once"))))},n.onClose=function(){var e=n.props,t=e.reset;(0,e.handleClose)(),t(),n.setState({renderType:"single"})},n.onSubmit=function(e){var t=n.props,a=t.t,i=t.reset,l=t.handleClose,s=t.user,c=t.app,p=t.invitePeopleAction,d=t.change,m=n.state.renderType;return"single"===m?new Promise(function(){var t=Object(o.a)(r.a.mark((function t(a,o){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(s._id,s.token,c._id,{invites:e.invites.map((function(e){var t=n.getAppRole(e.roleId);return{email:e.email,roleId:e.roleId,roleName:t.name,roleType:t.type}}))});case 2:200===(i=t.sent).status?(a(),n.setState({renderType:"invitesSent"})):o(new I.a(i.reduxForm));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()):"multi"===m?new Promise(function(){var t=Object(o.a)(r.a.mark((function t(o,i){var l,s,p,m,u,h,g,f,v;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(l=c.roles.find((function(e){return"member"===e.type}))._id,s=e.emailList.replace(/\n/g,",").split(","),p=!1,m=[],u=0;u<s.length;u++)h=s[u].trim(),_()(h)&&!1===n.alreadyAdded(m,h)&&(m.length<Y.a.maxInvitations?m.push({email:W()(h,{gmail_remove_dots:!1}),roleId:n.getRole(h,l)}):s.length>m.length&&(p=!0));for(g="",f=0;f<m.length;f++)(v=m[f]).email&&(g=g+v.email+", ");if(!(0===m.length&&s.length>0)){t.next=11;break}return i(new I.a({_error:a("We couldn\u2019t find any valid email addresses below. Please try again.")})),n.setState({warn:!1}),t.abrupt("return");case 11:d("invites",m),d("emailList",g),n.setState({renderType:"single"}),p?(i(new I.a({_error:a("Only the first %s valid email addresses are processed.").sprintf(Y.a.maxInvitations)})),n.setState({warn:!0})):(n.setState({warn:!1}),o());case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()):(l(),i(),void n.setState({renderType:"single"}))},n.getAppRole=function(e){for(var t=n.props.app,a=0;a<t.roles.length;a++){var r=t.roles[a];if(r._id===e)return r}},n.show=function(e){var t=n.props,a=t.formValues,r=t.change;if("multi"===e){for(var o="",i=0;i<a.invites.length;i++){var l=a.invites[i];l.email&&(o=o+l.email+", ")}r("emailList",o)}n.setState({renderType:e})},n.state={renderType:"single",warn:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=t.open,o=t.handleClose,i=t.fullWidth,l=t.maxWidth,s=t.handleSubmit,c=t.submitting,p=t.error,m=t.user,u=t.app,g=t.history,f=t.reset,v=t.width,A=this.state,C=A.renderType,R=A.warn;return d.a.createElement(b.a,{fullWidth:i,maxWidth:l,fullScreen:"xs"===v,open:r,onClose:function(e,t){if("backdropClick"===t)return!1;o()},"aria-labelledby":"invite-people-dialog",classes:{paper:"xs"===v?null:a.dialogPaper}},d.a.createElement(y.a,{id:"invite-people-dialog"},d.a.createElement(S.a,{component:"span",variant:"h6"},n("Invite people")),d.a.createElement(k.a,{"aria-label":"close",className:a.closeButton,onClick:this.onClose},d.a.createElement(L.a,{icon:F.x,className:a.closeButtonIcon}))),d.a.createElement("form",{onSubmit:s(this.onSubmit),noValidate:!0,className:a.dialogForm,style:{flexGrow:"xs"===v?0:1}},d.a.createElement(E.a,{classes:{root:a.dialogContentRoot},className:a.dialogContent},"invitesSent"!==C&&d.a.createElement(N.a,{severity:"info"},d.a.createElement(S.a,{component:"span",variant:"body2"},d.a.createElement(h.a,{defaults:"You can invite team members <bold>one by one</bold> or <bold>add many people at once</bold> with a specific role.",components:{bold:d.a.createElement("strong",null)}}))),p&&!R&&d.a.createElement(N.a,{severity:"error",className:a.error},this.renderError()),p&&R&&d.a.createElement(N.a,{severity:"warning",className:a.error},this.renderError()),"single"===C?this.renderSingle():"multi"===C?this.renderMulti():this.renderInvitesSent()),d.a.createElement(x.a,{className:a.dialogActions},"xs"!==v&&d.a.createElement("div",{className:a.pastInvites,onClick:function(){return g.push("/users/".concat(m._id,"/apps/").concat(u._id,"/settings/invites"))}},d.a.createElement(L.a,{icon:z.nb,className:a.inviteIcon}),n("See past invites")),"multi"===C&&d.a.createElement(w.a,{variant:"contained",disableElevation:!0,onClick:function(){return e.show("single")}},n("Back")),"invitesSent"===C&&d.a.createElement(w.a,{variant:"contained",disableElevation:!0,onClick:function(){f(),e.show("single")}},n("Invite more people")),d.a.createElement(w.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",disabled:c},c&&"single"===C&&d.a.createElement(T.a,{size:20,className:a.progress}),n("single"===C?"Send invitations":"multi"===C?"Add invitees":"Done")),"invitesSent"!==C&&d.a.createElement(w.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},n("Cancel")))))}},{key:"renderError",value:function(){var e=this.props.error;return e?d.a.createElement(S.a,{component:"div",variant:"body2"},e):null}},{key:"renderSingle",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.app,r=e.authAction,o=e.theme,i=r("assign-role",{app:n});return d.a.createElement(R.a,{container:!0,spacing:0,className:a.container},d.a.createElement(O.a,{name:"invites",component:this.renderSingleInvites,props:{classes:a,t:t,roles:n.roles,show:this.show,auth:i,theme:o}}))}},{key:"renderMulti",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.theme;return d.a.createElement(R.a,{container:!0,spacing:0,className:a.container},d.a.createElement(R.a,{item:!0,xs:12},d.a.createElement(S.a,{variant:"subtitle2"},t("Enter multiple email addresses"))),d.a.createElement(R.a,{item:!0,xs:12},d.a.createElement(D.a,{variant:"filled",color:"dark"===n.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,name:"emailList",component:H.g,autoComplete:"off",multiline:!0,placeholder:t("Comma or new line separated email addresses"),rows:10,helperText:t("Copy and paste a list of emails (max 100 per batch). Please separate multiple email addresses with commas or put each email address to a new line.")})))}},{key:"renderInvitesSent",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.formValues,r=e.app;return d.a.createElement(d.a.Fragment,null,d.a.createElement(N.a,{severity:"info"},d.a.createElement(S.a,{component:"span",variant:"body2"},d.a.createElement(h.a,{defaults:1===n.invites.length?t("You've invited <bold>1 member</bold> to <bold>%s</bold> app.").sprintf(r.name):t("You've invited <bold>%s members</bold> to <bold>%s</bold> app.").sprintf(n.invites.length,r.name),components:{bold:d.a.createElement("strong",null)}}))),d.a.createElement(R.a,{container:!0,spacing:0,className:a.container},d.a.createElement(R.a,{item:!0,xs:8,className:a.resultCell},d.a.createElement(S.a,{variant:"subtitle2"},t("Email"))),d.a.createElement(R.a,{item:!0,xs:4,className:a.resultCell},d.a.createElement(S.a,{variant:"subtitle2"},t("Role"))),this.renderEachInvite()))}},{key:"renderEachInvite",value:function(){var e=this,t=this.props,a=t.classes;return t.formValues.invites.map((function(t){var n=t.email,r=e.getRoleName(t.roleId);return d.a.createElement(d.a.Fragment,{key:n},d.a.createElement(R.a,{item:!0,xs:8,className:a.resultCell},d.a.createElement(S.a,{variant:"body2"},n)),d.a.createElement(R.a,{item:!0,xs:4,className:a.resultCell},d.a.createElement(S.a,{variant:"body2"},r)))}))}},{key:"alreadyAdded",value:function(e,t){for(var a=0;a<e.length;a++){if(e[a].email===t)return!0}return!1}},{key:"getRole",value:function(e,t){for(var a=this.props.formValues,n=0;n<a.invites.length;n++){var r=a.invites[n];if(r.email&&e===W()(r.email,{gmail_remove_dots:!1}))return r.roleId}return t}},{key:"getRoleName",value:function(e){for(var t=this.props.app,a=0;a<t.roles.length;a++){var n=t.roles[a];if(n._id===e)return n.name}return null}}]),a}(d.a.PureComponent);V.defaultProps={app:null},t.a=Object(f.g)(Object(m.b)((function(e,t){var a=t.app?t.app:e.app;return{user:e.user,app:a,initialValues:{invites:[{email:null,roleId:a.roles.find((function(e){return"member"===e.type}))._id}],emailList:null,emailListRoleId:a.roles.find((function(e){return"member"===e.type}))._id},formValues:Object(j.a)("inviteMembers")(e)}}),{authAction:q.a,invitePeopleAction:G.Md})(Object(B.a)({form:"inviteMembers",enableReinitialize:!0})(Object(v.a)()(Object(u.a)((function(e){return{dialogPaper:{minHeight:"540px",maxHeight:"540px"},dialogForm:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",overflowY:"auto",overflowX:"hidden"},dialogContent:{flexGrow:1,paddingRight:e.spacing(2),marginRight:e.spacing(1),overflowY:"auto",overflowX:"hidden"},dialogContentRoot:{"&:first-child":{paddingTop:8}},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},container:{marginTop:e.spacing(2)},error:{marginTop:e.spacing(1)},pastInvites:{flexGrow:1,paddingLeft:e.spacing(1),"&:hover":{textDecoration:"underline",cursor:"pointer"}},inviteIcon:{marginRight:e.spacing(.5)},roleCell:{paddingLeft:e.spacing(1)},resultCell:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.grey[200]},removeButtonCell:{display:"flex",alignItems:"flex-start"},removeInviteButton:{padding:e.spacing(.5),marginLeft:e.spacing(1),position:"relative",top:e.spacing(2),color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},removeInviteButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},lastRow:{marginTop:e.spacing(2)},body2:{fontSize:e.typography.body2.fontSize},disabledLink:{color:e.palette.text.disabled,cursor:"default",textDecoration:"none","&:hover":{cursor:"default",textDecoration:"none"}}}}),{withTheme:!0})(Object(g.a)()(V))))))},717:function(e,t,a){e.exports=a.p+"static/media/cabg.111b3a7d.png"},875:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(3),i=a(4),l=a(11),s=a(12),c=a(13),p=a(14),d=a(5),m=a.n(d),u=a(18),h=a(346),g=a.n(h),f=a(51),v=a(22),b=a(511),y=a(109),E=a(506),x=a(323),w=a(634),k=a(120),S=a(80),A=a(119),C=a(903),N=a(298),T=a(778),R=a(804),D=a(499),I=a(299),O=a(798),j=a(745),B=a(636),P=a(747),_=a(589),M=a(877),W=a(794),L=a(671),F=a(561),z=a(82),H=a(81),G=a(328),q=a(359),Y=a(326),V=a(399),U=function(e){return Object(i.a)(Object(i.a)({},Object(V.a)(e)),{},{noDataPlaceholder2:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:e.spacing(10)},appsContainer:{flexGrow:1,marginTop:e.spacing(4),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),overflowY:"auto",overflowX:"hidden"},grid:{display:"flex"},cardHolder:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap"},card:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap",borderWidth:"1px",borderStyle:"solid",borderColor:e.palette.divider,overflow:"hidden",backgroundColor:e.palette.background.layer1},cardHeader:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),paddingTop:e.spacing(1),paddingBottom:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"center"},cardHeaderTitle:{fontWeight:500,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1},cardContent:{flexGrow:1,padding:e.spacing(2,2,2,2),backgroundColor:e.palette.background.layer2,fontSize:e.typography.body2.fontSize,display:"flex",flexDirection:"row",justifyContent:"flex-start",zIndex:100,cursor:"default","&:hover":{opacity:.01}},cardFooter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(.5),paddingTop:e.spacing(.5),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},cardFooterIcon:{width:"16px",height:"16px",minWidth:"16px"},actionArea:{position:"absolute",opacity:1,left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"25%",bottom:"20%",width:"300px",fontWeight:500,fontSize:e.typography.body1.fontSize,whiteSpace:"nowrap",display:"flex"},fadeContent:{opacity:.01},shortDesc:{flexGrow:1,color:e.palette.text.secondary,minHeight:e.spacing(10),wordBreak:"break-word",whiteSpace:"normal",wordWrap:"break-word",fontSize:e.typography.caption.fontSize},marketAppLogo:{width:"96px",height:"96px"},marketAppLogoSmall:{width:"48px",height:"48px"},star:{color:"#ffaf00"},centeredContainer:{flexGrow:1,display:"flex"},greyButton:{color:e.palette.grey[400]},borderLeft:{borderLeftWidth:"1px",borderLeftStyle:"solid",borderLeftColor:e.palette.divider}})},K=a(43),X=a(559),J=a(790),Q=a(17),$=a(351),Z=a(392),ee=a(368),te=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).clearSearchStr=function(){n.setState({searchStr:""})},n.handleSearch=function(e){var t=n.props.callback,a=n.state.searchTimerId;a&&clearTimeout(a),n.setState({searchStr:e});var r=setTimeout((function(){t&&t({searchStr:e})}),Q.a.throttleDuration);n.setState({searchTimerId:r})},n.handleSort=function(e,t){var a=n.props.callback;a&&a({sortBy:e,sortDir:t}),n.setState({anchorEl:null})},n.handleCategory=function(e){var t=n.props.callback;t&&t({category:e}),n.setState({categoryAnchorEl:null})},n.props.getThis&&n.props.getThis(Object(K.a)(n)),n.state={anchorEl:null,categoryAnchorEl:null,searchFocused:!1,searchTimerId:null,searchStr:n.props.searchStr},n}return Object(s.a)(a,[{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,this.renderCategories(),this.renderSearchFilterSort())}},{key:"renderCategories",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.theme,o=t.category,i=t.marketStats,l=i.reduce((function(e,t){return e+t.count}),0);return m.a.createElement(j.a,{smUp:!0},m.a.createElement(k.a,{className:Object(u.default)(n.headBar,n.mb1)},m.a.createElement(X.a,{select:!0,color:"dark"===r.palette.type?"secondary":"primary",InputLabelProps:{shrink:!0},variant:"outlined",margin:"dense",fullWidth:!0,name:"searchCategory",label:a("Category"),SelectProps:{MenuProps:{PaperProps:{elevation:4,style:{maxHeight:Q.a.selectFieldMaxHeight}}}},value:o,onChange:function(t){return e.handleCategory(t.target.value)}},m.a.createElement(J.a,{key:"All",value:"All",className:n.body2},a("All"),l&&m.a.createElement("span",{className:Object(u.default)(n.disabled,n.caption,n.italic,n.mlhalf)},"(",l,")")),i.sort((function(e,t){var a=e._id.toLowerCase(),n=t._id.toLowerCase();return a<n?-1:a>n?1:0})).map((function(e,t){return m.a.createElement(J.a,{key:t,value:e._id,className:n.body2},e._id,e.count&&m.a.createElement("span",{className:Object(u.default)(n.disabled,n.caption,n.italic,n.mlhalf)},"(",e.count,")"))})))))}},{key:"renderSearchFilterSort",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=t.width,o=this.state,i=o.searchFocused,l=o.searchStr;return m.a.createElement(k.a,{className:a.headBar},m.a.createElement(j.a,{xsDown:!0},m.a.createElement("div",{className:a.flexGrow},"\xa0")),m.a.createElement(A.a,{className:Object(u.default)(a.headBarToolBar,i?a.borderFocused:null,"xs"===r?a.flexGrow:null),variant:"outlined"},m.a.createElement(z.a,{icon:H.Qc,className:Object(u.default)(a.disabled,a.ml1),fixedWidth:!0}),m.a.createElement(C.a,{className:a.input,placeholder:n("Search..."),onChange:function(t){e.handleSearch(t.target.value)},onFocus:function(){return e.setState({searchFocused:!0})},onBlur:function(){return e.setState({searchFocused:!1})},value:l,fullWidth:"xs"===r,inputProps:{spellCheck:"false"}}),m.a.createElement(z.a,{icon:G.x,className:a.closeIcon,fixedWidth:!0,onClick:function(){return e.handleSearch("")},style:{visibility:l?"visible":"hidden"}}),this.renderCategoryFilter(),m.a.createElement(R.a,{className:a.toolbarDivider,orientation:"vertical"}),m.a.createElement(T.a,{onClick:function(t){e.setState({anchorEl:t.currentTarget})},className:a.menuButton},m.a.createElement(z.a,{icon:G.k,className:a.menuButtonIcon})),this.renderToolBarMenu()))}},{key:"renderCategoryFilter",value:function(){var e=this,t=this.props,a=t.classes,n=t.category;return m.a.createElement(j.a,{xsDown:!0},m.a.createElement(R.a,{className:a.toolbarDivider,orientation:"vertical"}),m.a.createElement("div",{className:a.mlhalf},m.a.createElement(F.a,{size:"small",label:m.a.createElement("span",null,n,m.a.createElement(z.a,{icon:Y.d,className:a.mlhalf,fixedWidth:!0})),className:Object(u.default)(a.body2,a.primary,a.bgcolor),onClick:function(t){e.setState({categoryAnchorEl:t.currentTarget})}})),this.renderCategoryMenu())}},{key:"renderToolBarMenu",value:function(){var e=this,t=this.state.anchorEl,a=this.props.t;return m.a.createElement(m.a.Fragment,null,m.a.createElement(D.a,{id:"marketAppListToolBarMenu",anchorEl:t,open:Boolean(t),onClose:function(){return e.setState({anchorEl:null})},elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m.a.createElement(ee.a,{onClick:function(){return e.setState({anchorEl:null})},icon:null},a("Sort by")),this.renderMenuEntry(H.Yc,a("Name"),"name"),m.a.createElement(R.a,null),this.renderMenuEntry(H.bd,a("Total installs"),"totalInstalls"),this.renderMenuEntry(H.bd,a("Total reviews"),"totalReviews"),this.renderMenuEntry(H.bd,a("Average rating"),"averageRating"),m.a.createElement(R.a,null),this.renderMenuEntry(H.B,a("Date created"),"createdAt"),this.renderMenuEntry(H.B,a("Date updated"),"updatedAt")))}},{key:"renderMenuEntry",value:function(e,t,a){var n=this,r=this.state.anchorEl,o=this.props,i=o.t,l=o.classes,s=o.sortBy,c=o.sortDir;return m.a.createElement(Z.a,{icon:e,text:m.a.createElement(m.a.Fragment,null,t,s===a&&"asc"===c?m.a.createElement("span",{className:Object(u.default)(l.disabled,l.italic,l.caption,l.ml1)},"(asc)"):null,s===a&&"desc"===c?m.a.createElement("span",{className:Object(u.default)(l.disabled,l.italic,l.caption,l.ml1)},"(desc)"):null),parentMenuOpen:Boolean(r)},m.a.createElement($.a,{onClick:function(){n.handleSort(a,"asc")},icon:H.ad,selected:s===a&&"asc"===c},i("Ascending")),m.a.createElement($.a,{onClick:function(){n.handleSort(a,"desc")},icon:H.Zc,selected:s===a&&"desc"===c},i("Descending")))}},{key:"renderCategoryMenu",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.marketStats,o=t.category,i=this.state.categoryAnchorEl,l=r.reduce((function(e,t){return e+t.count}),0);return m.a.createElement(m.a.Fragment,null,m.a.createElement(D.a,{id:"marketAppListCategoryMenu",anchorEl:i,open:Boolean(i),onClose:function(){return e.setState({categoryAnchorEl:null})},elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m.a.createElement($.a,{key:"All",onClick:function(){e.handleCategory("All")},selected:"All"===o},a("All"),l>0&&m.a.createElement("span",{className:Object(u.default)(n.disabled,n.caption,n.italic,n.mlhalf)},"(",l,")")),r.sort((function(e,t){var a=e._id.toLowerCase(),n=t._id.toLowerCase();return a<n?-1:a>n?1:0})).map((function(t,a){return m.a.createElement($.a,{key:a,onClick:function(){e.handleCategory(t._id)},selected:o===t._id},t._id,t.count&&m.a.createElement("span",{className:Object(u.default)(n.disabled,n.caption,n.italic,n.mlhalf)},"(",t.count,")"))}))))}}]),a}(m.a.PureComponent);te.defaultProps={marketStats:[],searchStr:"",category:"All",sortBy:"createdAt",sortDir:"desc",callback:null};var ae=Object(x.a)()(Object(v.a)(U,{withTheme:!0})(Object(y.a)()(te))),ne=a(905),re=a(15),oe=a(349),ie=a.n(oe),le=a(796),se=a(434),ce=a(498),pe=a(555),de=a(888),me=a(554),ue=a(61),he=a(805),ge=a(799),fe=a(806),ve=a(800),be=a(689),ye=a(889),Ee=a(635),xe=a(330),we=a(60),ke=a(501),Se=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).takePrevAction=function(){"confirm"===n.state.step&&n.setState({step:"info",overallErrors:null})},n.takeNextAction=function(){"info"===n.state.step&&n.setState({step:"confirm",overallErrors:null})},n.validateRequired=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).validate(e)},n.validateName=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be max {{length}} characters long.",{length:Q.a.maxMicroTxtLength}),{max:Q.a.maxMicroTxtLength}).validate(e)},n.validateSubdomain=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be min {{min}} and max {{max}} characters long.",{min:Q.a.minDomainNameLength,max:Q.a.maxMicroTxtLength}),{max:Q.a.maxMicroTxtLength,min:Q.a.minDomainNameLength}).add(a.bail).add(a.regex,t("Only numbers, letters and hyphen '-' characters allowed."),{regex:/^[A-Za-z0-9-]+$/}).add(a.bail).add(a.notStartsWith,t("Subdomain names cannot start with hyphen ' - ' character."),{searchStr:"-"}).add(a.bail).add(a.notEndsWith,t("Subdomain names cannot end with hyphen ' - ' character."),{searchStr:"-"}).validate(e)},n.validateDescription=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.optional).add(a.textLength,t("Can be max {{length}} chars long.",{length:Q.a.maxLongTxtLength}),{max:Q.a.maxLongTxtLength}).validate(e)},n.onClose=function(){var e=n.props,t=e.reset;(0,e.handleClose)(),t()},n.onSubmit=function(e){var t=n.state.methods,a=n.props,i=a.t,l=a.reset,s=a.handleClose,c=a.createAppAction,p=a.user,d=a.appTemplate,m=a.match,u=a.callback,h=a.templateType;return e.appTemplateId=d._id,e.appTemplateType=h,new Promise(function(){var a=Object(o.a)(r.a.mark((function a(o,d){var h,g,f,v,b;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.isPaidPlanSelected()||0!==t.length){a.next=3;break}return d(new ce.a({_error:i("A valid payment method needs to be added to the account")})),a.abrupt("return");case 3:return a.next=5,c(m.params.userId,p.token,e);case 5:if(200!==(h=a.sent).status){a.next=13;break}o(),s(),l(),u&&u(h.data),a.next=29;break;case 13:g=[],f=Object.keys(h.reduxForm),v=0;case 16:if(!(v<f.length)){a.next=27;break}if("_error"!==(b=f[v])){a.next=23;break}return g=null,a.abrupt("break",27);case 23:g.push(h.reduxForm[b]);case 24:v++,a.next=16;break;case 27:g&&g.length>0&&n.setState({overallErrors:g}),d(new ce.a(h.reduxForm));case 29:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},n.onSubdomainChange=function(e){var t=n.props,a=t.t,i=t.theme,l=t.user,s=t.touch,c=n.state.validateSubdomainTimerId;if(c&&clearTimeout(c),n.validateSubdomain(e.target.value))return n.setState({validatingSubdomain:!1,validateSubdomainMsg:null,validateSubdomainStatus:"pending"}),void s("subdomain");var p=setTimeout(Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({validatingSubdomain:!0,validateSubdomainMsg:m.a.createElement(m.a.Fragment,null,m.a.createElement(I.a,{size:12,thickness:4,style:{position:"relative",top:"2px",marginRight:"4px"}}),m.a.createElement("span",{style:{color:"light"===i.palette.type?i.palette.primary.main:i.palette.primary.linkForDark}},a("Checking validity...")))}),t.next=3,n.props.validateSubdomainAction(l._id,l.token,e.target.value);case 3:200===t.sent.status?n.setState({needsValidation:!1,validatingSubdomain:!1,validateSubdomainStatus:"success",validateSubdomainMsg:m.a.createElement(m.a.Fragment,null,m.a.createElement(z.a,{icon:Y.v,style:{fontSize:"0.75rem",color:i.palette.success.main,marginRight:i.spacing(.5)}}),m.a.createElement("span",{style:{color:i.palette.success.dark}},a("Subdomain is available")))}):n.setState({needsValidation:!1,validatingSubdomain:!1,validateSubdomainStatus:"error",validateSubdomainMsg:m.a.createElement(m.a.Fragment,null,m.a.createElement(z.a,{icon:Y.N,style:{fontSize:"0.75rem",color:i.palette.error.main,marginRight:i.spacing(.5)}}),m.a.createElement("span",null,a("Subdomain is not available. Pleaset try another name.")))});case 5:case"end":return t.stop()}}),t)}))),Q.a.throttleDuration);n.setState({validateSubdomainTimerId:p,needsValidation:!0,validateSubdomainStatus:"pending"})},n.isPaidPlanSelected=function(){var e=n.props.formValues,t=n.state.envPlans.find((function(t){return t._id===(null===e||void 0===e?void 0:e.envPlanId)}));return!!t&&!t.isFreePlan},n.createPaymentMethodSession=Object(o.a)(r.a.mark((function e(){var t,a,o,l,s,c,p,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.user,o=t.formValues,l=t.createPaymentMethodSessionAction,s=t.appTemplate,c=t.templateType,n.setState({addingMethod:!0}),p=Object(i.a)(Object(i.a)({},o),{},{templateType:c,appTemplateId:s._id}),window.sessionStorage.setItem("app-create-values",JSON.stringify(p)),e.next=6,l(a._id,a.token,{initiator:"app-create-template",envPlanId:o.envPlanId});case 6:d=e.sent,n.setState({addingMethod:!1}),200===d.status&&(window.location.href=d.data.url);case 9:case"end":return e.stop()}}),e)}))),n.state={step:"info",validatingSubdomain:!1,validateSubdomainStatus:"pending",validateSubdomainMsg:null,validateSubdomainTimerId:null,needsValidation:!1,overallErrors:null,envPlans:[],methods:null,addingMethod:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,c,p,d,m,u,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.change,n=t.getEnvPlansAction,o=t.getUserMethodsAction,i=t.getDefaultEngineCluster,l=t.match,s=t.user,(null===(c=t.formValues)||void 0===c?void 0:c.subdomain)?this.onSubdomainChange({target:{value:c.subdomain}}):(p=Ae(4)+"-"+Ae(4),a("subdomain",p),this.onSubdomainChange({target:{value:p}})),e.next=4,n(l.params.userId,s.token);case 4:return d=e.sent,this.setState({envPlans:d.data.filter((function(e){return"active"===e.status}))}),(m=d.data.find((function(e){return e.isDefaultPlan&&"active"===e.status})))&&!(null===c||void 0===c?void 0:c.envPlanId)&&a("envPlanId",m._id),e.next=10,o(l.params.userId,s.token);case 10:return u=e.sent,this.setState({methods:u.data}),e.next=14,i(l.params.userId,s.token);case 14:h=e.sent,a("location",h.data.clusterLocation);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.step,a=e.overallErrors,n=this.props,r=n.t,o=n.classes,i=n.open,l=n.handleClose,s=n.fullWidth,c=n.maxWidth,p=n.handleSubmit,d=n.error,u=n.width;return m.a.createElement(le.a,{fullWidth:s,maxWidth:c,fullScreen:"xs"===u,open:i,onClose:function(e,t){if("backdropClick"===t)return!1;l()},"aria-labelledby":"create-app-dialog",classes:{paper:"xs"===u?null:o.dialogPaper}},m.a.createElement(he.a,{id:"create-app-dialog"},m.a.createElement(S.a,{component:"span",variant:"h6"},r("Create app")),m.a.createElement(T.a,{"aria-label":"close",className:o.closeButton,onClick:this.onClose},m.a.createElement(z.a,{icon:G.x,className:o.closeButtonIcon}))),m.a.createElement("form",{className:o.form,onSubmit:p(this.onSubmit),noValidate:!0,style:{flexGrow:"xs"===u?0:1}},this.renderStepper(),m.a.createElement(ge.a,{classes:{root:o.dialogContentRoot}},(d||a)&&m.a.createElement(fe.a,{component:"div"},m.a.createElement(L.a,{severity:"error"}," ",this.renderError()," ")),"info"===t&&this.renderInfo(),"confirm"===t&&this.renderConfirm()),this.renderButtons()))}},{key:"renderError",value:function(){var e=this.state.overallErrors,t=this.props.error;return t?m.a.createElement(S.a,{component:"div",variant:"body2",color:"error"},t):e?m.a.createElement(S.a,{component:"div",variant:"body2",color:"error"},e.map((function(e,t){return m.a.createElement("div",{key:t},e)}))):null}},{key:"renderStepper",value:function(){var e=this.state.step,t=this.props,a=t.t,n=t.classes;return m.a.createElement("div",{className:n.stepHolder},m.a.createElement("div",{className:Object(u.default)(n.step,"info"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("1. Define app info")))),m.a.createElement("div",{className:Object(u.default)(n.step)},m.a.createElement(z.a,{icon:q.c,fixedWidth:!0})),m.a.createElement("div",{className:Object(u.default)(n.step,"confirm"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("2. Confirm & create")))))}},{key:"renderInfo",value:function(){var e=this.state,t=e.validatingSubdomain,a=e.validateSubdomainStatus,n=e.validateSubdomainMsg,r=e.envPlans,o=e.methods,i=e.addingMethod,l=this.props,s=l.t,c=l.classes,p=l.theme,d=Q.a.envLocations;return m.a.createElement("div",null,m.a.createElement(pe.a,{variant:"filled",color:"dark"===p.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"name",label:s("App name"),id:"name",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:s("Name of your application"),validate:this.validateName}),m.a.createElement(pe.a,{variant:"filled",color:"dark"===p.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,name:"subdomain",label:s("Subdomain"),id:"subdomain",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:s("Unique subdomain of your application. Cluster will be automatically assigned."),InputProps:{startAdornment:m.a.createElement(Ee.a,{position:"start"},m.a.createElement("span",{className:Object(u.default)(c.body2,c.disabled)},"https://")),endAdornment:m.a.createElement(Ee.a,{position:"start"},m.a.createElement("span",{className:Object(u.default)(c.body2,c.disabled)},".",Q.a.subdomainSuffix))},onChange:this.onSubdomainChange,asyncValidate:t,asyncValidateStatus:a,asyncValidateMsg:n,validate:this.validateSubdomain}),m.a.createElement(pe.a,{color:"dark"===p.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"location",label:s("Execution environment location"),component:xe.f,helperText:s("Physical location of your app servers and data"),validate:this.validateRequired},d.map((function(e){return m.a.createElement(J.a,{value:e.value,className:c.body2},e.name)}))),o&&0===o.length&&this.isPaidPlanSelected()&&m.a.createElement(L.a,{severity:"warning"},m.a.createElement(be.a,{className:c.body2},s("Your account has no payment methods")),m.a.createElement("div",null,s("You need to add a payment method for your account before creating an execution environment on a paid plan.")),m.a.createElement("div",{style:{marginTop:p.spacing(1)}},m.a.createElement(N.a,{variant:"contained",size:"small",disableElevation:!0,color:"primary",disabled:i,onClick:this.createPaymentMethodSession},i&&m.a.createElement(I.a,{size:16,className:c.progress}),s("Add payment method")))),m.a.createElement(pe.a,{color:"dark"===p.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"envPlanId",label:s("Execution environment pricing plan"),component:xe.f,helperText:s("Pricing plan that will be applied to each execution environment of your app"),validate:this.validateRequired},r.map((function(e){return m.a.createElement(J.a,{key:e._id,value:e._id,className:c.body2},e.title)}))))}},{key:"renderConfirm",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.theme,r=e.formValues,o=e.appTemplate;return m.a.createElement("div",{style:{flexGrow:1,overflowY:"auto",overflowX:"hidden",paddingRight:n.spacing(1)}},m.a.createElement(ke.a,{text:t("Altogic will create"),noMargin:!0}),m.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:n.spacing(3),marginBottom:n.spacing(1)}},m.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:n.spacing(1),borderRadius:n.shape.borderRadius,backgroundColor:"light"===n.palette.type?n.palette.primary.bgColor:n.palette.action.hover}},m.a.createElement("div",{className:a.appTitle},r.name),m.a.createElement("div",{className:a.appDesc},r.shortDesc))),m.a.createElement(ke.a,{text:t("Using the following template"),noMargin:!0}),m.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:n.spacing(3),marginBottom:n.spacing(2)}},m.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:n.spacing(1),borderRadius:n.shape.borderRadius,backgroundColor:"light"===n.palette.type?n.palette.primary.bgColor:n.palette.action.hover}},m.a.createElement(P.a,{alt:t("logo"),src:o.logoUrl,variant:"rounded",style:{width:n.spacing(4),height:n.spacing(4)},className:a.appLogo2},!o.logoUrl&&m.a.createElement(z.a,{icon:H.zc,fixedWidth:!0,className:a.active})),m.a.createElement("div",{className:a.appTitle},o.name))),m.a.createElement(w.a,{container:!0,spacing:2,style:{marginTop:n.spacing(2)}},m.a.createElement(w.a,{item:!0,xs:4},this.getModels(o)),m.a.createElement(w.a,{item:!0,xs:4},this.getEndpoints(o)),m.a.createElement(w.a,{item:!0,xs:4},this.getServices(o)),m.a.createElement(w.a,{item:!0,xs:4},this.getQueues(o)),m.a.createElement(w.a,{item:!0,xs:4},this.getTasks(o)),m.a.createElement(w.a,{item:!0,xs:4},this.getAppParams(o))))}},{key:"getModels",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=e.stats.modelPermanentCount+e.stats.modelTransientCount===0?a("No models"):e.stats.modelPermanentCount+e.stats.modelTransientCount===1?a("1 model"):a("%s models").sprintf(e.stats.modelPermanentCount+e.stats.modelTransientCount),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(z.a,{icon:H.gb,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getEndpoints",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.endpointCount?a("No endpoints"):1===e.stats.endpointCount?a("1 endpoint"):a("%s endpoints").sprintf(e.stats.endpointCount),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(z.a,{icon:H.sc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getServices",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.serviceCount?a("No services"):1===e.stats.serviceCount?a("1 service"):a("%s services").sprintf(e.stats.serviceCount),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(z.a,{icon:H.vc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getQueues",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.queueCount?a("No queues"):1===e.stats.queueCount?a("1 queue"):a("%s queues").sprintf(e.stats.queueCount),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(z.a,{icon:H.hc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getTasks",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.taskCount?a("No tasks"):1===e.stats.taskCount?a("1 task"):a("%s tasks").sprintf(e.stats.taskCount),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(z.a,{icon:H.a,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getAppParams",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.appParamCount?a("No app params"):1===e.stats.appParamCount?a("1 app param"):a("%s app params").sprintf(e.stats.appParamCount),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(z.a,{icon:H.jc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"renderButtons",value:function(){var e=this.state,t=e.step,a=e.envPlans,n=this.props,r=n.submitting,o=n.classes,i=n.t;return m.a.createElement(ve.a,{className:o.dialogActions},m.a.createElement("div",{className:o.leftAction},m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},i("Cancel"))),"info"!==t&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.takePrevAction},i("Previous")),"confirm"!==t&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.takeNextAction,disabled:this.isDisabled()||0===a.length},i("Next")),"confirm"===t&&m.a.createElement(N.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",disabled:r||this.isDisabled()||0===a.length},r&&m.a.createElement(I.a,{size:20,className:o.progress}),i("Create")))}},{key:"isDisabled",value:function(){var e=this.state,t=e.step,a=e.validateSubdomainStatus,n=e.validatingSubdomain,r=e.needsValidation,o=e.methods,i=this.props,l=i.formErrors,s=i.formValues;switch(t){case"info":if(l&&(l.name||l.subdomain))return!0;if(s&&(!s.name||!s.subdomain))return!0;if("success"!==a||n||r)return!0;if(this.isPaidPlanSelected()&&(!o||0===o.length))return!0;break;default:return!1}return!1}}]),a}(m.a.PureComponent);Se.defaultProps={appTemplate:null,callback:null,templateType:"repository"};function Ae(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}var Ce=Object(ue.g)(Object(f.b)((function(e,t){var a={name:"",subdomain:"",location:"",envPlanId:""},n=new URLSearchParams(t.location.search),r=n.get("use_session"),o=n.get("initiator");if("true"===r&&"app-create-template"===o){var i=window.sessionStorage.getItem("app-create-values");if(i){var l=JSON.parse(i);l.templateType===t.templateType&&(a=l)}}return{user:e.user,initialValues:a,formValues:Object(de.a)("createAppFromRepo")(e),formErrors:Object(ye.a)("createAppFromRepo")(e)}}),{createAppAction:we.B,validateSubdomainAction:we.bg,getEnvPlansAction:we.Kc,getUserMethodsAction:we.Jd,createPaymentMethodSessionAction:we.U,getDefaultEngineCluster:we.yc})(Object(me.a)({form:"createAppFromRepo",enableReinitialize:!0})(Object(x.a)()(Object(v.a)((function(e){return{dialogPaper:{minHeight:"540px"},progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},dialogContentRoot:{"&:first-child":{paddingTop:8},flexGrow:1,display:"flex",flexDirection:"column",overflowY:"hidden"},form:{display:"flex",flexDirection:"column",overflowY:"hidden"},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),flexShrink:0},body2:{fontSize:e.typography.body2.fontSize},stepHolder:{display:"flex",alignItems:"center",justifyContent:"space-around",padding:e.spacing(2,3),marginBottom:e.spacing(1),backgroundColor:e.palette.background.layer3},step:{fontSize:e.typography.body1.fontSize,fontWeight:500},stepTitle:{display:"flex",flexDirection:"column",alignItems:"center"},active:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},disabled:{color:e.palette.text.disabled},stepCircle:{height:e.spacing(4),width:e.spacing(4),display:"flex",justifyContent:"center",alignItems:"center"},activeCircle:{color:e.palette.primary.main},disabledCircle:{color:e.palette.text.disabled},pageTitle:{fontSize:e.typography.body1.fontSize,textAlign:"center",marginBottom:e.spacing(3)},leftAction:{flexGrow:1},appTemplate:{display:"flex",padding:e.spacing(1,2),marginRight:e.spacing(1),marginBottom:e.spacing(1),borderRadius:e.shape.borderRadius,border:"1px solid",borderColor:e.palette.divider,"&:hover":{cursor:"pointer",backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover}},selected:{borderColor:e.palette.primary.main,backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover},appLogo:{flexShrink:0,marginRight:e.spacing(2)},appLogo2:{flexShrink:0,marginRight:e.spacing(1),backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover},appTitleHolder:{flexGrow:1,display:"flex",flexDirection:"column"},appTitle:{fontSize:e.typography.body2.fontSize,fontWeight:500,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},appDesc:{color:e.palette.text.disabled,whiteSpace:"normal",wordWrap:"break-word",fontSize:e.typography.caption.fontSize},appSelection:{flexShrink:0,fontSize:e.typography.h5.fontSize,color:e.palette.primary.main},hidden:{visibility:"hidden"},noPadding:{padding:0},details:{marginTop:e.spacing(1),color:e.palette.text.secondary,wordWrap:"break-word",fontSize:e.typography.caption.fontSize,whiteSpace:"pre-wrap"}}}),{withTheme:!0})(Object(y.a)()(Se)))))),Ne=a(337),Te=a(71),Re=a(338),De=a(579),Ie=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).validateRequired=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).validate(e)},n.onClose=function(){(0,n.props.handleClose)()},n.onContentScroll=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,o,i,l,s,c,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props.t,o=n.state,i=o.reviews,l=o.hasMoreReviews,s=o.scrollLoadReviews,(c=t.target).scrollHeight-c.scrollTop!==c.clientHeight||!l){e.next=11;break}if(!s){e.next=6;break}return e.abrupt("return");case 6:return n.setState({scrollLoadReviews:!0}),e.next=9,n.getAppReviews(Q.a.marketAppReviewsPerPage,i&&i.length>0?i[i.length-1].createdAt:Date.now());case 9:200!==(p=e.sent).status?n.setState({errorTitle:a("An error has occured while loading marketplace app data!"),errorMessage:p.data.details,scrollLoadReviews:!1}):n.setState({reviews:i.concat(p.data),scrollLoadReviews:!1,hasMoreReviews:p.data.length>0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createAppCallback=function(e){var t=n.props,a=t.user,r=t.appsController,o=t.handleClose,i=t.marketplace;r&&(a.uiPreferences&&a.uiPreferences.navigateToNewlyCreated?(o(),r.openDesigner(e)):(o(),i.incrementTemplateInstalls(e.templateId),r.updateState(e)))},n.manageReview=function(e){if(e.rating)return new Promise(function(){var t=Object(o.a)(r.a.mark((function t(a,o){var i,l,s,c,p,d,m,u,h,g,f,v,b;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.state,l=i.myReview,s=i.reviews,c=n.props,p=c.user,d=c.app,m=c.marketplace,u=c.addAppTemplateReviewAction,h=c.updateAppTemplateReviewAction,!l){t.next=9;break}return t.next=5,h(p._id,p.token,d.appId,l._id,{rating:e.rating,title:e.title,detail:e.detail});case 5:200===(g=t.sent).status?(m.updateAppTemplate(g.data.appTemplate),f=s.map((function(e){return e._id===g.data.review._id?g.data.review:e})),n.setState({reviews:f,myReview:g.data.review,showNotification:!0,notificationType:"update",showManageReview:!1}),a()):o(new ce.a(g.reduxForm)),t.next=14;break;case 9:return v={appId:d.appId,reviewer:{userId:p._id,username:p.profile.userName,email:p.profile.email,imgUrl:p.profile.imgUrl},review:{rating:e.rating,title:e.title,detail:e.detail}},t.next=12,u(p._id,p.token,d.appId,v);case 12:200===(b=t.sent).status?(m.updateAppTemplate(b.data.appTemplate),n.setState({myReview:b.data.review,reviews:[b.data.review].concat(Object(re.a)(s)),showNotification:!0,notificationType:"create",showManageReview:!1}),a()):o(new ce.a(b.reduxForm));case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());n.setState({ratingError:!0})},n.addReplyToReview=Object(o.a)(r.a.mark((function e(){var t,a,o,i,l,s,c,p,d,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.user,o=t.app,i=t.formValues,l=t.addAppTemplateReviewReplyAction,s=n.state,c=s.reviews,p=s.addReplyReviewId,!i||i.reply){e.next=4;break}return e.abrupt("return");case 4:return n.setState({addingReply:!0}),e.next=7,l(a._id,a.token,o.appId,p,{respondent:{userId:a._id,username:a.profile.userName,email:a.profile.email,imgUrl:a.profile.imgUrl},reply:i.reply});case 7:200===(d=e.sent).status?(m=c.map((function(e){return e._id===d.data._id?d.data:e})),n.setState({reviews:m,addingReply:!1,addReplyReviewId:null})):n.setState({addingReply:!1});case 9:case"end":return e.stop()}}),e)})));var i=!0;return n.props.marketplace&&(i=n.props.marketplace.canAppBeReviewed(n.props.user,n.props.app)),n.state={errorTitle:null,errorMessage:null,activeTab:"0",openCreateAppDialog:!1,canBeUsed:!0,canBeReviewed:i,reviews:null,myReview:null,showManageReview:!1,ratingError:!1,showNotification:!1,notificationType:null,hasMoreReviews:!0,scrollLoadReviews:!1,addReplyReviewId:null,addingReply:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.openCreateAppDialog,n=t.activeTab,r=this.props,o=r.classes,i=r.user,l=r.app,s=r.open,c=r.handleClose;return i&&l?m.a.createElement(le.a,{fullScreen:!0,open:s,onClose:function(e,t){if("backdropClick"===t)return!1;c()},"aria-labelledby":"view-app-details-dialog"},m.a.createElement(se.a,{maxWidth:"lg",className:Object(u.default)(o.mt2,o.flexGrow,o.flexStack,o.noScroll)},this.renderTitle(),this.renderTags(),this.renderDescription(),this.renderAction(),this.renderTabs(),"0"===n&&this.renderDetails(),"1"===n&&this.renderReviews(),a&&m.a.createElement(Ce,{fullWidth:!0,maxWidth:"sm",open:a,handleClose:function(){window.sessionStorage.removeItem("app-create-values"),e.setState({openCreateAppDialog:!1})},callback:this.createAppCallback,appTemplate:l,templateType:"market"}))):null}},{key:"renderTitle",value:function(){var e=this.props,t=e.classes,a=e.app;return m.a.createElement("div",{className:t.flexCenter},m.a.createElement("img",{src:a.logoUrl,alt:"app logo",className:Object(u.default)(t.rounded,t.marketAppLogoSmall,t.mr1)}),m.a.createElement("div",{className:t.flexGrow},m.a.createElement("div",{className:Object(u.default)(t.disabled,t.italic)},a.category),m.a.createElement(S.a,{component:"span",variant:"h5"},a.name)),m.a.createElement(T.a,{onClick:this.onClose},m.a.createElement(z.a,{icon:G.x,className:Object(u.default)(t.menuButtonIcon,t.greyButton)})))}},{key:"renderDescription",value:function(){var e=this.props,t=e.classes,a=e.app;return m.a.createElement(S.a,{component:"div",variant:"body2",className:Object(u.default)(t.secondary,t.mt2)},a.shortDesc)}},{key:"renderTags",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.app;return m.a.createElement(w.a,{container:!0,spacing:4,className:Object(u.default)(a.mt1)},this.renderTag(t("By"),n.submitter.username),this.renderTag(t("Installs"),n.totalInstalls),this.renderTag(t("Published"),ie()(n.createdAt).format("MMM Do, YYYY")),this.renderTag(t("Updated"),ie()(n.updatedAt).format("MMM Do, YYYY")),this.renderTag(t("Rating"),m.a.createElement(ne.a,{name:"size-medium",value:n.averageRating,precision:.1,readOnly:!0})),this.renderTag(t("Price"),n.isFree?m.a.createElement("span",{className:Object(u.default)(a.success,a.bold)},t("Free")):"$"+n.price.standard))}},{key:"renderTag",value:function(e,t){var a=this.props.classes;return m.a.createElement(w.a,{item:!0,xs:6,sm:4,md:2},m.a.createElement(S.a,{component:"div",variant:"body1",className:a.bold},e),m.a.createElement(S.a,{component:"div",variant:"body2"},t))}},{key:"renderAction",value:function(){var e=this,t=this.state.canBeUsed,a=this.props,n=a.t,r=a.classes,o=a.app;return m.a.createElement("div",{className:r.mt2},!t&&m.a.createElement(L.a,{severity:"warning",className:r.mb2},m.a.createElement(b.a,{defaults:n('App template <bold>"%s"</bold> cannot be used in your current account plan. The requirements of the app template exceed the limits of your current account plan.').sprintf(o.name),components:{bold:m.a.createElement("strong",null)}})),m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return e.setState({openCreateAppDialog:!0})},disabled:!t},m.a.createElement(z.a,{icon:Y.wb,className:r.mr1}),n("Create app")))}},{key:"renderTabs",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.app,o=this.state,i=o.activeTab,l=o.reviews;return m.a.createElement("div",{className:Object(u.default)(n.tabList,n.mt2)},m.a.createElement(M.a,{value:i,onChange:function(t,a){e.setState({activeTab:a}),"1"!==a||l||e.loadReviews()},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},m.a.createElement(W.a,{value:"0",label:m.a.createElement("div",{className:n.tabTextWrapper},m.a.createElement(z.a,{icon:H.dc,className:n.tabIcon}),a("Details")),classes:{root:n.tabRoot}}),m.a.createElement(W.a,{value:"1",label:m.a.createElement("div",{className:n.tabTextWrapper},m.a.createElement(z.a,{icon:H.ab,className:n.tabIcon}),a("Reviews"),0!==r.totalReviews&&m.a.createElement("span",{className:n.mlhalf},"(",r.totalReviews,")")),classes:{root:n.tabRoot}})))}},{key:"renderDetails",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.app;return m.a.createElement("div",{className:Object(u.default)(a.flexGrow,a.scrollY)},m.a.createElement(w.a,{container:!0,spacing:4,className:Object(u.default)(a.mt1,a.pl2,a.pr2)},this.renderDetail(t("Models"),H.gb,n.stats.modelPermanentCount+n.stats.modelTransientCount,t("No models")),this.renderDetail(t("Endpoints"),H.sc,n.stats.endpointCount,t("No endopints")),this.renderDetail(t("Services"),H.vc,n.stats.serviceCount,t("No services")),this.renderDetail(t("Queues"),H.hc,n.stats.queueCount,t("No queues")),this.renderDetail(t("Tasks"),H.a,n.stats.taskCount,t("No tasks")),this.renderDetail(t("App params"),H.jc,n.stats.appParamCount,t("No app params")),this.renderDetail(t("Connections"),H.uc,n.stats.externalConnCount,t("No connections")),this.renderDetail(t("Custom nodes"),H.jb,n.stats.customNodesCount,t("No custom nodes"))),m.a.createElement("div",{className:Object(u.default)(a.mt2,a.mb2,a.mr2,a.paper,a.padding2,a.rounded)},m.a.createElement("div",null,m.a.createElement(S.a,{component:"div",variant:"body1",className:a.bold},t("Details"))),m.a.createElement("div",{className:Object(u.default)(a.mt2,a.showLineBreaks,a.pr2,a.pb2)},n.details)))}},{key:"renderDetail",value:function(e,t,a,n){var r=this.props.classes;return m.a.createElement(w.a,{item:!0,xs:6,sm:4,md:3},m.a.createElement(S.a,{component:"div",variant:"body1",className:r.bold},m.a.createElement(z.a,{icon:t,className:r.mrhalf}),e),m.a.createElement(S.a,{component:"div",variant:"body2",className:r.secondary},0===a?n:a))}},{key:"renderReviews",value:function(){var e=this,t=this.state,a=t.reviews,n=t.errorTitle,r=t.errorMessage,o=this.props,i=o.t,l=o.classes,s=o.error;return n||r||s?m.a.createElement("div",{className:Object(u.default)(l.flexGrow,l.contentPlaceholder)},m.a.createElement(Te.a,{mainMessage:n||s,message:r})):a?0===a.length?m.a.createElement("div",{className:Object(u.default)(l.flexGrow,l.contentPlaceholder)},this.renderManageReview(),this.renderNoReviews(),this.renderNotification()):m.a.createElement("div",{className:Object(u.default)(l.flexGrow,l.scrollY),onScroll:this.onContentScroll},this.renderManageReview(),m.a.createElement("div",null,m.a.createElement(S.a,{component:"div",variant:"body1",className:Object(u.default)(l.bold,l.mt2,l.pl2,l.pr2)},i("Details"))),a.map((function(t){return e.renderReview(t)})),this.renderNotification()):m.a.createElement("div",{className:Object(u.default)(l.flexGrow,l.contentPlaceholder)},m.a.createElement(Ne.a,{message:i("Loading reviews...")}))}},{key:"renderManageReview",value:function(){var e=this,t=this.state,a=t.showManageReview,n=t.myReview,r=t.canBeReviewed,o=t.ratingError,i=this.props,l=i.t,s=i.classes,c=i.formValues,p=i.change,d=i.theme,h=i.user,g=i.app,f=i.handleSubmit,v=i.submitting;return g.submitter.userId===h._id?null:m.a.createElement(w.a,{container:!0,spacing:1,className:Object(u.default)(s.pl2,s.pr2)},!r&&m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(L.a,{severity:"warning",className:s.mb2},m.a.createElement(b.a,{defaults:l('You cannot add a review for app template <bold>"%s"</bold>. You need to have an active app created using this template.').sprintf(g.name),components:{bold:m.a.createElement("strong",null)}}))),!1===a&&r&&m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return e.setState({showManageReview:!0})}},l(n?"Manage my review":"Add new review"))),r&&a&&m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{item:!0,xs:12,sm:6},m.a.createElement(S.a,{component:"legend",className:Object(u.default)(s.caption,s.secondary)},l("Rating"),"*"),m.a.createElement(ne.a,{name:"rating",value:c&&c.rating?c.rating:0,onChange:function(t,a){p("rating",a),a?e.setState({ratingError:!1}):e.setState({ratingError:!0})}}),o&&m.a.createElement("div",{className:Object(u.default)(s.caption,s.error)},l("A rating needs to be selected"))),m.a.createElement(w.a,{item:!0,xs:12,sm:6}),m.a.createElement(w.a,{item:!0,xs:12,sm:6},m.a.createElement(pe.a,{variant:"filled",color:"dark"===d.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,name:"title",label:l("Title"),component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxShortTxtLength},helperText:l("Title of your review"),validate:this.validateRequired})),m.a.createElement(w.a,{item:!0,xs:12,sm:6}),m.a.createElement(w.a,{item:!0,xs:12,sm:6},m.a.createElement(pe.a,{variant:"filled",color:"dark"===d.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,name:"detail",label:l("Details"),component:xe.g,autoComplete:"off",multiline:!0,rows:10,inputProps:{maxLength:Q.a.maxDetailTxtLength},helperText:l("Provide details about your review"),validate:this.validateRequired})),m.a.createElement(w.a,{item:!0,xs:12},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:f(this.manageReview),className:s.mr1,disabled:v},v&&m.a.createElement(I.a,{size:20,className:s.mr1}),m.a.createElement(z.a,{icon:n?Y.J:Y.wb,className:s.mr1}),l(n?"Update":"Add")),m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:function(){return e.setState({showManageReview:!1})}},l("Cancel")))))}},{key:"renderNoReviews",value:function(){var e=this.state.showManageReview,t=this.props,a=t.classes,n=t.t;return m.a.createElement("div",{className:a.noDataPlaceholder2},!e&&m.a.createElement(Re.a,{icon:H.ab,mainMessage:m.a.createElement(b.a,{defaults:n("There are no reviews posted for this application template."),components:{bold:m.a.createElement("strong",null)}}),smallIcon:!1,action:null,actionIcon:null}))}},{key:"renderReview",value:function(e){var t=this,a=this.state,n=a.addReplyReviewId,r=a.addingReply,o=this.props,i=o.t,l=o.theme,s=o.classes,c=o.app,p=o.user,d=o.untouch,h=o.change;return m.a.createElement("div",{className:Object(u.default)(s.mt1,s.mb1,s.mr2,s.paper,s.padding2,s.rounded),key:e._id},m.a.createElement("div",{className:s.flexCenter},m.a.createElement("div",{className:s.mr2},m.a.createElement(ne.a,{value:e.review.rating,precision:.1,readOnly:!0,size:"small"})),m.a.createElement("div",{className:Object(u.default)(s.flexGrow,s.bold)},e.review.title),m.a.createElement("div",{className:Object(u.default)(s.disabled)},ie()(e.createdAt).format("MMM Do, YYYY"))),m.a.createElement("div",{className:Object(u.default)(s.showLineBreaks,s.mt1)},e.review.detail),e.replies&&e.replies.map((function(t,a){return m.a.createElement(m.a.Fragment,{key:t._id},m.a.createElement("div",{className:Object(u.default)(s.mt2,s.mb2,s.ml2,s.flexRow),key:t._id},m.a.createElement("div",{className:Object(u.default)(s.flexGrow,s.showLineBreaks)},t.reply),m.a.createElement("div",{className:Object(u.default)(s.disabled)},ie()(t.createdAt).format("MMM Do, YYYY"))),a<e.replies.length-1&&m.a.createElement(R.a,{className:Object(u.default)(s.ml2,s.pl2)}))})),(c.submitter.userId===p._id||e.reviewer.userId===p._id)&&e.replies&&e.replies.length<=Q.a.maxReviewReplyCount&&m.a.createElement(m.a.Fragment,null,n!==e._id&&m.a.createElement("div",{className:Object(u.default)(s.mt2,s.ml2)},m.a.createElement("span",{className:s.anchor,onClick:function(){h("reply",""),d("reply"),t.setState({addReplyReviewId:e._id})}},m.a.createElement(z.a,{icon:H.Kc,className:s.mrhalf}),i("Add comment"))),n===e._id&&m.a.createElement("div",{className:Object(u.default)(s.mt2,s.ml2)},m.a.createElement("div",null,m.a.createElement(pe.a,{variant:"filled",color:"dark"===l.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,name:"reply",label:i("Comment"),component:xe.g,autoComplete:"off",multiline:!0,rows:5,inputProps:{maxLength:Q.a.maxDetailTxtLength},helperText:i(" "),validate:this.validateRequired})),m.a.createElement("div",{className:s.mt2},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:this.addReplyToReview,className:s.mr1,disabled:r},r&&m.a.createElement(I.a,{size:20,className:s.mr1}),m.a.createElement(z.a,{icon:Y.wb,className:s.mr1}),i("Add")),m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:function(){return t.setState({addReplyReviewId:null})}},i("Cancel"))))))}},{key:"renderNotification",value:function(){var e=this,t=this.props,a=t.t,n=t.app,r=this.state,o=r.showNotification,i=r.notificationType,l=null;return i?("create"===i?l=a("Your review for app template <bold>%s</bold> has been successfull created.").sprintf(n.name):"update"===i&&(l=a("Your review for app template <bold>%s</bold> has been successfull updated.").sprintf(n.name)),m.a.createElement(De.a,{open:o,onClose:function(){return e.setState({showNotification:!1,notificationType:null})}},m.a.createElement(b.a,{defaults:l,components:{bold:m.a.createElement("strong",null)}}))):null}},{key:"loadReviews",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.t,n=t.change,e.next=3,this.getAppReviews();case 3:return o=e.sent,e.next=6,this.getMyAppReview();case 6:if(i=e.sent,200===o.status){e.next=10;break}return this.setState({errorTitle:a("An error has occured while loading app reviews!"),errorMessage:o.data.details}),e.abrupt("return");case 10:if(200===i.status){e.next=13;break}return this.setState({errorTitle:a("An error has occured while loading app reviews!"),errorMessage:i.data.details}),e.abrupt("return");case 13:i.data&&(n("rating",i.data.review.rating),n("title",i.data.review.title),n("detail",i.data.review.detail)),this.setState({reviews:o.data,myReview:i.data});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAppReviews",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:Q.a.marketAppReviewsPerPage,a=s.length>1&&void 0!==s[1]?s[1]:(new Date).toISOString(),n=this.props,o=n.user,i=n.app,l=n.getAppTemplateReviewsAction,e.next=5,l(o._id,o.token,i.appId,t,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMyAppReview",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.user,n=t.app,o=t.getMyAppTemplateReviewAction,e.next=3,o(a._id,a.token,n.appId);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(m.a.PureComponent);Ie.defaultProps={user:null,app:null,open:!1,handleClose:null,appsController:null,marketplace:null};var Oe=Object(f.b)((function(e){return{formValues:Object(de.a)("manageAppReview")(e)}}),{getMyAppTemplateReviewAction:we.cd,getAppTemplateReviewsAction:we.tc,addAppTemplateReviewAction:we.e,updateAppTemplateReviewAction:we.pf,addAppTemplateReviewReplyAction:we.f})(Object(me.a)({form:"manageAppReview",enableReinitialize:!0})(Object(x.a)()(Object(v.a)(U,{withTheme:!0})(Object(y.a)()(Ie))))),je=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).createAppCallback=function(e){var t=n.props,a=t.user,r=t.appsController,o=t.marketplace;r&&(a.uiPreferences&&a.uiPreferences.navigateToNewlyCreated?r.openDesigner(e):(o.incrementTemplateInstalls(e.templateId),r.updateState(e)))};return n.state={contentHovering:!1,openCreateAppDialog:!1,openViewDetailsDialog:!1,canBeUsed:!0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.contentHovering,n=t.openCreateAppDialog,r=t.openViewDetailsDialog,o=t.canBeUsed,i=this.props,l=i.t,s=i.classes,c=i.user,p=i.app,d=i.searchStr,h=i.appsController,f=i.marketplace;return c&&p?m.a.createElement(w.a,{item:!0,xs:12,sm:6,md:4,className:s.cardHolder},m.a.createElement(A.a,{className:Object(u.default)(s.card),elevation:3},m.a.createElement(k.a,{className:s.actionArea,onMouseEnter:function(){return e.setState({contentHovering:!0})},onMouseLeave:function(){return e.setState({contentHovering:!1})},style:{zIndex:a?100:10}},m.a.createElement("div",{className:Object(u.default)(s.primaryMain,s.flexCenter,s.flexGrow,s.justifyCenter)},o&&m.a.createElement("div",{className:Object(u.default)(s.pointer,s.link,s.padding2),onClick:function(){return e.setState({openCreateAppDialog:!0})}},m.a.createElement(z.a,{icon:H.Dc,className:s.mr1}),m.a.createElement("span",null,l("Create app"))),o&&m.a.createElement(R.a,{className:Object(u.default)(s.toolbarDivider),orientation:"vertical"}),m.a.createElement("div",{className:Object(u.default)(s.pointer,s.link,s.padding2),onClick:function(){return e.setState({openViewDetailsDialog:!0})}},m.a.createElement(z.a,{icon:H.Ab,className:s.mr1}),m.a.createElement("span",null,l("View details"))))),m.a.createElement(k.a,{className:s.cardHeader},m.a.createElement(S.a,{component:"span",variant:"body1",className:Object(u.default)(s.cardHeaderTitle)},m.a.createElement(g.a,{highlightClassName:s.highlight,searchWords:[d],autoEscape:!0,textToHighlight:p.name})),p.isFree&&m.a.createElement("div",{className:s.success},l("Free")),!1===p.isFree&&p.price.standard&&m.a.createElement("div",{className:s.primaryMain},"$",p.price.standard)),m.a.createElement(k.a,{className:Object(u.default)(s.cardContent),onMouseEnter:function(){return e.setState({contentHovering:!0})},onMouseLeave:function(){return e.setState({contentHovering:!1})},style:{zIndex:a?10:100,opacity:a?.05:1}},m.a.createElement("img",{src:p.logoUrl,alt:"app logo",className:Object(u.default)(s.rounded,s.marketAppLogo)}),m.a.createElement("div",{className:Object(u.default)(s.shortDesc,s.ml2)},p.shortDesc)),m.a.createElement(k.a,{className:s.cardFooter},m.a.createElement("div",{className:s.flexCenter},m.a.createElement(z.a,{icon:H.S,className:Object(u.default)(s.cardFooterIcon,s.mrhalf,s.primaryMain)}),m.a.createElement("span",{className:Object(u.default)(s.caption,s.mr1)},p.totalInstalls),m.a.createElement(z.a,{icon:H.ab,className:Object(u.default)(s.cardFooterIcon,s.mrhalf,s.primaryMain)}),m.a.createElement("span",{className:s.caption},p.totalReviews)),m.a.createElement("div",{className:s.flexCenter},m.a.createElement("div",{className:s.caption},m.a.createElement(ne.a,{size:"small",defaultValue:p.averageRating,precision:.1,readOnly:!0}))))),n&&m.a.createElement(Ce,{fullWidth:!0,maxWidth:"sm",open:n,handleClose:function(){window.sessionStorage.removeItem("app-create-values"),e.setState({openCreateAppDialog:!1})},callback:this.createAppCallback,appTemplate:p,templateType:"market"}),r&&m.a.createElement(Oe,{user:c,app:p,open:r,handleClose:function(){return e.setState({openViewDetailsDialog:!1})},appsController:h,marketplace:f})):null}}]),a}(m.a.PureComponent);je.defaultProps={user:null,app:null,searchStr:"",appsController:null,marketplace:null};var Be=Object(v.a)(U,{withTheme:!0})(Object(y.a)()(je)),Pe=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getThis=function(e){n.headbarRef=e},n.onContentScroll=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,o,i,l,s,c,p,d,m,u,h,g,f,v,b,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n._unmounted){e.next=2;break}return e.abrupt("return");case 2:if(a=n.props.t,o=n.state,i=o.marketApps,l=o.searchStr,s=o.category,c=o.sortBy,p=o.sortDir,d=o.pageNum,m=o.hasMoreApps,u=o.scrollLoadApps,(h=t.target).scrollHeight-h.scrollTop!==h.clientHeight||!m){e.next=28;break}if(!u){e.next=8;break}return e.abrupt("return");case 8:return n.setState({scrollLoadApps:!0}),e.next=11,n.getMarketApps(l,s,d+1,Q.a.marketAppRowsPerPage,c,p);case 11:if(200===(g=e.sent).status){e.next=16;break}n.setState({errorTitle:a("An error has occured while loading marketplace app data!"),errorMessage:g.data.details,scrollLoadApps:!1}),e.next=28;break;case 16:f=[],v=function(e){var t=g.data[e];if(i.find((function(e){return e._id===t._id})))return"continue";f.push(t)},b=0;case 19:if(!(b<g.data.length)){e.next=26;break}if("continue"!==v(b)){e.next=23;break}return e.abrupt("continue",23);case 23:b++,e.next=19;break;case 26:y=i.concat(f),n.setState({marketApps:y,scrollLoadApps:!1,pageNum:d+1,hasMoreApps:g.data.length>0});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.canAppBeReviewed=function(e,t){if(!n._unmounted){for(var a=n.props.apps,r=function(n){var r=e.apps[n],o=a.find((function(e){return e._id===r.appId}));if("owner"===r.type&&o&&"market"===o.templateType&&o.templateId===t._id)return{v:!0}},o=0;o<e.apps.length;o++){var i=r(o);if("object"===typeof i)return i.v}return!1}},n.incrementTemplateInstalls=function(e){if(!n._unmounted){var t=n.state.marketApps.map((function(t){if(t._id===e){var a=Object(i.a)({},t);return t.totalInstalls=t.totalInstalls+1,a}return t}));n.setState({marketApps:t})}},n.updateAppTemplate=function(e){if(!n._unmounted){var t=n.state.marketApps.map((function(t){return t._id===e._id?e:t}));n.setState({marketApps:t})}},n.handleHeadbarChange=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,o,l,s,c,p,d,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n._unmounted){e.next=2;break}return e.abrupt("return");case 2:return a=n.props.t,o=n.state,l=o.searchStr,s=o.category,c=o.sortBy,p=o.sortDir,d=Object(i.a)({searchStr:l,category:s,sortBy:c,sortDir:p,hasMoreApps:!0},t),n.setState({marketApps:null}),e.next=8,n.getMarketApps(d.searchStr,d.category,0,Q.a.marketAppRowsPerPage,d.sortBy,d.sortDir);case 8:if(200===(m=e.sent).status){e.next=12;break}return n.setState({errorTitle:a("An error has occured while loading marketplace app data!"),errorMessage:m.data.details}),e.abrupt("return");case 12:n.setState(Object(i.a)(Object(i.a)({},d),{},{marketApps:m.data}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.headbarRef=null,n._unmounted=!1,n.state={marketApps:null,marketStats:null,searchStr:"",category:"All",sortBy:"createdAt",sortDir:"desc",pageNum:0,errorTitle:null,errorMessage:null,hasMoreApps:!0,scrollLoadApps:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.t,e.next=3,this.getMarketStats();case 3:if(200===(a=e.sent).status){e.next=7;break}return this.setState({errorTitle:t("An error has occured while loading marketplace app data!"),errorMessage:a.data.details}),e.abrupt("return");case 7:return e.next=9,this.getMarketApps();case 9:if(200===(n=e.sent).status){e.next=13;break}return this.setState({errorTitle:t("An error has occured while loading marketplace app data!"),errorMessage:n.data.details}),e.abrupt("return");case 13:this.setState({marketApps:n.data,marketStats:a.data});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.classes,r=t.hidden,o=t.user,i=t.appsController,l=this.state,s=l.marketApps,c=l.marketStats,p=l.searchStr,d=l.category,u=l.sortBy,h=l.sortDir,g=l.errorTitle,f=l.errorMessage;return r?null:g||f?m.a.createElement(k.a,{className:n.noDataPlaceholder2},m.a.createElement(Te.a,{mainMessage:f,message:null})):c?s?m.a.createElement(m.a.Fragment,null,m.a.createElement(ae,{callback:this.handleHeadbarChange,marketStats:c,searchStr:p,category:d,sortBy:u,sortDir:h,getThis:this.getThis}),0===s.length&&!p&&this.renderNoData(),0===s.length&&(p||"All"!==d)&&this.renderNoMatches(),s.length>0&&m.a.createElement("div",{className:n.appsContainer,onScroll:this.onContentScroll},m.a.createElement(w.a,{container:!0,spacing:4,className:n.grid},s.map((function(t){return m.a.createElement(Be,{user:o,app:t,key:t._id,appsController:i,marketplace:e,searchStr:p})}))))):m.a.createElement(m.a.Fragment,null,m.a.createElement(ae,{callback:this.handleHeadbarChange,marketStats:c,searchStr:p,category:d,sortBy:u,sortDir:h,getThis:this.getThis}),m.a.createElement(k.a,{className:n.contentPlaceholder},m.a.createElement(Ne.a,{message:a("Loading marketplace...")}))):m.a.createElement(k.a,{className:n.contentPlaceholder},m.a.createElement(Ne.a,{message:a("Loading marketplace...")}))}},{key:"renderNoData",value:function(){var e=this.props,t=e.classes,a=e.t;return m.a.createElement(k.a,{className:t.noDataPlaceholder2},m.a.createElement(Re.a,{icon:H.gd,mainMessage:m.a.createElement(b.a,{defaults:a("There are no application templates in selected category."),components:{bold:m.a.createElement("strong",null)}}),message:m.a.createElement("span",{className:t.caption},m.a.createElement(b.a,{defaults:a("Learn <link1>Application Key Concepts</link1> or explore <link2>Platform Capabilities</link2> to understand what you can do with Altogic"),components:{link1:m.a.createElement(_.a,{href:"https://altogic.com/docs/key-concepts",target:"_blank"}),link2:m.a.createElement(_.a,{href:"https://altogic.com/docs/category/platform-capabilities",target:"_blank"})}})),smallIcon:!1,action:null,actionIcon:null}))}},{key:"renderNoMatches",value:function(){var e=this,t=this.props,a=t.classes,n=t.t;return m.a.createElement("div",{className:a.noDataPlaceholder2},m.a.createElement(Re.a,{icon:H.Ab,mainMessage:n("No items matching search and/or filter criteria"),message:n("Didn't find what you're looking for? Some marketplace apps may be hidden because of the search filters you've entered."),smallIcon:!0,action:n("Reset filters"),actionIcon:H.xd,callBack:function(){e.headbarRef&&e.headbarRef.clearSearchStr(),e.handleHeadbarChange({searchStr:"",category:"All"})}}))}},{key:"getMarketStats",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.user,n=t.getAppCategoryStatsAction,e.next=3,n(a._id,a.token);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMarketApps",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,c,p,d,m=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:null,a=m.length>1&&void 0!==m[1]?m[1]:"All",n=m.length>2&&void 0!==m[2]?m[2]:0,o=m.length>3&&void 0!==m[3]?m[3]:Q.a.marketAppRowsPerPage,i=m.length>4&&void 0!==m[4]?m[4]:"createdAt",l=m.length>5&&void 0!==m[5]?m[5]:"desc",s=this.props,c=s.user,p=s.getAppTemplatesAction,d=null,t&&t.trim()&&(d=t.trim()),e.next=11,p(c._id,c.token,d,a,n,o,i,l);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(m.a.PureComponent);Pe.defaultProps={hidden:!1,appsController:null};Object(f.b)((function(e){return{user:e.user,apps:e.apps}}),{getAppCategoryStatsAction:we.gc,getAppTemplatesAction:we.uc})(Object(x.a)()(Object(v.a)(U,{withTheme:!0})(Object(y.a)()(Pe))));var _e=a(335),Me=a(872),We=a(743),Le=a(691),Fe=a(717),ze=a.n(Fe),He=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).isCollapsed=function(e){return!!n.state.collapseList.find((function(t){return t===e}))},n.showDetail=function(e){var t=n.state.collapseList,a=[].concat(Object(re.a)(t),[e]);n.setState({collapseList:a})},n.hideDetail=function(e){var t=n.state.collapseList.filter((function(t){return t!==e}));n.setState({collapseList:t})},n.takePrevAction=function(){var e=n.state,t=e.step,a=e.step2,r=n.props,o=r.width,i=r.liveApp;"xs"===o||"sm"===o?i?"confirm"===t&&n.setState({step:"info",step2:"plan"}):"template"===t?n.setState({step:"info",step2:"plan"}):"confirm"===t&&n.setState({step:"template",step2:"template"}):"domain"===a?n.setState({step:"info",step2:"name"}):"env"===a?n.setState({step:"info",step2:"domain"}):"plan"===a?n.setState({step:"info",step2:"env"}):"template"===a&&n.setState({step:"info",step2:"plan"})},n.takeNextAction=function(){var e=n.state,t=e.step,a=e.step2,r=n.props,o=r.width,i=r.liveApp;"xs"===o||"sm"===o?i?"info"===t&&n.setState({step:"confirm"}):"info"===t?n.setState({step:"template",step2:"template"}):"template"===t&&n.setState({step:"confirm"}):"name"===a?n.setState({step:"info",step2:"domain"}):"domain"===a?n.setState({step:"info",step2:"env"}):"env"===a?n.setState({step:"info",step2:"plan"}):"plan"===a&&n.setState({step:"template",step2:"template"})},n.validateRequired=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).validate(e)},n.validateName=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be max {{length}} characters long.",{length:Q.a.maxMicroTxtLength}),{max:Q.a.maxMicroTxtLength}).validate(e)},n.validateSubdomain=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be min {{min}} and max {{max}} characters long.",{min:Q.a.minDomainNameLength,max:Q.a.maxMicroTxtLength}),{max:Q.a.maxMicroTxtLength,min:Q.a.minDomainNameLength}).add(a.bail).add(a.regex,t("Only numbers, letters and hyphen '-' characters allowed."),{regex:/^[A-Za-z0-9-]+$/}).add(a.bail).add(a.notStartsWith,t("Subdomain names cannot start with hyphen ' - ' character."),{searchStr:"-"}).add(a.bail).add(a.notEndsWith,t("Subdomain names cannot end with hyphen ' - ' character."),{searchStr:"-"}).validate(e)},n.validateDescription=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.optional).add(a.textLength,t("Can be max {{length}} chars long.",{length:Q.a.maxLongTxtLength}),{max:Q.a.maxLongTxtLength}).validate(e)},n.onClose=function(){var e=n.props,t=e.reset;(0,e.handleClose)(),t()},n.onSubmit=function(e){var t=n.state,a=t.methods,i=t.appTemplateId,l=n.props,s=l.t,c=l.reset,p=l.handleClose,d=l.createAppAction,m=l.user,u=l.match,h=l.callback,g=l.liveApp;return e.appTemplateId=i,e.appTemplateType="market",e.liveAppId=null===g||void 0===g?void 0:g._id,new Promise(function(){var t=Object(o.a)(r.a.mark((function t(o,i){var l,g,f,v,b;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isPaidPlanSelected()||0!==a.length){t.next=3;break}return i(new ce.a({_error:s("A valid payment method needs to be added to the account")})),t.abrupt("return");case 3:return t.next=5,d(u.params.userId,m.token,e);case 5:if(200!==(l=t.sent).status){t.next=13;break}o(),p(),c(),h&&h(l.data),t.next=29;break;case 13:g=[],f=Object.keys(l.reduxForm),v=0;case 16:if(!(v<f.length)){t.next=27;break}if("_error"!==(b=f[v])){t.next=23;break}return g=null,t.abrupt("break",27);case 23:g.push(l.reduxForm[b]);case 24:v++,t.next=16;break;case 27:g&&g.length>0&&n.setState({overallErrors:g}),i(new ce.a(l.reduxForm));case 29:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},n.onSubdomainChange=function(e){var t=n.props,a=t.t,i=t.theme,l=t.user,s=t.touch,c=n.state.validateSubdomainTimerId;if(c&&clearTimeout(c),n.validateSubdomain(e.target.value))return n.setState({validatingSubdomain:!1,validateSubdomainMsg:null,validateSubdomainStatus:"pending"}),void s("subdomain");var p=setTimeout(Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({validatingSubdomain:!0,validateSubdomainMsg:m.a.createElement(m.a.Fragment,null,m.a.createElement(I.a,{size:12,thickness:4,style:{position:"relative",top:"2px",marginRight:"4px"}}),m.a.createElement("span",{style:{color:"light"===i.palette.type?i.palette.primary.main:i.palette.primary.linkForDark}},a("Checking validity...")))}),t.next=3,n.props.validateSubdomainAction(l._id,l.token,e.target.value);case 3:200===t.sent.status?n.setState({needsValidation:!1,validatingSubdomain:!1,validateSubdomainStatus:"success",validateSubdomainMsg:m.a.createElement(m.a.Fragment,null,m.a.createElement(z.a,{icon:Y.v,style:{fontSize:"0.75rem",color:i.palette.success.main,marginRight:i.spacing(.5)}}),m.a.createElement("span",{style:{color:i.palette.success.dark}},a("Subdomain is available")))}):n.setState({needsValidation:!1,validatingSubdomain:!1,validateSubdomainStatus:"error",validateSubdomainMsg:m.a.createElement(m.a.Fragment,null,m.a.createElement(z.a,{icon:Y.N,style:{fontSize:"0.75rem",color:i.palette.error.main,marginRight:i.spacing(.5)}}),m.a.createElement("span",null,a("Subdomain is not available. Pleaset try another name.")))});case 5:case"end":return t.stop()}}),t)}))),Q.a.throttleDuration);n.setState({validateSubdomainTimerId:p,needsValidation:!0,validateSubdomainStatus:"pending"})},n.isPaidPlanSelected=function(){var e=n.props.formValues,t=n.state.envPlans.find((function(t){return t._id===(null===e||void 0===e?void 0:e.envPlanId)}));return!!t&&!t.isFreePlan},n.createPaymentMethodSession=Object(o.a)(r.a.mark((function e(){var t,a,o,l,s,c,p,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.step2,a=n.props,o=a.user,l=a.formValues,s=a.createPaymentMethodSessionAction,c=a.liveApp,n.setState({addingMethod:!0}),p=Object(i.a)(Object(i.a)({},l),{},{step2:t,liveApp:c}),window.sessionStorage.setItem("app-create-values",JSON.stringify(p)),e.next=7,s(o._id,o.token,{initiator:"app-create",envPlanId:l.envPlanId});case 7:d=e.sent,n.setState({addingMethod:!1}),200===d.status&&(window.location.href=d.data.url);case 10:case"end":return e.stop()}}),e)}))),n.state={step:"info",step2:"name",appTemplateId:null,collapseList:[],validatingSubdomain:!1,validateSubdomainStatus:"pending",validateSubdomainMsg:null,validateSubdomainTimerId:null,needsValidation:!1,overallErrors:null,envPlans:[],methods:null,addingMethod:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,c,p,d,m,u,h,g,f,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.change,n=t.getEnvPlansAction,o=t.getUserMethodsAction,i=t.getDefaultEngineCluster,l=t.match,s=t.user,c=t.formValues,p=t.appTemplates,(d=window.sessionStorage.getItem("app-create-values"))&&(m=JSON.parse(d)).step2&&this.setState({step2:m.step2}),p&&p.length>=2&&this.setState({appTemplateId:p[1]._id}),(null===c||void 0===c?void 0:c.subdomain)?this.onSubdomainChange({target:{value:c.subdomain}}):(u=Ge(4)+"-"+Ge(4),a("subdomain",u),this.onSubdomainChange({target:{value:u}})),e.next=7,n(l.params.userId,s.token);case 7:return h=e.sent,this.setState({envPlans:h.data.filter((function(e){return"active"===e.status}))}),(g=h.data.find((function(e){return e.isDefaultPlan&&"active"===e.status})))&&!(null===c||void 0===c?void 0:c.envPlanId)&&a("envPlanId",g._id),e.next=13,o(l.params.userId,s.token);case 13:return f=e.sent,this.setState({methods:f.data}),e.next=17,i(l.params.userId,s.token);case 17:v=e.sent,a("location",v.data.clusterLocation);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.step,a=e.overallErrors,n=this.props,r=n.t,o=n.classes,i=n.open,l=n.handleClose,s=n.fullWidth,c=n.maxWidth,p=n.handleSubmit,d=n.error,u=n.width;return"sm"===u||"xs"===u?m.a.createElement(le.a,{fullWidth:s,maxWidth:c,fullScreen:!0,open:i,onClose:function(e,t){if("backdropClick"===t)return!1;l()},"aria-labelledby":"create-app-dialog"},m.a.createElement(he.a,{id:"create-app-dialog"},m.a.createElement(S.a,{component:"span",variant:"h6"},r("Create app")),m.a.createElement(T.a,{"aria-label":"close",className:o.closeButton,onClick:this.onClose},m.a.createElement(z.a,{icon:G.x,className:o.closeButtonIcon}))),m.a.createElement("form",{className:o.form,onSubmit:p(this.onSubmit),noValidate:!0,style:{flexGrow:0}},this.renderStepper(),m.a.createElement(ge.a,{classes:{root:o.dialogContentRoot}},(d||a)&&m.a.createElement(fe.a,{component:"div"},m.a.createElement(L.a,{severity:"error"}," ",this.renderError()," ")),"info"===t&&this.renderInfo(),"template"===t&&this.renderTemplate(),"confirm"===t&&this.renderConfirm()),this.renderButtons())):m.a.createElement(le.a,{fullWidth:s,maxWidth:c,fullScreen:!1,open:i,onClose:function(e,t){if("backdropClick"===t)return!1;l()},"aria-labelledby":"create-app-dialog",classes:{paper:o.dialogPaper}},m.a.createElement("form",{className:o.form,onSubmit:function(e){return e.preventDefault(),!1},noValidate:!0,style:{flexGrow:1}},m.a.createElement(ge.a,{classes:{root:o.dialogContentRoot2}},this.renderFlow())))}},{key:"renderFlow",value:function(){var e=this.state,t=e.step2,a=e.overallErrors,n=this.props,r=n.theme,o=n.classes,i=n.error;return m.a.createElement(w.a,{container:!0,spacing:1,style:{flexGrow:1,overflowY:"hidden"}},m.a.createElement(w.a,{item:!0,xs:8,style:{display:"flex",flexDirection:"column",overflowY:"hidden",flexGrow:1}},m.a.createElement("div",{className:o.contentArea},"name"===t&&this.renderName(),"domain"===t&&this.renderDomain(),"env"===t&&this.renderEnv(),"plan"===t&&this.renderPlan(),"template"===t&&this.renderTemplate2()),this.renderButtons()),m.a.createElement(w.a,{item:!0,xs:4,style:{position:"relative",backgroundImage:"url(".concat(ze.a,")"),overflowY:"hidden"}},this.renderFlowStep(),(i||a)&&m.a.createElement("div",{style:{position:"absolute",top:r.spacing(10),left:r.spacing(3),right:r.spacing(3)}},m.a.createElement(L.a,{severity:"error"}," ",this.renderError()," ")),m.a.createElement(z.a,{icon:this.getStepIcon(),fixedWidth:!0,className:o.flowIcon})))}},{key:"renderFlowStep",value:function(){var e=this.props,t=e.t,a=e.classes,n=this.state.step2;return"name"===n?m.a.createElement("div",{className:a.flowStep},m.a.createElement("div",null,m.a.createElement("strong",null,t("Step 1 of 5"))),m.a.createElement("div",null,t("App name"))):"domain"===n?m.a.createElement("div",{className:a.flowStep},m.a.createElement("div",null,m.a.createElement("strong",null,t("Step 2 of 5"))),m.a.createElement("div",null,t("Domain name"))):"env"===n?m.a.createElement("div",{className:a.flowStep},m.a.createElement("div",null,m.a.createElement("strong",null,t("Step 3 of 5"))),m.a.createElement("div",null,t("Environment location"))):"plan"===n?m.a.createElement("div",{className:a.flowStep},m.a.createElement("div",null,m.a.createElement("strong",null,t("Step 4 of 5"))),m.a.createElement("div",null,t("Pricing plan"))):"template"===n?m.a.createElement("div",{className:a.flowStep},m.a.createElement("div",null,m.a.createElement("strong",null,t("Step 5 of 5"))),m.a.createElement("div",null,t("Application template"))):void 0}},{key:"renderName",value:function(){var e=this.props,t=e.t,a=e.theme;return m.a.createElement("div",null,m.a.createElement(S.a,{component:"h1",variant:"h4",style:{marginBottom:a.spacing(1)}},t("Create your application")),m.a.createElement(S.a,{component:"h1",variant:"body1",style:{color:a.palette.text.disabled,marginBottom:a.spacing(2)}},m.a.createElement(b.a,{defaults:t("In Altogic, you work on apps. An app is your <bold>workspace</bold> that packages all required design and configuration elements to run your backend app services."),components:{bold:m.a.createElement("strong",null)}})),m.a.createElement(pe.a,{variant:"filled",color:"dark"===a.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"name",label:t("App name"),id:"name",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:t("Name of your application. You can always rename this later."),validate:this.validateName}))}},{key:"renderDomain",value:function(){var e=this.props,t=e.t,a=e.theme,n=e.classes,r=this.state,o=r.validatingSubdomain,i=r.validateSubdomainStatus,l=r.validateSubdomainMsg;return m.a.createElement("div",null,m.a.createElement(S.a,{component:"h1",variant:"h4",style:{marginBottom:a.spacing(1)}},t("Select your domain")),m.a.createElement(S.a,{component:"h1",variant:"body1",style:{color:a.palette.text.disabled,marginBottom:a.spacing(2)}},m.a.createElement(b.a,{defaults:t("Each application deployment has a <bold>base URL</bold> to access its exposed services. This base URL is prepended to the path of your app endpoints to make API calls. With the deployed cluster, the subdomain specifies the base URL of your app."),components:{bold:m.a.createElement("strong",null)}})),m.a.createElement(pe.a,{variant:"filled",color:"dark"===a.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"subdomain",label:t("Subdomain"),id:"subdomain",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:t("Unique subdomain of your application. Cluster will be automatically assigned."),InputProps:{startAdornment:m.a.createElement(Ee.a,{position:"start"},m.a.createElement("span",{className:Object(u.default)(n.body2,n.disabled)},"https://")),endAdornment:m.a.createElement(Ee.a,{position:"start"},m.a.createElement("span",{className:Object(u.default)(n.body2,n.disabled)},".",Q.a.subdomainSuffix))},onChange:this.onSubdomainChange,asyncValidate:o,asyncValidateStatus:i,asyncValidateMsg:l,validate:this.validateSubdomain}))}},{key:"renderEnv",value:function(){var e=this.props,t=e.t,a=e.theme,n=e.classes,r=Q.a.envLocations;return m.a.createElement("div",null,m.a.createElement(S.a,{component:"h1",variant:"h4",style:{marginBottom:a.spacing(1)}},t("Choose the deployment location")),m.a.createElement(S.a,{component:"h1",variant:"body1",style:{color:a.palette.text.disabled,marginBottom:a.spacing(2)}},m.a.createElement(b.a,{defaults:t("By defatul Altogic creates a new environment for each application. An environment is a space where your application data is stored and your application services are executed. Each environment is <bold>bound to a geographic location</bold>."),components:{bold:m.a.createElement("strong",null)}})),m.a.createElement(pe.a,{color:"dark"===a.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"location",label:t("Execution environment location"),component:xe.f,helperText:t("Physical location of your app servers and data"),validate:this.validateRequired},r.map((function(e){return m.a.createElement(J.a,{value:e.value,className:n.body2},e.name)}))))}},{key:"renderPlan",value:function(){var e=this.props,t=e.t,a=e.theme,n=e.classes,r=this.state,o=r.envPlans,i=r.methods,l=r.addingMethod;return m.a.createElement("div",null,m.a.createElement(S.a,{component:"h1",variant:"h4",style:{marginBottom:a.spacing(1)}},t("Select your pricing plan")),m.a.createElement(S.a,{component:"h1",variant:"body1",style:{color:a.palette.text.disabled,marginBottom:a.spacing(2)}},m.a.createElement(b.a,{defaults:t("You are charged per environment and by the amount of resource usage in each of these environments. By default you have <bold>2 free environments</bold> that you can use to develop your applications."),components:{bold:m.a.createElement("strong",null)}})),i&&0===i.length&&this.isPaidPlanSelected()&&m.a.createElement(L.a,{severity:"warning"},m.a.createElement(be.a,{className:n.body2},t("Your account has no payment methods")),m.a.createElement("div",null,t("You need to add a payment method for your account before creating an execution environment on a paid plan.")),m.a.createElement("div",{style:{marginTop:a.spacing(1)}},m.a.createElement(N.a,{variant:"contained",size:"small",disableElevation:!0,color:"primary",disabled:l,onClick:this.createPaymentMethodSession},l&&m.a.createElement(I.a,{size:16,className:n.progress}),t("Add payment method")))),m.a.createElement(pe.a,{color:"dark"===a.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"envPlanId",label:t("Execution environment pricing plan"),component:xe.f,helperText:t("Pricing plan that will be applied to the execution environment of your app"),validate:this.validateRequired},o.map((function(e){return m.a.createElement(J.a,{key:e._id,value:e._id,className:n.body2},e.title)}))))}},{key:"renderTemplate2",value:function(){var e=this.props,t=e.t,a=e.theme;return e.liveApp?m.a.createElement("div",null,m.a.createElement(S.a,{component:"h1",variant:"h4",style:{marginBottom:a.spacing(1)}},t("Copy app from marketplace")),m.a.createElement(S.a,{component:"h1",variant:"body1",style:{color:a.palette.text.disabled,marginBottom:a.spacing(2)}},m.a.createElement(b.a,{defaults:t("While creating your new app, Altogic will use the following application template from the app marketplace."),components:{bold:m.a.createElement("strong",null)}})),this.renderMarketplaceAppSummary()):m.a.createElement("div",null,m.a.createElement(S.a,{component:"h1",variant:"h4",style:{marginBottom:a.spacing(1)}},t("How do you want to start?")),m.a.createElement(S.a,{component:"h1",variant:"body1",style:{color:a.palette.text.disabled,marginBottom:a.spacing(2)}},m.a.createElement(b.a,{defaults:t("Choose a template below to instantly use it as the base for your application."),components:{bold:m.a.createElement("strong",null)}})),m.a.createElement("div",{style:{maxHeight:300,overflowY:"auto"}},this.renderTemplate(!1)))}},{key:"renderMarketplaceAppSummary",value:function(){var e=this.props,t=e.t,a=e.classes,n=e.theme,r=e.liveApp;return m.a.createElement("div",{style:{flexGrow:1,overflowY:"auto",overflowX:"hidden",paddingRight:n.spacing(1),minHeight:200}},m.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:n.spacing(3),marginBottom:n.spacing(2)}},m.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:n.spacing(1)}},m.a.createElement(P.a,{alt:t("logo"),src:r.logoUrl,variant:"rounded",style:{width:n.spacing(4),height:n.spacing(4)},className:a.appLogo2},!r.logoUrl&&m.a.createElement(z.a,{icon:Y.vb,fixedWidth:!0,className:a.active})),m.a.createElement("div",{className:a.appTitle},r.name))),m.a.createElement(w.a,{container:!0,spacing:2,style:{marginTop:n.spacing(2)}},m.a.createElement(w.a,{item:!0,xs:4},this.getModels(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getEndpoints(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getServices(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getFunctions(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getQueues(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getTasks(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getAppParams(r)),m.a.createElement(w.a,{item:!0,xs:4},this.getConnections(r))))}},{key:"getStepIcon",value:function(){switch(this.state.step2){case"name":return Y.U;case"domain":return Y.pb;case"env":return Y.Hb;case"plan":return Y.Qb;case"template":return Y.vb;default:return Y.U}}},{key:"renderError",value:function(){var e=this.state.overallErrors,t=this.props.error;return t?m.a.createElement(S.a,{component:"div",variant:"body2",color:"error"},t):e?m.a.createElement(S.a,{component:"div",variant:"body2",color:"error"},e.map((function(e,t){return m.a.createElement("div",{key:t},e)}))):null}},{key:"renderStepper",value:function(){var e=this.state.step,t=this.props,a=t.t,n=t.classes;return t.liveApp?m.a.createElement("div",{className:n.stepHolder},m.a.createElement("div",{className:Object(u.default)(n.step,"info"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("1. Define app info")))),m.a.createElement("div",{className:Object(u.default)(n.step)},m.a.createElement(z.a,{icon:q.c,fixedWidth:!0})),m.a.createElement("div",{className:Object(u.default)(n.step,"confirm"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("2. Confirm & create"))))):m.a.createElement("div",{className:n.stepHolder},m.a.createElement("div",{className:Object(u.default)(n.step,"info"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("1. Define app info")))),m.a.createElement("div",{className:Object(u.default)(n.step)},m.a.createElement(z.a,{icon:q.c,fixedWidth:!0})),m.a.createElement("div",{className:Object(u.default)(n.step,"template"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("2. Choose template")))),m.a.createElement("div",{className:Object(u.default)(n.step)},m.a.createElement(z.a,{icon:q.c,fixedWidth:!0})),m.a.createElement("div",{className:Object(u.default)(n.step,"confirm"===e?n.active:n.disabled)},m.a.createElement("div",{className:n.stepTitle},m.a.createElement("div",null,a("3. Confirm & create")))))}},{key:"renderInfo",value:function(){var e=this.state,t=e.validatingSubdomain,a=e.validateSubdomainStatus,n=e.validateSubdomainMsg,r=e.envPlans,o=e.methods,i=e.addingMethod,l=this.props,s=l.t,c=l.classes,p=l.theme,d=Q.a.envLocations;return m.a.createElement("div",null,m.a.createElement(pe.a,{variant:"filled",color:"dark"===p.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"name",label:s("App name"),id:"name",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:s("Name of your application"),validate:this.validateName}),m.a.createElement(pe.a,{variant:"filled",color:"dark"===p.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,name:"subdomain",label:s("Subdomain"),id:"subdomain",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:s("Unique subdomain of your application. Cluster will be automatically assigned."),InputProps:{startAdornment:m.a.createElement(Ee.a,{position:"start"},m.a.createElement("span",{className:Object(u.default)(c.body2,c.disabled)},"https://")),endAdornment:m.a.createElement(Ee.a,{position:"start"},m.a.createElement("span",{className:Object(u.default)(c.body2,c.disabled)},".",Q.a.subdomainSuffix))},onChange:this.onSubdomainChange,asyncValidate:t,asyncValidateStatus:a,asyncValidateMsg:n,validate:this.validateSubdomain}),m.a.createElement(pe.a,{color:"dark"===p.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"location",label:s("Execution environment location"),component:xe.f,helperText:s("Physical location of your app servers and data"),validate:this.validateRequired},d.map((function(e){return m.a.createElement(J.a,{value:e.value,className:c.body2},e.name)}))),o&&0===o.length&&this.isPaidPlanSelected()&&m.a.createElement(L.a,{severity:"warning"},m.a.createElement(be.a,{className:c.body2},s("Your account has no payment methods")),m.a.createElement("div",null,s("You need to add a payment method for your account before creating an execution environment on a paid plan.")),m.a.createElement("div",{style:{marginTop:p.spacing(1)}},m.a.createElement(N.a,{variant:"contained",size:"small",disableElevation:!0,color:"primary",disabled:i,onClick:this.createPaymentMethodSession},i&&m.a.createElement(I.a,{size:16,className:c.progress}),s("Add payment method")))),m.a.createElement(pe.a,{color:"dark"===p.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"envPlanId",label:s("Execution environment pricing plan"),component:xe.f,helperText:s("Pricing plan that will be applied to the execution environment of your app"),validate:this.validateRequired},r.map((function(e){return m.a.createElement(J.a,{key:e._id,value:e._id,className:c.body2},e.title)}))))}},{key:"renderTemplate",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this.state.appTemplateId,n=this.props,r=n.t,o=n.classes,i=n.theme,l=n.appTemplates;return m.a.createElement("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",overflowY:"hidden"}},m.a.createElement("div",{style:{flexGrow:1,overflowY:"auto",overflowX:"hidden"}},l.map((function(n){var l=e.isCollapsed(n._id);return m.a.createElement("div",{key:n._id,className:Object(u.default)(o.appTemplate,a===n._id?o.selected:null),onClick:function(){return e.setState({appTemplateId:n._id})}},m.a.createElement(P.a,{alt:r("logo"),src:n.logoUrl,variant:"rounded",style:{width:i.spacing(7),height:i.spacing(7)},className:o.appLogo}),m.a.createElement("div",{className:o.appTitleHolder},m.a.createElement("div",{className:o.appTitle},n.name),m.a.createElement("div",{className:o.appDesc},n.shortDesc,"\xa0",t&&m.a.createElement(_.a,{href:"#",onClick:function(t){t.preventDefault(),t.stopPropagation(),l?e.hideDetail(n._id):e.showDetail(n._id)}},r(l?"Hide details":"Show details"))),m.a.createElement(Le.a,{in:l},m.a.createElement(Me.a,{children:n.details,remarkPlugins:[We.a],className:o.details}))),m.a.createElement("div",{className:Object(u.default)(o.appSelection,a!==n._id?o.hidden:null)},m.a.createElement(z.a,{icon:q.b,fixedWidth:!0})))}))))}},{key:"renderConfirm",value:function(){var e=this.state.appTemplateId,t=this.props,a=t.t,n=t.classes,r=t.theme,o=t.formValues,i=t.appTemplates,l=t.liveApp,s=i.find((function(t){return t._id===e}));return l&&(s=l),m.a.createElement("div",{style:{flexGrow:1,overflowY:"auto",overflowX:"hidden",paddingRight:r.spacing(1),minHeight:350}},m.a.createElement(ke.a,{text:a("Altogic will create"),noMargin:!0}),m.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:r.spacing(3),marginBottom:r.spacing(1)}},m.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:r.spacing(1),borderRadius:r.shape.borderRadius,backgroundColor:"light"===r.palette.type?r.palette.primary.bgColor:r.palette.action.hover}},m.a.createElement("div",{className:n.appTitle},o.name),m.a.createElement("div",{className:n.appDesc},o.shortDesc))),m.a.createElement(ke.a,{text:a("Using the following template"),noMargin:!0}),m.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:r.spacing(3),marginBottom:r.spacing(2)}},m.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:r.spacing(1),borderRadius:r.shape.borderRadius,backgroundColor:"light"===r.palette.type?r.palette.primary.bgColor:r.palette.action.hover}},m.a.createElement(P.a,{alt:a("logo"),src:s.logoUrl,variant:"rounded",style:{width:r.spacing(4),height:r.spacing(4)},className:n.appLogo2}),m.a.createElement("div",{className:n.appTitle},s.name))),m.a.createElement(w.a,{container:!0,spacing:2,style:{marginTop:r.spacing(2)}},m.a.createElement(w.a,{item:!0,xs:4},this.getModels(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getEndpoints(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getServices(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getFunctions(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getQueues(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getTasks(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getAppParams(s)),m.a.createElement(w.a,{item:!0,xs:4},this.getConnections(s))),s.stats.appParamCount>0&&m.a.createElement("div",{style:{marginTop:r.spacing(3)}},m.a.createElement(L.a,{severity:"warning"},m.a.createElement(b.a,{defaults:a("The selected app template has <bold>%s app param(s)</bold>. After creating your app, you can set their values from the <bold>Application Settings</bold> view. Your app might not function properly if you do not set their values.").sprintf(s.stats.appParamCount),components:{bold:m.a.createElement("strong",null)}}))))}},{key:"getModels",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=e.stats.modelPermanentCount+e.stats.modelTransientCount===0?a("No models"):e.stats.modelPermanentCount+e.stats.modelTransientCount===1?a("1 model"):a("%s models").sprintf(e.stats.modelPermanentCount+e.stats.modelTransientCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.gb,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getEndpoints",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.endpointCount?a("No endpoints"):1===e.stats.endpointCount?a("1 endpoint"):a("%s endpoints").sprintf(e.stats.endpointCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.sc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getServices",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.serviceCount?a("No services"):1===e.stats.serviceCount?a("1 service"):a("%s services").sprintf(e.stats.serviceCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.Fc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getQueues",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.queueCount?a("No queues"):1===e.stats.queueCount?a("1 queue"):a("%s queues").sprintf(e.stats.queueCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.hc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getTasks",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.taskCount?a("No tasks"):1===e.stats.taskCount?a("1 task"):a("%s tasks").sprintf(e.stats.taskCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.a,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getAppParams",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.appParamCount?a("No app params"):1===e.stats.appParamCount?a("1 app param"):a("%s app params").sprintf(e.stats.appParamCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.jc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getConnections",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.externalConnCount?a("No connections"):1===e.stats.externalConnCount?a("1 connection"):a("%s connections").sprintf(e.stats.externalConnCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.uc,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"getFunctions",value:function(e){var t=this.props,a=t.t,n=t.theme,r=null;return r=0===e.stats.functionCount||void 0===e.stats.functionCount?a("No functions"):1===e.stats.functionCount?a("1 function"):a("%s functions").sprintf(e.stats.functionCount),m.a.createElement("div",{style:{textAlign:"left"}},m.a.createElement(z.a,{icon:H.V,fixedWidth:!0,style:{marginRight:n.spacing(1)}}),r)}},{key:"renderButtons",value:function(){var e=this.state,t=e.step,a=e.step2,n=e.envPlans,r=this.props,o=r.submitting,i=r.classes,l=r.t,s=r.width,c=r.handleSubmit;r.liveApp;return"xs"===s||"sm"===s?m.a.createElement(ve.a,{className:i.dialogActions},m.a.createElement("div",{className:i.leftAction},m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},l("Cancel"))),"info"!==t&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.takePrevAction},l("Previous")),"confirm"!==t&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,color:"primary",onClick:this.takeNextAction,disabled:this.isDisabled()||0===n.length},l("Next")),"confirm"===t&&m.a.createElement(N.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",disabled:o||this.isDisabled()||0===n.length},o&&m.a.createElement(I.a,{size:20,className:i.progress}),l("Create"))):m.a.createElement(ve.a,{className:i.dialogActions},m.a.createElement("div",{className:i.leftAction},m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},l("Cancel"))),"name"!==a&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.takePrevAction},l("Previous")),"template"!==a&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,color:"primary",onClick:this.takeNextAction,disabled:this.isDisabled()||"plan"===a&&0===n.length},l("Next")),"template"===a&&m.a.createElement(N.a,{variant:"contained",disableElevation:!0,color:"primary",onClick:c(this.onSubmit),disabled:o||this.isDisabled()||0===n.length},o&&m.a.createElement(I.a,{size:20,className:i.progress}),l("Create")))}},{key:"isDisabled",value:function(){var e=this.state,t=e.step,a=e.step2,n=e.appTemplateId,r=e.validateSubdomainStatus,o=e.validatingSubdomain,i=e.needsValidation,l=e.methods,s=this.props,c=s.formErrors,p=s.formValues,d=s.width;if("xs"===d||"sm"===d)switch(t){case"info":if(c&&(c.name||c.subdomain))return!0;if(p&&(!p.name||!p.subdomain))return!0;if("success"!==r||o||i)return!0;if(this.isPaidPlanSelected()&&(!l||0===l.length))return!0;break;case"template":if(!n)return!0;break;default:return!1}else switch(a){case"name":case"domain":case"env":if(c&&(c.name||c.subdomain))return!0;if(p&&(!p.name||!p.subdomain))return!0;if("success"!==r||o||i)return!0;break;case"plan":if(this.isPaidPlanSelected()&&(!l||0===l.length))return!0;break;case"template":if(!n)return!0;break;default:return!1}return!1}}]),a}(m.a.PureComponent);He.defaultProps={appTemplates:[],callback:null,liveApp:null};function Ge(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}var qe=Object(ue.g)(Object(f.b)((function(e,t){var a={name:"",subdomain:"",location:"",envPlanId:"",appTemplateId:null},n=null,r=new URLSearchParams(t.location.search),o=r.get("use_session"),i=r.get("initiator");if("true"===o&&"app-create"===i){var l=window.sessionStorage.getItem("app-create-values");if(l){var s=JSON.parse(l);n=s.liveApp,delete s.step2,delete s.liveApp,a=s}}return n?{user:e.user,liveApp:n,initialValues:a,formValues:Object(de.a)("createApp")(e),formErrors:Object(ye.a)("createApp")(e)}:{user:e.user,initialValues:a,formValues:Object(de.a)("createApp")(e),formErrors:Object(ye.a)("createApp")(e)}}),{createAppAction:we.B,validateSubdomainAction:we.bg,getEnvPlansAction:we.Kc,getUserMethodsAction:we.Jd,createPaymentMethodSessionAction:we.U,getDefaultEngineCluster:we.yc})(Object(me.a)({form:"createApp",enableReinitialize:!0})(Object(x.a)()(Object(v.a)((function(e){return{dialogPaper:{minHeight:"560px",maxHeight:"560px"},progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},dialogContentRoot:{"&:first-child":{paddingTop:8},flexGrow:1,display:"flex",flexDirection:"column",overflowY:"hidden"},dialogContentRoot2:{"&:first-child":{paddingTop:0},margin:0,padding:0,flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",alignItems:"stretch"},form:{display:"flex",flexDirection:"column",overflowY:"hidden"},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),flexShrink:0},body2:{fontSize:e.typography.body2.fontSize},stepHolder:{display:"flex",alignItems:"center",justifyContent:"space-around",padding:e.spacing(2,3),marginBottom:e.spacing(1),backgroundColor:e.palette.background.layer3},step:{fontSize:e.typography.body1.fontSize,fontWeight:500},stepTitle:{display:"flex",flexDirection:"column",alignItems:"center"},active:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},disabled:{color:e.palette.text.disabled},stepCircle:{height:e.spacing(4),width:e.spacing(4),display:"flex",justifyContent:"center",alignItems:"center"},activeCircle:{color:e.palette.primary.main},disabledCircle:{color:e.palette.text.disabled},pageTitle:{fontSize:e.typography.body1.fontSize,textAlign:"center",marginBottom:e.spacing(3)},leftAction:{flexGrow:1},appTemplate:{display:"flex",padding:e.spacing(1,2),marginRight:e.spacing(1),marginBottom:e.spacing(1),borderRadius:e.shape.borderRadius,border:"1px solid",borderColor:e.palette.divider,"&:hover":{cursor:"pointer",backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover}},selected:{borderColor:e.palette.primary.main,backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover},appLogo:{flexShrink:0,marginRight:e.spacing(2)},appLogo2:{flexShrink:0,marginRight:e.spacing(1)},appTitleHolder:{flexGrow:1,display:"flex",flexDirection:"column"},appTitle:{fontSize:e.typography.body2.fontSize,fontWeight:500,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},appDesc:{color:e.palette.text.disabled,whiteSpace:"normal",wordWrap:"break-word",fontSize:e.typography.caption.fontSize},appSelection:{flexShrink:0,fontSize:e.typography.h5.fontSize,color:e.palette.primary.main},hidden:{visibility:"hidden"},noPadding:{padding:0},details:{marginTop:e.spacing(1),color:e.palette.text.secondary,wordWrap:"break-word",fontSize:e.typography.caption.fontSize,whiteSpace:"pre-wrap"},lockedIcon:{color:e.palette.warning.main,marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},icon:{marginRight:e.spacing(.5)},contentArea:{flexGrow:1,flexShrink:0,paddingLeft:e.spacing(10),paddingRight:e.spacing(10),paddingTop:e.spacing(5),paddingBottom:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},flowIcon:{fontSize:160,color:"#eeeeee",bottom:e.spacing(5),right:e.spacing(3),position:"absolute"},flowStep:{color:"#eeeeee",position:"absolute",top:e.spacing(3),left:e.spacing(3)}}}),{withTheme:!0})(Object(y.a)()(He)))))),Ye=a(613),Ve=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleTabChange=function(e,t){n.setState({activeTab:t})},n.validateName=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be max {{length}} characters long.",{length:Q.a.maxMicroTxtLength}),{max:Q.a.maxMicroTxtLength}).validate(e)},n.validateDescription=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.optional).add(a.textLength,t("Can be max {{length}} chars long.",{length:Q.a.maxLongTxtLength}),{max:Q.a.maxLongTxtLength}).validate(e)},n.validateDetails=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.optional).add(a.textLength,t("Can be max {{length}} chars long.",{length:Q.a.maxDetailTxtLength}),{max:Q.a.maxDetailTxtLength}).validate(e)},n.onClose=function(){var e=n.props,t=e.reset;(0,e.handleClose)(),t()},n.onSubmit=function(e){var t=n.props,a=t.reset,i=t.handleClose,l=t.editAppAction,s=t.user,c=t.app,p=t.match;return new Promise(function(){var t=Object(o.a)(r.a.mark((function t(n,o){var d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(p.params.userId,s.token,c._id,e);case 2:200===(d=t.sent).status?(n(),i(),a()):o(new ce.a(d.reduxForm));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},n.state={activeTab:"0"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,n=e.theme,r=e.open,o=e.handleClose,i=e.fullWidth,l=e.maxWidth,s=e.handleSubmit,c=e.submitting,p=e.error,d=e.width,u=this.state.activeTab;return m.a.createElement(le.a,{fullWidth:i,maxWidth:l,fullScreen:"xs"===d,open:r,onClose:function(e,t){if("backdropClick"===t)return!1;o()},"aria-labelledby":"edit-app-dialog",classes:{paper:t.dialogPaper}},m.a.createElement(he.a,{id:"edit-app-dialog"},m.a.createElement(S.a,{component:"span",variant:"h6"},a("Edit app")),m.a.createElement(T.a,{"aria-label":"close",className:t.closeButton,onClick:this.onClose},m.a.createElement(z.a,{icon:G.x,className:t.closeButtonIcon}))),m.a.createElement("form",{onSubmit:s(this.onSubmit),noValidate:!0,className:t.dialogForm,style:{flexGrow:"xs"===d?0:1}},m.a.createElement(ge.a,{classes:{root:t.dialogContentRoot},className:t.dialogContent},p&&m.a.createElement(fe.a,{component:"div"},m.a.createElement(L.a,{severity:"error"}," ",this.renderError()," ")),m.a.createElement(M.a,{value:u,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},m.a.createElement(W.a,{value:"0",label:m.a.createElement("div",{className:t.tabTextWrapper},m.a.createElement(z.a,{icon:H.Wb,className:t.tabIcon}),m.a.createElement("span",null,a("Main")))}),m.a.createElement(W.a,{value:"1",label:m.a.createElement("div",{className:t.tabTextWrapper},m.a.createElement(z.a,{icon:H.Ub,className:t.tabIcon}),a("Details"))})),"0"===u&&m.a.createElement("div",null,m.a.createElement(pe.a,{variant:"filled",color:"dark"===n.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,autoFocus:!0,name:"name",label:a("App name"),id:"name",component:xe.g,autoComplete:"off",inputProps:{maxLength:Q.a.maxMicroTxtLength},helperText:a("Name of your application"),validate:this.validateName}),m.a.createElement(pe.a,{variant:"filled",color:"dark"===n.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,name:"shortDesc",label:a("Short description"),id:"shortDesc",component:xe.g,autoComplete:"off",multiline:!0,rows:6,inputProps:{maxLength:Q.a.maxLongTxtLength},helperText:a("Provide short description of your app"),validate:this.validateDescription})),"1"===u&&m.a.createElement("div",null,m.a.createElement(pe.a,{variant:"filled",color:"dark"===n.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,name:"details",label:a("App details"),id:"details",component:xe.g,autoComplete:"off",multiline:!0,rows:15,inputProps:{maxLength:Q.a.maxDetailTxtLength},validate:this.validateDetails,helperText:m.a.createElement(b.a,{defaults:a("Provide more details about what your application does. You can use <bold>markdown notation</bold> when defining your app details."),components:{bold:m.a.createElement("strong",null)}})}))),m.a.createElement(ve.a,{className:t.dialogActions},m.a.createElement(N.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",disabled:c},c&&m.a.createElement(I.a,{size:20,className:t.progress}),a("OK")),m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},a("Cancel")))))}},{key:"renderError",value:function(){var e=this.props.error;return e?m.a.createElement(S.a,{component:"div",variant:"body2",color:"error"},e):null}}]),a}(m.a.PureComponent),Ue=Object(ue.g)(Object(f.b)((function(e,t){return{user:e.user,initialValues:t.app}}),{editAppAction:we.ac})(Object(me.a)({form:"editApp",enableReinitialize:!0})(Object(x.a)()(Object(v.a)((function(e){return{dialogPaper:{minHeight:"540px"},dialogForm:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap"},dialogContent:{flexGrow:1},dialogContentRoot:{"&:first-child":{paddingTop:8}},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},tabTextWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},tabIcon:{marginRight:e.spacing(1),width:"18px",height:"18px",minWidth:"18px"},tabPanel:{flexGrow:1,paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:0,paddingRight:0,margin:0},body2:{fontSize:e.typography.body2.fontSize}}}),{withTheme:!0})(Object(y.a)()(Ve)))))),Ke=a(578),Xe=a(614),Je=a(396),Qe=a(621),$e=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderEnvPlan=function(e){var t=e.fields,a=n.props,r=a.t,o=a.theme,i=a.classes,l=a.dialogData;return t.map((function(e,t){return m.a.createElement(m.a.Fragment,{key:t},m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(pe.a,{variant:"filled",color:"dark"===o.palette.type?"secondary":"primary",margin:"dense",fullWidth:!0,required:!0,name:"".concat(e,".name"),label:r("Environment"),component:xe.g,validate:n.validateName})),m.a.createElement(w.a,{item:!0,xs:6},m.a.createElement(pe.a,{color:"dark"===o.palette.type?"secondary":"primary",variant:"filled",margin:"dense",fullWidth:!0,required:!0,name:"".concat(e,".planId"),label:r("Pricing plan"),component:xe.f,validate:n.validateRequired},l.envPlans.map((function(e){return m.a.createElement(J.a,{key:e._id,value:e._id,className:i.body2},e.title)})))))}))},n.validateName=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).add(a.bail).add(a.textLength,t("Can be max {{length}} characters long.",{length:Q.a.maxMicroTxtLength}),{max:Q.a.maxMicroTxtLength}).validate(e)},n.validateRequired=function(e){var t=n.props.t,a=new xe.a;return a.add(a.trim).add(a.required,t("Required field, cannot be left empty.")).validate(e)},n.onClose=function(){var e=n.props,t=e.reset;(0,e.handleClose)(),t()},n.onSubmit=function(e){var t=n.state.methods,a=n.props,i=a.t,l=a.reset,s=a.handleClose,c=a.user,p=a.callback,d=a.dialogData,m=a.acceptTransferAction,u=a.getUserAction,h=a.getUserAppsAction;return new Promise(function(){var a=Object(o.a)(r.a.mark((function a(o,g){var f,v,b;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.isPaidPlanSelected()||0!==t.length){a.next=3;break}return g(new ce.a({_error:i("A valid payment method needs to be added to the account")})),a.abrupt("return");case 3:for(f=function(t){var a=e.envPlans[t],n=d.envPlans.find((function(e){return e._id===a.planId}));a.isFreePlan=n.isFreePlan},v=0;v<e.envPlans.length;v++)f(v);return a.next=7,m(c._id,c.token,d.app._id,{transfer:d.transfer,collaborator:d.collaborator,app:d.app,user:d.user,adjustedEnvPlans:e.envPlans});case 7:if(200!==(b=a.sent).status){a.next=19;break}return a.next=11,u(c._id,c.token);case 11:return a.next=13,h(c._id,c.token);case 13:o(),s(),l(),p&&p(d.app.name),a.next=20;break;case 19:g(new ce.a(b.reduxForm));case 20:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},n.isPaidPlanSelected=function(){var e=n.props,t=e.formValues,a=e.dialogData;if(t&&t.envPlans){for(var r=function(e){var n=t.envPlans[e],r=a.envPlans.find((function(e){return e._id===n.planId}));if(r&&!r.isFreePlan)return{v:!0}},o=0;o<t.envPlans.length;o++){var i=r(o);if("object"===typeof i)return i.v}return!1}},n.createPaymentMethodSession=Object(o.a)(r.a.mark((function e(){var t,a,o,l,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.user,o=t.formValues,l=t.createPaymentMethodSessionAction,n.setState({addingMethod:!0}),s=Object(i.a)({},o),window.sessionStorage.setItem("app-transfer-values",JSON.stringify(s)),e.next=6,l(a._id,a.token,{initiator:"app-transfer"});case 6:c=e.sent,n.setState({addingMethod:!1}),200===c.status&&(window.location.href=c.data.url);case 9:case"end":return e.stop()}}),e)}))),n.state={methods:null,addingMethod:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.getUserMethodsAction,n=t.match,o=t.user,e.next=3,a(n.params.userId,o.token);case 3:i=e.sent,this.setState({methods:i.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.methods,a=e.addingMethod,n=this.props,r=n.classes,o=n.t,i=n.theme,l=n.open,s=n.handleClose,c=n.fullWidth,p=n.maxWidth,d=n.handleSubmit,u=n.submitting,h=n.error,g=n.dialogData,f=n.width;return m.a.createElement(le.a,{fullScreen:"xs"===f,fullWidth:c,maxWidth:p,open:l,onClose:function(e,t){if("backdropClick"===t)return!1;s()},classes:{paper:"xs"===f?null:r.dialogPaper}},m.a.createElement(he.a,null,m.a.createElement(S.a,{component:"span",variant:"h6"},o("Select environment pricing plans")),m.a.createElement(T.a,{"aria-label":"close",className:r.closeButton,onClick:this.onClose},m.a.createElement(z.a,{icon:G.x,className:r.closeButtonIcon}))),m.a.createElement("form",{className:r.dialogForm,onSubmit:d(this.onSubmit),noValidate:!0},m.a.createElement(ge.a,{classes:{root:r.dialogContentRoot}},h&&m.a.createElement(fe.a,{component:"div"},m.a.createElement(L.a,{severity:"error"}," ",this.renderError()," ")),m.a.createElement(L.a,{severity:"info"},m.a.createElement(b.a,{defaults:o("You are about to complate transfer ownerhip of app named <bold>%s</bold>. As a final step you need to select the pricing plans that will be applied to the transferred app execution environments.").sprintf(g.app.name),components:{bold:m.a.createElement("strong",null)}})),t&&0===t.length&&this.isPaidPlanSelected()&&m.a.createElement(L.a,{severity:"warning",style:{marginTop:i.spacing(1)}},m.a.createElement(be.a,{className:r.body2},o("Your account has no payment methods")),m.a.createElement("div",null,o("You need to add a payment method for your account before creating an execution environment on a paid plan.")),m.a.createElement("div",{style:{marginTop:i.spacing(1)}},m.a.createElement(N.a,{variant:"contained",size:"small",disableElevation:!0,color:"primary",disabled:a,onClick:this.createPaymentMethodSession},a&&m.a.createElement(I.a,{size:16,className:r.progress}),o("Add payment method")))),m.a.createElement("div",{className:r.contentRow},m.a.createElement("div",null,m.a.createElement(b.a,{defaults:o("<bold>%s</bold> execution environments:").sprintf(g.app.name),components:{bold:m.a.createElement("strong",null)}})),m.a.createElement(w.a,{container:!0,spacing:1},m.a.createElement(Qe.a,{name:"envPlans",component:this.renderEnvPlan}),";"))),m.a.createElement(ve.a,{className:r.dialogActions},m.a.createElement(N.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",disabled:u||!t},u&&m.a.createElement(I.a,{size:20,className:r.progress}),o("Transfer app")),m.a.createElement(N.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},o("Cancel")))))}},{key:"renderError",value:function(){var e=this.props.error;return e?m.a.createElement(S.a,{component:"div",variant:"body2",color:"error"},e):null}}]),a}(m.a.PureComponent),Ze=Object(ue.g)(Object(f.b)((function(e,t){var a={envPlans:t.dialogData.transferredAppEnvs.map((function(e){return{envId:e._id,name:e.name,region:e.region,location:e.location,planId:e.planId._id,isFreePlan:e.planId.isFreePlan}}))},n=new URLSearchParams(t.location.search),r=n.get("use_session"),o=n.get("initiator");if("true"===r&&"app-transfer"===o){var i=window.sessionStorage.getItem("app-transfer-values");i&&(a=JSON.parse(i))}return{user:e.user,initialValues:a,formValues:Object(de.a)("selectEnvPlans")(e)}}),{getUserAction:we.Gd,getUserAppsAction:we.Hd,acceptTransferAction:we.b,getUserMethodsAction:we.Jd,createPaymentMethodSessionAction:we.U})(Object(me.a)({form:"selectEnvPlans",enableReinitialize:!0})(Object(x.a)()(Object(v.a)((function(e){return{dialogPaper:{minHeight:"500px",maxHeight:"620px",overflowY:"hidden"},progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},dialogContentRoot:{"&:first-child":{paddingTop:e.spacing(1)},display:"flex",flexDirection:"column",flexGrow:1,overflowY:"hidden"},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},dialogForm:{display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",overflowY:"hidden",flexGrow:1},contentRow:{marginTop:e.spacing(2),flexGrow:1,overflowY:"auto",overflowX:"hidden",paddingRight:e.spacing(1)},bold:{fontWeight:500},mrhalf:{marginRight:e.spacing(.5)},body2:{fontSize:e.typography.body2.fontSize}}}),{withTheme:!0})(Object(y.a)()($e)))))),et=a(672),tt=a(381),at=a(110),nt=a(133),rt=a.n(nt),ot=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={stage:null,totalCount:0,count:0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,c,p,d,m,u,h,g,f,v,b,y,E,x,w,k,S,A,C;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.t,n=t.authActionGroup,o=t.user,i=t.app,l=t.refreshAppAction,s=t.getAppTeamAction,c=t.getEligibleSnapshotAction,p=t.getSnapshotsAction2,d=t.getModelsAction,m=t.getServicesAction,u=t.getQueuesAction,h=t.getTasksAction,g=t.getEndpointsAction,f=t.getEnvsAction,v=t.getCodeFunctionsAction,b=t.refreshAppsAction,y=t.handleClose,E=t.callback,x=t.snapshot,w=null,k=x,S=n(["view-snapshots","view-models","view-services","view-tasks","view-endpoints","view-envs","view-queues"],{app:i}),A=2,1===S["view-snapshots"]&&A++,1===S["view-models"]&&A++,1===S["view-services"]&&(A+=2),1===S["view-endpoints"]&&A++,1===S["view-envs"]&&A++,1===S["view-tasks"]&&A++,1===S["view-queues"]&&A++,this.setState({totalCount:A}),C=1,this.setState({stage:a("Identifying snapshot"),totalCount:A,count:C++}),null!==k){e.next=22;break}return e.next=18,c(o._id,o.token,i._id);case 18:200===(w=e.sent).status&&(k=w.data),e.next=23;break;case 22:Object(we.Je)(k);case 23:return this.setState({stage:a("Loading app"),count:C++}),e.next=26,s(o._id,o.token,i._id);case 26:if(1!==S["view-snapshots"]){e.next=30;break}return this.setState({stage:a("Loading snapshots"),count:C++}),e.next=30,p(o._id,o.token,i._id);case 30:if(1!==S["view-models"]||!k){e.next=34;break}return this.setState({stage:a("Loading models"),count:C++}),e.next=34,d(o._id,o.token,i._id,k._id);case 34:if(1!==S["view-services"]||!k){e.next=38;break}return this.setState({stage:a("Loading no-code services"),count:C++}),e.next=38,m(o._id,o.token,i._id,k._id);case 38:if(1!==S["view-services"]||!k){e.next=42;break}return this.setState({stage:a("Loading full-code services"),count:C++}),e.next=42,v(o._id,o.token,i._id);case 42:if(1!==S["view-queues"]||!k){e.next=46;break}return this.setState({stage:a("Loading message queues"),count:C++}),e.next=46,h(o._id,o.token,i._id,k._id);case 46:if(1!==S["view-tasks"]||!k){e.next=50;break}return this.setState({stage:a("Loading tasks"),count:C++}),e.next=50,u(o._id,o.token,i._id,k._id);case 50:if(1!==S["view-endpoints"]||!k){e.next=54;break}return this.setState({stage:a("Loading endpoints"),count:C++}),e.next=54,g(o._id,o.token,i._id,k._id);case 54:if(1!==S["view-envs"]){e.next=58;break}return this.setState({stage:a("Loading environments"),count:C++}),e.next=58,f(o._id,o.token,i._id);case 58:y(),l(i),E(i,x||w),b();case 62:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wait",value:function(){return new Promise(function(){var e=Object(o.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return t()}),50);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.state,t=e.stage,a=e.totalCount,n=e.count,r=this.props,o=r.classes,i=r.theme,l=r.open,s=r.handleClose;return m.a.createElement(le.a,{fullScreen:!0,open:l,onClose:function(e,t){if("backdropClick"===t)return!1;s()},disableEscapeKeyDown:!0},m.a.createElement("div",{className:o.loader},m.a.createElement("div",{className:o.components},m.a.createElement("img",{src:rt.a,alt:"Altogic",className:o.logo}),m.a.createElement("div",{className:o.spinnerCircle},m.a.createElement("span",null,n,"/",a),m.a.createElement(I.a,{size:i.spacing(10),color:"primary",className:o.spinner})),m.a.createElement("div",{className:o.stage},t))))}}]),a}(m.a.PureComponent);ot.defaultProps={app:null,open:null,handleClose:null,callback:null,snapshot:null};var it=Object(f.b)((function(e){return{user:e.user}}),{authActionGroup:at.b,getEligibleSnapshotAction:we.Bc,refreshAppAction:we.Zd,getAppTeamAction:we.pc,getSnapshotsAction2:we.Ad,getModelsAction:we.ad,getServicesAction:we.sd,getQueuesAction:we.jd,getTasksAction:we.Ed,getEndpointsAction:we.Dc,getEnvsAction:we.Mc,getCodeFunctionsAction:we.xc,setActiveSnapshotAction:we.Je,refreshAppsAction:we.ae})(Object(v.a)((function(e){return{loader:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",flexGrow:1},components:{width:300,display:"flex",flexDirection:"column",alignItems:"center"},spinnerCircle:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",fontSize:e.typography.h6.fontSize,fontWeight:700,width:e.spacing(10),height:e.spacing(10),borderRadius:e.spacing(5)},spinner:{position:"absolute",left:"0"},stage:{marginTop:e.spacing(3),fontSize:e.typography.h6.fontSize,fontWeight:400},logo:{width:"60px",height:"60px",marginLeft:"auto",marginRight:"auto",display:"block",marginBottom:e.spacing(2)}}}),{withTheme:!0})(Object(y.a)()(ot))),lt=a(16),st=a(577),ct=(a(576),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n,s,c;return Object(l.a)(this,a),(c=t.call(this,e)).handleSnackClose=function(){c.setState({showAppInviteAccepted:!1,appInviteMessage:null})},c.handleSnackClose2=function(){c.setState({showAppTransferAccepted:!1,appTransferMessage:null})},c.showToolBarMenu=function(e){c.setState({anchorEl:e.currentTarget})},c.closeToolBarMenu=function(){c.setState({anchorEl:null})},c.focusSearch=function(){c.setState({searchFocused:!0})},c.unFocusSearch=function(){c.setState({searchFocused:!1})},c.showRepoAppToolBarMenu=function(e){c.setState({anchorRepoAppEl:e.currentTarget})},c.closeRepoAppToolBarMenu=function(){c.setState({anchorRepoAppEl:null})},c.showRepoNodeToolBarMenu=function(e){c.setState({anchorRepoNodeEl:e.currentTarget})},c.closeRepoNodeToolBarMenu=function(){c.setState({anchorRepoNodeEl:null})},c.focusRepoAppSearch=function(){c.setState({repoAppSearchFocused:!0})},c.unFocusRepoAppSearch=function(){c.setState({repoAppSearchFocused:!1})},c.focusRepoNodeSearch=function(){c.setState({repoNodeSearchFocused:!0})},c.unFocusRepoNodeSearch=function(){c.setState({repoNodeSearchFocused:!1})},c.searchApp=function(e){c.setState({searchStr:e.target.value})},c.searchRepoApp=function(e){c.setState({repoAppSearchStr:e.target.value})},c.searchRepoNode=function(e){c.setState({repoNodeSearchStr:e.target.value})},c.setFilterType=function(e){c.closeToolBarMenu(),c.setState({filterType:e})},c.setSortType=function(e){c.closeToolBarMenu(),Object(lt.m)("appSortType",e),c.setState({sortType:e})},c.setRepoAppSortType=function(e){c.closeRepoAppToolBarMenu(),Object(lt.m)("repoAppSortType",e),c.setState({repoAppSortType:e})},c.setRepoNodeSortType=function(e){c.closeRepoNodeToolBarMenu(),Object(lt.m)("repoNodeSortType",e),c.setState({repoNodeSortType:e})},c.showCreateAppDialog=function(){c.setState({openCreateAppDialog:!0})},c.hideCreateAppDialog=function(){window.sessionStorage.removeItem("app-create-values"),c.setState({openCreateAppDialog:!1,liveApp:null})},c.showCreateRepoAppDialog=function(){c.setState({openCreateRepoAppDialog:!0})},c.hideCreateRepoAppDialog=function(){window.sessionStorage.removeItem("app-create-values"),c.setState({openCreateRepoAppDialog:!1,selectedRepoApp:null})},c.showCreateMarketAppDialog=function(){c.setState({openCreateMarketAppDialog:!0})},c.hideCreateMarketAppDialog=function(){window.sessionStorage.removeItem("app-create-values"),c.setState({openCreateMarketAppDialog:!1,selectedMarketApp:null})},c.hideGetStartedDialog=function(){var e=c.props,t=e.user,a=e.saveUIPreferencesAction,n=e.updateUIPreferencesAction,r=Object(i.a)(Object(i.a)({},t.uiPreferences),{},{showWelcome:!1});window.sessionStorage.removeItem("app-create-values"),c.setState({openGetStartedDialog:!1,openCreateAppDialog:!1,liveApp:null}),n(t._id,r),a(t._id,t.token,r)},c.showDeleteAppDialog=function(){var e=c.state.selectedApp;c.setState({openDeleteAppDialog:!0,appAnchorEl:null,appForDialog:e,selectedApp:null})},c.hideDeleteAppDialog=function(){c.setState({openDeleteAppDialog:!1,appForDialog:null})},c.showEditAppDialog=function(){var e=c.state.selectedApp;c.setState({openEditAppDialog:!0,appAnchorEl:null,appForDialog:e,selectedApp:null})},c.hideEditAppDialog=function(){c.setState({openEditAppDialog:!1,appForDialog:null})},c.showSnapshotDialog=function(){var e=c.state.selectedApp;c.setState({openSnapshotDialog:!0,appAnchorEl:null,appForDialog:e,selectedApp:null})},c.hideSnapshotDialog=function(){c.setState({openSnapshotDialog:!1})},c.showInviteDialog=function(){var e=c.state.selectedApp;c.setState({openInviteDialog:!0,appAnchorEl:null,appForDialog:e,selectedApp:null})},c.hideInviteDialog=function(){c.setState({openInviteDialog:!1,appForDialog:null})},c.showAppContextMenu=function(e,t,a){c.setState({appAnchorEl:e.currentTarget,selectedApp:t,selectedAppisOwner:a})},c.closeAppContextMenu=function(){c.setState({appAnchorEl:null,selectedApp:null,selectedAppisOwner:!1})},c.openDesigner=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c._unmounted){e.next=2;break}return e.abrupt("return");case 2:c.setState({showAppLoader:!0,appForDialog:t,callback:c.openDesignerCallback});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.openDesignerCallback=function(e,t){var a=c.props,n=a.t,r=a.user,o=a.history,i=(0,a.authActionGroup)(["view-snapshots","view-models","view-services","view-tasks","view-queues","view-endpoints","view-envs","manage-app-settings"],{app:e});if(200===t.status){if("home"===r.uiPreferences.defaultView)return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/home"));if("model"===r.uiPreferences.defaultView&&1===i["view-models"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/models"));if("service"===r.uiPreferences.defaultView&&1===i["view-services"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/services"));if("queue"===r.uiPreferences.defaultView&&1===i["view-queues"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/queues"));if("task"===r.uiPreferences.defaultView&&1===i["view-tasks"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/tasks"));if("endpoint"===r.uiPreferences.defaultView&&1===i["view-endpoints"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/endpoints"));if("env"===r.uiPreferences.defaultView&&1===i["view-envs"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/envs"));if("snap"===r.uiPreferences.defaultView&&1===i["view-snapshots"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps"));if("app-settings"===r.uiPreferences.defaultView&&1===i["manage-app-settings"])return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/settings"));if("user-settings"===r.uiPreferences.defaultView)return void o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/profile-settings"));1===i["view-models"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/models")):1===i["view-services"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/services")):1===i["view-queues"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/queues")):1===i["view-tasks"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/tasks")):1===i["view-endpoints"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps/").concat(t.data._id,"/endpoints")):1===i["view-snapshots"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps")):1===i["view-envs"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/envs")):1===i["manage-app-settings"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/settings")):o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/profile-settings"))}else 403===t.status?1===i["view-snapshots"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/snaps")):1===i["view-envs"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/envs")):1===i["manage-app-settings"]?o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/settings")):o.push("/users/".concat(r._id,"/apps/").concat(e._id,"/profile-settings")):c.setState({errorTitle:n("An error has occured while opening designer!"),errorMessage:t.data.details,openDesigner:null})},c.openAppSettings=function(e){c.setState({appAnchorEl:null,selectedApp:null,showAppLoader:!0,appForDialog:e,callback:c.openAppSettingsCallback})},c.openAppSettingsCallback=function(e,t){var a=c.props,n=a.user;a.history.push("/users/".concat(n._id,"/apps/").concat(e._id,"/settings"))},c.getApp=function(e){for(var t=c.props.apps,a=0;a<t.length;a++){var n=t[a];if(n._id===e)return n}},c.getFilteredApps=function(){var e=null,t=c.props.user,a=c.state,n=a.filterType,r=a.sortType,o=a.searchStr;if(e="all"===n?t.apps:"owned"===n?t.apps.filter((function(e){return"owner"===e.type})):"member"===n?t.apps.filter((function(e){return"collaborator"===e.type})):t.apps.filter((function(e){return e.favorite})),o&&o.length>0){var i=new RegExp(o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");e=e.filter((function(e){return c.getApp(e.appId).name.search(i)>=0}))}return"date_asc"===r?e.sort((function(e,t){var a=c.getApp(e.appId),n=c.getApp(t.appId);return a&&n?new Date(a.createdAt)-new Date(n.createdAt):0})):"date_desc"===r?e.sort((function(e,t){var a=c.getApp(e.appId),n=c.getApp(t.appId);if(!a||!n)return 0;var r=new Date(a.createdAt);return new Date(n.createdAt)-r})):"name_asc"===r?e.sort((function(e,t){var a=c.getApp(e.appId),n=c.getApp(t.appId);if(!a||!n)return 0;var r=a.name.toLowerCase(),o=n.name.toLowerCase();return r<o?-1:r>o?1:0})):"name_desc"===r?e.sort((function(e,t){var a=c.getApp(e.appId),n=c.getApp(t.appId);if(!a||!n)return 0;var r=a.name.toLowerCase(),o=n.name.toLowerCase();return r<o?1:r>o?-1:0})):e},c.getFilteredRepoApps=function(){var e=c.state,t=e.repoAppSortType,a=e.repoAppSearchStr,n=e.repoApps;if(a&&a.length>0){var r=new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");n=n.filter((function(e){return e.name.search(r)>=0}))}return"date_asc"===t?n.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})):"date_desc"===t?n.sort((function(e,t){var a=new Date(e.createdAt);return new Date(t.createdAt)-a})):"name_asc"===t?n.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})):"name_desc"===t?n.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?1:a>n?-1:0})):n},c.getFilteredRepoNodes=function(){var e=c.props.repoNodes,t=c.state,a=t.repoNodeSortType,n=t.repoNodeSearchStr,r=e;if(n&&n.length>0){var o=new RegExp(n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");r=r.filter((function(e){return e.name.search(o)>=0}))}return"date_asc"===a?r.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})):"date_desc"===a?r.sort((function(e,t){var a=new Date(e.createdAt);return new Date(t.createdAt)-a})):"name_asc"===a?r.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0})):"name_desc"===a?r.sort((function(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?1:a>n?-1:0})):r},c.manageFav=function(){var e=Object(o.a)(r.a.mark((function e(t,a){var n,o,i,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.props,o=n.addAppToFavsAction,i=n.removeAppFromFavsAction,l=n.user,s=n.match,c.setState({favProgressKey:t._id}),!a){e.next=7;break}return e.next=5,i(s.params.userId,l.token,t._id);case 5:e.next=9;break;case 7:return e.next=9,o(s.params.userId,l.token,t._id);case 9:c.setState({favProgressKey:null});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),c.leaveTeam=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,i,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.props,n=a.leaveTeamMemberAction,o=a.user,c.setState({leaveProgressKey:t._id}),c.closeAppContextMenu(),i=null,l=0;case 5:if(!(l<t.team.length)){e.next=13;break}if((s=t.team[l]).userId!==o._id){e.next=10;break}return i=s._id,e.abrupt("break",13);case 10:l++,e.next=5;break;case 13:return e.next=15,n(o._id,o.token,t._id,i);case 15:c.setState({leaveProgressKey:null});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.hideAppLoader=function(){c.setState({showAppLoader:!1,appForDialog:null})},c.loadSnapshot=function(e){c.setState({showAppLoader:!0,callback:c.loadSnapshotCallback,loaderSnapshot:e})},c.loadSnapshotCallback=function(e,t){var a=c.props,n=a.user;a.history.push("/users/".concat(n._id,"/apps/").concat(e._id,"/snaps/").concat(t._id,"/models"))},c.createAppCallback=function(e){var t=c.props.user;t.uiPreferences&&t.uiPreferences.navigateToNewlyCreated?c.openDesigner(e):c.setState({showAppFromRepoCreated:!0,createdAppFromRepo:e,activeTab:"0"})},c.createAppCallbackForNewUser=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.openDesigner(t),a=c.props,n=a.user,o=a.saveUIPreferencesAction,l=a.updateUIPreferencesAction,s=Object(i.a)(Object(i.a)({},n.uiPreferences),{},{showWelcome:!1}),window.sessionStorage.removeItem("app-create-values"),c.setState({openGetStartedDialog:!1,openCreateAppDialog:!1}),l(n._id,s),e.next=8,o(n._id,n.token,s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.loadRepo=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.props,a=t.user,n=t.loadRepoApps,o=t.loadRepoNodes,i=t.getSystemModelsAction,e.next=3,n(a._id,a.token);case 3:if(200===(l=e.sent).status){e.next=7;break}return c.setState({errorMessage:l.data.details}),e.abrupt("return");case 7:return e.next=9,o(a._id,a.token);case 9:if(200===(s=e.sent).status){e.next=13;break}return c.setState({errorMessage:s.data.details}),e.abrupt("return");case 13:return e.next=15,i(a._id,a.token,null,null);case 15:if(200===(p=e.sent).status){e.next=19;break}return c.setState({errorMessage:p.data.details}),e.abrupt("return");case 19:return c.setState({repoApps:l.data,sysModels:p.data}),e.abrupt("return",{repoApps:l.data,sysModels:p.data});case 21:case"end":return e.stop()}}),e)}))),c.createRepoApp=function(e){c.setState({openCreateRepoAppDialog:!0,selectedRepoApp:e})},c.removeAppFromRepository=function(e){c.setState({openRemoveAppFromRepoDialog:!0,selectedRepoApp:e})},c.removeAppFromRepositoryAction=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.state,a=t.repoApps,n=t.selectedRepoApp,o=c.props,i=o.user,l=o.removeAppFromRepoAction,c.setState({removeProgressKey:n._id}),e.next=5,l(i._id,i.token,n._id);case 5:200!==(s=e.sent).status?c.setState({errorMessage:s.data.details}):(p=a.filter((function(e){return e._id!==n._id})),c.setState({removeProgressKey:null,repoApps:p,selectedRepoApp:null}));case 7:case"end":return e.stop()}}),e)}))),c.removeNodeFromRepository=function(e){c.setState({openRemoveNodeFromRepoDialog:!0,selectedRepoNode:e})},c.removeNodeFromRepositoryAction=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.state.selectedRepoNode,a=c.props,n=a.user,o=a.removeNodeFromRepoAction,c.setState({removeProgressKey:t._id}),e.next=5,o(n._id,n.token,t._id);case 5:200!==(i=e.sent).status?c.setState({errorMessage:i.data.details}):c.setState({removeProgressKey:null,selectedRepoNode:null});case 7:case"end":return e.stop()}}),e)}))),c.editRepoNode=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.props,n=a.user,o=a.getNodeRepositoryInfoAction,c.setState({editProgressKey:t._id}),e.next=4,o(n._id,n.token,t._id);case 4:200===(i=e.sent).status?c.setState({openEditRepoNodeDialog:!0,selectedRepoNode:i.data,editProgressKey:null}):c.setState({selectedRepoNode:null,editProgressKey:null});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.updateState=function(e){c._unmounted||c.setState({showAppFromRepoCreated:!0,createdAppFromRepo:e,activeTab:"0"})},c.completeAppTransfer=function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.props.t,c.setState({processingAppTransfer:!1,showAppTransferAccepted:!0,acceptTransferActionType:"success",appTransferMessage:m.a.createElement(b.a,{defaults:a("<bold>'%s'</bold> app ownership has been successfully transferred to you!").sprintf(t),components:{bold:m.a.createElement("strong",null)}})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c._unmounted=!1,c.hasFavorites=!1,c.state={anchorEl:null,anchorRepoAppEl:null,anchorRepoNodeEl:null,errorMessage:null,errorTitle:null,searchFocused:!1,repoAppSearchFocused:!1,repoNodeSearchFocused:!1,favProgressKey:null,appAnchorEl:null,openDesigner:null,selectedApp:null,selectedAppisOwner:!1,appForDialog:null,openCreateAppDialog:!1,openDeleteAppDialog:!1,openEditAppDialog:!1,openSnapshotDialog:!1,openGetStartedDialog:!0,openInviteDialog:!1,searchStr:"",repoAppSearchStr:"",repoNodeSearchStr:"",filterType:Object(lt.g)("appFilterType","all"),sortType:Object(lt.g)("appSortType","date"),repoAppSortType:Object(lt.g)("repoAppSortType","date"),repoNodeSortType:Object(lt.g)("repoNodeSortType","date"),showAppInviteAccepted:!1,acceptInvitationActionType:"success",appInviteMessage:null,processingAppInvite:!1,openDesignerMessage:null,showAppTransferAccepted:!1,acceptTransferActionType:"success",appTransferMessage:null,processingAppTransfer:!1,leaveProgressKey:null,showAppLoader:!1,callback:null,loaderSnapshot:null,appTemplates:null,activeTab:(null===(n=e.match)||void 0===n||null===(s=n.path)||void 0===s?void 0:s.includes("/marketplace"))?"1":"0",repoApps:null,removeProgressKey:null,editProgressKey:null,openRemoveAppFromRepoDialog:!1,openRemoveNodeFromRepoDialog:!1,selectedRepoApp:null,selectedRepoNode:null,openCreateRepoAppDialog:!1,showAppFromRepoCreated:!1,createdAppFromRepo:null,repoViewType:"app",newNodeAnchorEl:null,openEditRepoNodeDialog:!1,sysModels:[],marketApps:null,marketStats:null,showEnvPlanDialog:!1,dialogData:null,openCreateMarketAppDialog:!1,selectedMarketApp:null,liveApp:null},c}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,c,p,d,u,h,g,f,v,y,E,x,w,k,S,A,C,N,T,R,D,I,O,j,B,P;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.user,n=t.getUserAppsAction,o=t.t,i=t.match,l=t.acceptInvitationAction,s=t.acceptTransferAction,c=t.initiateTransferAction,p=t.getOwnedEnvsAction,d=t.getEnvPlansAction,u=t.getUserAction,h=t.refreshAction,g=t.getBuiltInAppTemplatesAction,f=t.getAppTemplateAction,v=t.getLiveAppTemplate,y=t.location,h(),!(E=JSON.parse(window.sessionStorage.getItem("appInvite")))||E.invitee!==a.profile.email){e.next=18;break}return this.setState({processingAppInvite:!0}),e.next=7,l(i.params.userId,a.token,E.token);case 7:if(200!==(x=e.sent).status){e.next=14;break}return e.next=11,u(a._id,a.token);case 11:this.setState({processingAppInvite:!1,showAppInviteAccepted:!0,acceptInvitationActionType:"success",appInviteMessage:m.a.createElement(b.a,{defaults:o("You have successfully joined to <bold>'%s'</bold> app!").sprintf(E.appName),components:{bold:m.a.createElement("strong",null)}})}),e.next=17;break;case 14:return e.next=16,u(a._id,a.token);case 16:this.setState({processingAppInvite:!1,showAppInviteAccepted:!0,acceptInvitationActionType:"error",appInviteMessage:m.a.createElement(b.a,{defaults:o("We can't add you to the team of <bold>'%s'</bold> app! %s").sprintf(E.appName,x.data.details),components:{bold:m.a.createElement("strong",null)}})});case 17:window.sessionStorage.removeItem("appInvite");case 18:if(!(w=JSON.parse(window.sessionStorage.getItem("appTransfer")))||w.transferee!==a.profile.email){e.next=56;break}return this.setState({processingAppTransfer:!0}),e.next=23,c(i.params.userId,a.token,w.appId,w.token);case 23:if(200!==(k=e.sent).status){e.next=52;break}if(0!==k.data.app.environments.length){e.next=42;break}return e.next=29,s(i.params.userId,a.token,w.appId,k.data);case 29:if(200!==(S=e.sent).status){e.next=36;break}return e.next=33,u(a._id,a.token);case 33:this.setState({processingAppTransfer:!1,showAppTransferAccepted:!0,acceptTransferActionType:"success",appTransferMessage:m.a.createElement(b.a,{defaults:o("<bold>'%s'</bold> app ownership has been successfully transferred to you!").sprintf(w.appName),components:{bold:m.a.createElement("strong",null)}})}),e.next=39;break;case 36:return e.next=38,u(a._id,a.token);case 38:this.setState({processingAppTransfer:!1,showAppTransferAccepted:!0,acceptTransferActionType:"error",appTransferMessage:m.a.createElement(b.a,{defaults:o("We can't transfer ownership of <bold>'%s'</bold> app to you! %s").sprintf(w.appName,S.data.details),components:{bold:m.a.createElement("strong",null)}})});case 39:window.sessionStorage.removeItem("appTransfer"),e.next=50;break;case 42:return e.next=44,p(i.params.userId,a.token);case 44:return A=e.sent,e.next=47,d(i.params.userId,a.token);case 47:C=e.sent,200===A.status&&200===C.status||(this.setState({processingAppTransfer:!1,showAppTransferAccepted:!0,acceptTransferActionType:"error",appTransferMessage:m.a.createElement(b.a,{defaults:o("We can't transfer ownership of <bold>'%s'</bold> app to you! %s").sprintf(w.appName,A.data.details),components:{bold:m.a.createElement("strong",null)}})}),window.sessionStorage.removeItem("appTransfer")),this.setState({processingAppTransfer:!1,showEnvPlanDialog:!0,dialogData:{app:k.data.app,collaborator:k.data.collaborator,transfer:k.data.transfer,user:k.data.user,ownedEnvs:A.data,transferredAppEnvs:k.data.envs,envPlans:C.data.filter((function(e){return"active"===e.status}))}});case 50:e.next=56;break;case 52:return e.next=54,u(a._id,a.token);case 54:this.setState({processingAppTransfer:!1,showAppTransferAccepted:!0,acceptTransferActionType:"error",appTransferMessage:m.a.createElement(b.a,{defaults:o("We can't transfer ownership of <bold>'%s'</bold> app to you! %s").sprintf(w.appName,k.data.details),components:{bold:m.a.createElement("strong",null)}})}),window.sessionStorage.removeItem("appTransfer");case 56:if(N=window.sessionStorage.getItem("app-create-values"),"app-create"!==this.props.initiator||!N){e.next=61;break}this.setState({openCreateAppDialog:!0}),e.next=75;break;case 61:if("app-create-template"!==this.props.initiator||!N){e.next=75;break}if("market"!==(N=JSON.parse(N)).templateType){e.next=70;break}return e.next=66,f(i.params.userId,a.token,N.appTemplateId);case 66:(T=e.sent).data&&this.setState({openCreateMarketAppDialog:!0,selectedMarketApp:T.data,activeTab:"1"}),e.next=75;break;case 70:return e.next=72,this.loadRepo();case 72:R=e.sent,(D=R.repoApps.find((function(e){return e._id===N.appTemplateId})))&&this.setState({openCreateRepoAppDialog:!0,selectedRepoApp:D,activeTab:"2"});case 75:return e.next=77,n(i.params.userId,a.token);case 77:return 200!==(I=e.sent).status&&this.setState({errorMessage:I.data.details}),e.next=81,g(i.params.userId,a.token);case 81:if(200!==(O=e.sent).status?this.setState({errorMessage:O.data.details}):this.setState({appTemplates:O.data}),j=new URLSearchParams(null===y||void 0===y?void 0:y.search),!(B=j.get("liveId"))){e.next=90;break}return e.next=88,v(B);case 88:(P=e.sent).data&&this.setState({liveApp:P.data,openCreateAppDialog:!0});case 90:document.title=o("Apps")+" | Altogic";case 91:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorMessage,n=t.errorTitle,r=t.openCreateAppDialog,o=t.openDeleteAppDialog,i=t.openEditAppDialog,l=t.openSnapshotDialog,s=t.openGetStartedDialog,c=t.openInviteDialog,p=t.appForDialog,d=t.showAppInviteAccepted,u=t.showAppTransferAccepted,h=t.processingAppInvite,g=t.processingAppTransfer,f=t.showAppLoader,v=t.callback,y=t.loaderSnapshot,E=t.appTemplates,x=t.activeTab,w=t.openRemoveAppFromRepoDialog,S=t.openRemoveNodeFromRepoDialog,A=t.selectedRepoApp,C=t.selectedRepoNode,N=t.openCreateRepoAppDialog,T=t.showAppFromRepoCreated,R=t.openEditRepoNodeDialog,D=t.sysModels,I=t.showEnvPlanDialog,O=t.dialogData,j=t.openCreateMarketAppDialog,B=t.selectedMarketApp,P=t.liveApp,_=this.props,M=_.classes,W=_.t,F=_.theme,z=_.user,H=_.apps,G=_.match,q=_.location;if(f)return m.a.createElement(it,{open:f,handleClose:this.hideAppLoader,app:p,callback:v,snapshot:y});if(h)return m.a.createElement(_e.a,{centered:!0},m.a.createElement(k.a,{className:M.content},m.a.createElement(k.a,{className:M.contentPlaceholder},m.a.createElement(Ne.a,{message:W("Processing app invite...")}))));if(g)return m.a.createElement(_e.a,{centered:!0},m.a.createElement(k.a,{className:M.content},m.a.createElement(k.a,{className:M.contentPlaceholder},m.a.createElement(Ne.a,{message:W("Processing app ownership transfer invite...")}))));if(a)return m.a.createElement(_e.a,{centered:!0},d&&this.renderAppInviteAccept(),u&&this.renderAppTransferAccept(),m.a.createElement(k.a,{className:M.content},m.a.createElement(k.a,{className:M.noDataPlaceholder},m.a.createElement(Te.a,{mainMessage:n||W("An error has occured while loading repository data!"),message:a}))));if(z&&H&&E){var Y=this.getFilteredApps();return m.a.createElement(k.a,{className:M.centeredContainer},d&&this.renderAppInviteAccept(),u&&this.renderAppTransferAccept(),T&&this.renderAppFromRepoCreated(),m.a.createElement(k.a,{className:M.content},this.renderTabs(),"0"===x&&this.renderHeadBar(Y.length),"0"===x&&(z.apps&&z.apps.length?this.renderFilteredApps(Y):this.renderNoData()),"1"===x&&m.a.createElement(st.a,{key:q.key,name:"marketplace",basename:G.params[0]?G.url.replace(G.params[0],""):G.url,height:"calc(100% - 65px)",user:z}),"2"===x&&this.renderRepository()),z.uiPreferences.showWelcome&&m.a.createElement(qe,{fullWidth:!0,maxWidth:"md",open:s,handleClose:this.hideGetStartedDialog,appTemplates:E,callback:this.createAppCallbackForNewUser,liveApp:P}),r&&m.a.createElement(qe,{fullWidth:!0,maxWidth:"md",open:r,handleClose:this.hideCreateAppDialog,appTemplates:E,callback:this.createAppCallback,liveApp:P}),N&&m.a.createElement(Ce,{fullWidth:!0,maxWidth:"sm",open:N,handleClose:this.hideCreateRepoAppDialog,callback:this.createAppCallback,appTemplate:A,templateType:"repository"}),j&&m.a.createElement(Ce,{fullWidth:!0,maxWidth:"sm",open:j,handleClose:this.hideCreateMarketAppDialog,callback:this.createAppCallback,appTemplate:B,templateType:"market"}),o&&m.a.createElement(Ye.a,{fullWidth:!0,maxWidth:"sm",open:o,handleClose:this.hideDeleteAppDialog,app:p}),i&&m.a.createElement(Ue,{fullWidth:!0,maxWidth:"sm",open:i,handleClose:this.hideEditAppDialog,app:p}),l&&m.a.createElement(Ke.a,{fullWidth:!0,maxWidth:"sm",open:l,handleClose:this.hideSnapshotDialog,app:p,callback:this.loadSnapshot}),c&&m.a.createElement(Xe.a,{fullWidth:!0,maxWidth:"sm",open:c,handleClose:this.hideInviteDialog,app:p}),w&&m.a.createElement(Je.a,{fullWidth:!0,maxWidth:"sm",open:w,handleClose:function(){return e.setState({openRemoveAppFromRepoDialog:!1})},title:W("Confirm remove app from repository"),redHeader:!0,message:m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{marginBottom:F.spacing(3)}},m.a.createElement("div",{style:{marginBottom:F.spacing(2)}},m.a.createElement(L.a,{severity:"warning"},m.a.createElement(b.a,{defaults:W("Are you sure you would like to remove <bold>%s</bold> app from the repository?").sprintf(A.name),components:{bold:m.a.createElement("strong",null)}}))))),action:W("Remove"),onAction:this.removeAppFromRepositoryAction}),S&&m.a.createElement(Je.a,{fullWidth:!0,maxWidth:"sm",open:S,handleClose:function(){return e.setState({openRemoveNodeFromRepoDialog:!1})},title:W("Confirm remove custom node from repository"),redHeader:!0,message:m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{marginBottom:F.spacing(3)}},m.a.createElement("div",{style:{marginBottom:F.spacing(2)}},m.a.createElement(L.a,{severity:"warning"},m.a.createElement(b.a,{defaults:W("Are you sure you would like to remove <bold>%s</bold> custom node from the repository?").sprintf(C.name),components:{bold:m.a.createElement("strong",null)}}))))),action:W("Remove"),onAction:this.removeNodeFromRepositoryAction}),R&&m.a.createElement(et.a,{user:z,app:null,activeSnap:null,systemModels:D||[],fullWidth:!0,maxWidth:"sm",open:R,handleClose:function(){return e.setState({openEditRepoNodeDialog:!1,selectedRepoNode:null})},node:C,isRepoNode:!0}),I&&m.a.createElement(Ze,{dialogData:O,fullWidth:!0,maxWidth:"sm",open:I,handleClose:function(){window.sessionStorage.removeItem("appTransfer"),e.setState({showEnvPlanDialog:!1,dialogData:null})},callback:this.completeAppTransfer}))}return m.a.createElement(_e.a,{centered:!0},d&&this.renderAppInviteAccept(),u&&this.renderAppTransferAccept(),m.a.createElement(k.a,{className:M.content},m.a.createElement(k.a,{className:M.contentPlaceholder},m.a.createElement(Ne.a,{message:W("Loading apps...")}))))}},{key:"renderTabs",value:function(){var e=this,t=this.props,a=t.theme,n=t.t,r=t.classes,o=t.authAction,i=t.repoNodes,l=t.user,s=t.history,c=this.state,p=c.activeTab,d=c.repoApps;return m.a.createElement("div",{className:r.tabList},m.a.createElement(M.a,{value:p,onChange:function(t,a){e.setState({activeTab:a}),"2"!==a||d&&i||e.loadRepo(),"1"===a?s.replace("/users/".concat(l._id,"/apps/marketplace")):s.replace("/users/".concat(l._id,"/apps"))},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},m.a.createElement(W.a,{value:"0",label:m.a.createElement("div",{className:r.tabTextWrapper},m.a.createElement(z.a,{icon:H.fc,className:r.tabIcon}),n("Workspace")),classes:{root:r.tabRoot}}),m.a.createElement(W.a,{value:"1",label:m.a.createElement("div",{className:r.tabTextWrapper},m.a.createElement(z.a,{icon:G.w,className:r.tabIcon}),n("Marketplace"),m.a.createElement("span",{style:{verticalAlign:"super",fontSize:"0.6rem",fontWeight:"normal",marginLeft:a.spacing(.5),color:a.palette.error.main}},n("NEW"))),classes:{root:r.tabRoot}}),1===o("view-repository")&&m.a.createElement(W.a,{value:"2",label:m.a.createElement("div",{className:r.tabTextWrapper},m.a.createElement(z.a,{icon:H.y,className:r.tabIcon}),n("Repository")),classes:{root:r.tabRoot}})))}},{key:"renderNoData",value:function(){var e=this.props,t=e.classes,a=e.t,n=e.theme;return m.a.createElement(k.a,{className:t.noDataPlaceholder2},m.a.createElement(Re.a,{icon:H.u,mainMessage:m.a.createElement(b.a,{defaults:a("It looks like you don't have any applications. Click/tap <bold>New app</bold> to create one."),components:{bold:m.a.createElement("strong",null)}}),message:m.a.createElement("span",{style:{fontSize:n.typography.caption.fontSize}},m.a.createElement(b.a,{defaults:a("Learn <link1>Application Key Concepts</link1> or explore <link2>Platform Capabilities</link2> to understand what you can do with Altogic"),components:{link1:m.a.createElement(_.a,{href:"https://altogic.com/docs/key-concepts",target:"_blank"}),link2:m.a.createElement(_.a,{href:"https://altogic.com/docs/category/platform-capabilities",target:"_blank"})}})),smallIcon:!1,action:null,actionIcon:null}))}},{key:"renderAppInviteAccept",value:function(){var e=this.state,t=e.showAppInviteAccepted,a=e.appInviteMessage,n=e.acceptInvitationActionType;return m.a.createElement(De.a,{open:t,onClose:this.handleSnackClose,type:n},a)}},{key:"renderAppTransferAccept",value:function(){var e=this.state,t=e.showAppTransferAccepted,a=e.appTransferMessage,n=e.acceptTransferActionType;return m.a.createElement(De.a,{open:t,onClose:this.handleSnackClose2,type:n},a)}},{key:"renderAppFromRepoCreated",value:function(){var e=this,t=this.props.t,a=this.state,n=a.showAppFromRepoCreated,r=a.createdAppFromRepo;return m.a.createElement(De.a,{open:n,onClose:function(){return e.setState({showAppFromRepoCreated:!1,createdAppFromRepo:null})}},m.a.createElement(b.a,{defaults:t("App <bold>%s</bold> has been successfully created.").sprintf(r.name),components:{bold:m.a.createElement("strong",null)}}))}},{key:"renderHeadBar",value:function(e){var t=this.props,a=t.t,n=t.classes,r=t.width,o=this.state.filterType,i=a("All apps");return"owned"===o?i=a("Owned apps"):"member"===o?i=a("Member apps"):"favorite"===o&&(i=a("Favorite apps")),m.a.createElement(m.a.Fragment,null,m.a.createElement(j.a,{smUp:!0},m.a.createElement(k.a,{className:n.headBarSimple},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:this.showCreateAppDialog},m.a.createElement(z.a,{icon:Y.wb,className:n.actionButtonIcon}),a("Create new app")))),m.a.createElement(k.a,{className:n.headBar},m.a.createElement(j.a,{xsDown:!0},m.a.createElement(k.a,{className:n.headBarTitle},m.a.createElement(S.a,{component:"span",variant:"body2",className:n.headBarTitleText},i+" ("+e+")"))),m.a.createElement(k.a,{className:"xs"===r?n.fullWidth:null},this.renderToolBar()),m.a.createElement(j.a,{xsDown:!0},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,className:n.actionButton,onClick:this.showCreateAppDialog},m.a.createElement(z.a,{icon:Y.wb,className:n.actionButtonIcon}),a("New app")))))}},{key:"renderToolBar",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=t.width,o=this.state,i=o.searchFocused,l=o.searchStr;return m.a.createElement(A.a,{className:Object(u.default)(a.headBarToolBar,i?a.headBarToolBarFocused:null),variant:"outlined"},m.a.createElement(z.a,{icon:H.Qc,className:a.icon,fixedWidth:!0}),m.a.createElement(C.a,{className:a.input,placeholder:n("Search..."),onChange:this.searchApp,onFocus:this.focusSearch,onBlur:this.unFocusSearch,value:l,fullWidth:"xs"===r,inputProps:{spellCheck:"false"}}),m.a.createElement(z.a,{icon:G.x,className:a.closeIcon,fixedWidth:!0,onClick:function(){return e.setState({searchStr:""})},style:{visibility:l?"visible":"hidden"}}),m.a.createElement(R.a,{className:a.divider,orientation:"vertical"}),m.a.createElement(T.a,{onClick:this.showToolBarMenu,className:a.menuButton},m.a.createElement(z.a,{icon:G.k,className:a.menuButtonIcon})),this.renderToolBarMenu())}},{key:"renderToolBarMenu",value:function(){var e=this,t=this.state,a=t.anchorEl,n=t.filterType,r=t.sortType,o=this.props,i=o.t,l=o.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(D.a,{id:"appListToolBarMenu",anchorEl:a,open:Boolean(a),onClose:this.closeToolBarMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m.a.createElement(ee.a,{onClick:this.closeToolBarMenu,icon:null},i("View")),m.a.createElement($.a,{onClick:function(){return e.setFilterType("all")},icon:H.od,selected:"all"===n},i("All apps")),m.a.createElement($.a,{onClick:function(){return e.setFilterType("owned")},icon:H.Ad,selected:"owned"===n},i("Owned apps")),m.a.createElement($.a,{onClick:function(){return e.setFilterType("member")},icon:H.Hd,selected:"member"===n},i("Member apps")),m.a.createElement($.a,{onClick:function(){return e.setFilterType("favorite")},icon:q.g,selected:"favorite"===n},i("Favorite apps")),m.a.createElement(R.a,null),m.a.createElement(ee.a,{onClick:this.closeToolBarMenu,icon:null},i("Sort by")),m.a.createElement(Z.a,{icon:H.B,text:m.a.createElement(m.a.Fragment,null,i("Date created"),"date_asc"===r?m.a.createElement("span",{className:l.description},"(asc)"):null,"date_desc"===r?m.a.createElement("span",{className:l.description},"(desc)"):null),parentMenuOpen:Boolean(a)},m.a.createElement($.a,{onClick:function(){return e.setSortType("date_asc")},icon:H.ad,selected:"date_asc"===r},i("Ascending")),m.a.createElement($.a,{onClick:function(){return e.setSortType("date_desc")},icon:H.Zc,selected:"date_desc"===r},i("Descending"))),m.a.createElement(Z.a,{icon:H.Yc,text:m.a.createElement(m.a.Fragment,null,i("Name"),"name_asc"===r?m.a.createElement("span",{className:l.description},"(asc)"):null,"name_desc"===r?m.a.createElement("span",{className:l.description},"(desc)"):null),parentMenuOpen:Boolean(a)},m.a.createElement($.a,{onClick:function(){return e.setSortType("name_asc")},icon:H.ad,selected:"name_asc"===r},i("Ascending")),m.a.createElement($.a,{onClick:function(){return e.setSortType("name_desc")},icon:H.Zc,selected:"name_desc"===r},i("Descending")))))}},{key:"renderAppMenu",value:function(){var e=this,t=this.state,a=t.appAnchorEl,n=t.selectedApp,r=t.selectedAppisOwner,o=this.props,i=o.t,l=o.classes,s=o.authActionGroup;if(!n)return null;var c=s(["view-snapshots","view-models","manage-app-settings","update-app","delete-app","view-services","view-tasks","view-queues","view-envs","leave-app","send-invite"],{app:n});return m.a.createElement(D.a,{id:"appPopUpMenu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:this.closeAppContextMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},m.a.createElement(ee.a,{icon:H.u,color:!0},n.name),(1===c["view-snapshots"]||1===c["view-models"]||1===c["view-services"]||1===c["view-tasks"]||1===c["view-queues"]||1===c["view-endpoints"]||1===c["view-envs"]||1===c["manage-app-settings"])&&m.a.createElement($.a,{onClick:function(){e.closeAppContextMenu(),e.openDesigner(n)},icon:H.vd},m.a.createElement("div",null,m.a.createElement("div",null,i("Open designer")),(1===c["view-models"]||1===c["view-services"]||1===c["view-queues"]||1===c["view-endpoints"]||1===c["view-tasks"])&&m.a.createElement("span",{className:l.description2},m.a.createElement(z.a,{icon:H.C,className:l.rightMargin}),"Default/Master"))),1===c["view-snapshots"]&&1===c["view-models"]&&m.a.createElement($.a,{onClick:this.showSnapshotDialog,icon:H.C},i("Open snapshot...")),1===c["manage-app-settings"]&&m.a.createElement($.a,{onClick:function(){e.openAppSettings(n)},icon:H.X},i("Manage app settings")),1===c["update-app"]&&m.a.createElement($.a,{onClick:this.showEditAppDialog,icon:H.yc},i("Edit app properties...")),1===c["send-invite"]&&m.a.createElement($.a,{onClick:this.showInviteDialog,icon:H.Fd},i("Invite people...")),1===c["leave-app"]&&!1===r&&m.a.createElement($.a,{onClick:function(){return e.leaveTeam(n)},icon:H.ib},i("Leave team")),1===c["delete-app"]&&m.a.createElement(R.a,null),1===c["delete-app"]&&m.a.createElement($.a,{icon:H.wd,onClick:this.showDeleteAppDialog},i("Delete")))}},{key:"renderFilteredApps",value:function(e){var t=this,a=this.props,n=a.t,r=a.classes,o=this.props,i=o.searchStr,l=o.filterType;if(0===e.length&&(i||"all"!==l))return m.a.createElement("div",{className:r.noDataPlaceholder},m.a.createElement(Re.a,{icon:H.Ab,mainMessage:n("No items matching search and/or filter criteria"),message:n("Didn't find what you're looking for? Some apps may be hidden because of the search filters you've entered."),smallIcon:!0,action:n("Reset filters"),actionIcon:H.xd,callBack:function(){t.setState({searchStr:"",filterType:"all"})}}));var s=e.map((function(e){var a=t.getApp(e.appId);return a?t.renderSingleApp(a,"owner"===e.type,e.favorite):null}));return m.a.createElement("div",{className:r.appsContainer},m.a.createElement(w.a,{container:!0,spacing:4,className:r.grid},s,this.renderAppMenu()))}},{key:"renderSingleApp",value:function(e,t,a){var n=this,r=this.props,o=r.classes,i=r.t,l=r.theme,s=r.authActionGroup,c=r.user,p=this.state,d=p.favProgressKey,h=p.openDesigner,f=p.openDesignerMessage,v=p.leaveProgressKey,b=p.searchStr,y=f||i("Loading..."),x=null;return x=s(t?["view-snapshots","manage-app-settings","update-app","delete-app"]:["view-snapshots","manage-app-settings","update-app","delete-app","leave-app"],{app:e}),m.a.createElement(w.a,{item:!0,xs:12,sm:6,md:4,className:o.cardHolder,key:e._id},m.a.createElement(O.a,{className:o.backdrop,open:Boolean(h)},"\xa0"),m.a.createElement(A.a,{className:Object(u.default)(o.card),elevation:3},"Active"===e.owner.accountStatus&&m.a.createElement(k.a,{className:o.designerButton},h===e._id?m.a.createElement("div",{className:o.loadDesigner},m.a.createElement(I.a,{size:24,className:o.loadSpinner}),m.a.createElement("span",null,y)):m.a.createElement("div",{style:{color:"light"===l.palette.type?l.palette.primary.main:l.palette.primary.linkForDark}},m.a.createElement(z.a,{icon:H.vd,className:o.actionButtonIcon}),m.a.createElement("span",null,i("Open designer")))),m.a.createElement("div",{className:o.panelImage},m.a.createElement("img",{src:rt.a,alt:"Altogic",className:o.image})),m.a.createElement(k.a,{className:o.cardHeader},m.a.createElement(S.a,{component:"span",variant:"body1",className:Object(u.default)(o.cardHeaderTitle,"Active"!==e.owner.accountStatus?o.disabled:null)},m.a.createElement(g.a,{highlightClassName:o.highlight,searchWords:[b],autoEscape:!0,textToHighlight:e.name}))),m.a.createElement(k.a,{className:Object(u.default)(o.cardContent,"Active"===e.owner.accountStatus?o.actionArea:null,h===e._id?o.fadeActionArea:null),onClick:function(){"Active"===e.owner.accountStatus&&n.openDesigner(e)}},m.a.createElement("div",{className:Object(u.default)(o.shortDesc,"Active"!==e.owner.accountStatus?o.disabled:null)},e.shortDesc),m.a.createElement("div",{className:Object(u.default)(o.dateTime,"Active"!==e.owner.accountStatus?o.disabled:null)},m.a.createElement(z.a,{icon:H.B,style:{marginRight:l.spacing(.5)},fixedWidth:!0}),m.a.createElement("span",null,i("Created"),"\xa0",Object(E.a)(e.createdAt))),m.a.createElement("div",{className:Object(u.default)(o.ownershipSatus,"Active"!==e.owner.accountStatus?o.disabled:null)},m.a.createElement("span",null,m.a.createElement(z.a,{icon:e.owner._id===c._id?H.db:H.Gd,style:{marginRight:l.spacing(.5)},fixedWidth:!0}),e.owner._id===c._id?i("You are the owner"):i("You are a team member"))),"Active"!==e.owner.accountStatus&&m.a.createElement("div",{className:Object(u.default)(o.disabledAccount)},i("Owner account inactive"))),m.a.createElement(k.a,{className:o.cardFooter},m.a.createElement("div",{style:{flexGrow:1}},m.a.createElement(B.a,{max:5,classes:{avatar:o.avatar}},e.team.map((function(e){return m.a.createElement(P.a,{key:e._id,src:e.user.profile.imgUrl,className:Object(u.default)(o.avatar,o[e.user.profile.avatarColor])},e.user.profile.imgUrl?null:n.getInitials(e.user))})))),m.a.createElement(tt.a,{title:i(a?"Remove from favorites":"Add to favorites"),placement:"bottom",enterDelay:Q.a.tooltipEnterDelay,enterNextDelay:Q.a.tooltipEnterNextDelay},m.a.createElement(T.a,{className:o.cardFooterLeftButton,onClick:function(){return n.manageFav(e,a)}},m.a.createElement(z.a,{icon:a?q.g:Y.ab,className:Object(u.default)(o.cardFooterIcon2,a?o.favorite:null)}),d===e._id?m.a.createElement(I.a,{size:32,className:o.progress}):null)),x.isAuthorized?v===e._id?m.a.createElement(I.a,{size:32,className:o.progressLeft}):m.a.createElement(T.a,{className:o.cardFooterRightButton,onClick:function(a){return n.showAppContextMenu(a,e,t)}},m.a.createElement(z.a,{icon:G.k,className:o.cardFooterIcon})):null)))}},{key:"renderRepository",value:function(){var e=this.state,t=e.repoApps,a=e.repoViewType,n=this.props,r=n.t,o=n.classes,i=n.repoNodes;return t&&i?m.a.createElement(m.a.Fragment,null,this.renderRepoViewType(),"app"===a&&this.renderAppTemplates(),"node"===a&&this.renderNodes()):m.a.createElement(k.a,{className:o.content},m.a.createElement(k.a,{className:o.contentPlaceholder},m.a.createElement(Ne.a,{message:r("Loading repository...")})))}},{key:"renderRepoViewType",value:function(){var e=this,t=this.state.repoViewType,a=this.props,n=a.t,r=a.classes,o=a.theme;return m.a.createElement(k.a,{className:r.headBar2},m.a.createElement(F.a,{size:"medium",color:"app"===t?"primary":"default",label:m.a.createElement("span",null,m.a.createElement(z.a,{icon:H.u,style:{marginRight:o.spacing(.5)},fixedWidth:!0}),n("Apps")),style:{marginRight:o.spacing(1)},clickable:!0,onClick:function(){return e.setState({repoViewType:"app"})}}),m.a.createElement(F.a,{size:"medium",color:"node"===t?"primary":"default",label:m.a.createElement("span",null,m.a.createElement(z.a,{icon:H.Id,style:{marginRight:o.spacing(.5)},fixedWidth:!0}),n("Nodes")),style:{marginRight:o.spacing(1)},clickable:!0,onClick:function(){return e.setState({repoViewType:"node"})}}))}},{key:"renderAppTemplates",value:function(){var e=this,t=this.state,a=t.repoApps,n=t.repoAppSearchStr,r=this.props,o=r.t,i=r.classes;if(a&&0===a.length)return this.renderNoRepoApps();var l=this.getFilteredRepoApps();return 0===l.length&&n?m.a.createElement(m.a.Fragment,null,this.renderRepoAppHeadbar(l.length),m.a.createElement("div",{className:i.noDataPlaceholder},m.a.createElement(Re.a,{icon:H.Ab,mainMessage:o("No items matching search and/or filter criteria"),message:o("Didn't find what you're looking for? Some app templates may be hidden because of the search filter you've entered."),smallIcon:!0,action:o("Reset filters"),actionIcon:H.xd,callBack:function(){e.setState({repoAppSearchStr:""})}}))):m.a.createElement(m.a.Fragment,null,this.renderRepoAppHeadbar(l.length),m.a.createElement("div",{className:i.appsContainer},m.a.createElement(w.a,{container:!0,spacing:4,className:i.grid},l.map((function(t){return e.renderSingleRepoApp(t)})))))}},{key:"renderSingleRepoApp",value:function(e){var t=this,a=this.props,n=a.classes,r=a.t,o=a.theme,i=this.state,l=i.repoAppSearchStr,s=i.removeProgressKey;return m.a.createElement(w.a,{item:!0,xs:12,sm:6,md:4,className:n.cardHolder,key:e._id},m.a.createElement(A.a,{className:Object(u.default)(n.card),elevation:3,style:{minHeight:"220px"}},m.a.createElement(k.a,{className:n.designerButton},m.a.createElement("div",{style:{color:"light"===o.palette.type?o.palette.primary.main:o.palette.primary.linkForDark}},m.a.createElement(z.a,{icon:H.Dc,className:n.actionButtonIcon}),m.a.createElement("span",null,r("Create app")))),m.a.createElement("div",{className:n.panelImage2},m.a.createElement(z.a,{icon:H.zc,className:n.image2})),m.a.createElement(k.a,{className:n.cardHeader},m.a.createElement(S.a,{component:"span",variant:"body1",className:Object(u.default)(n.cardHeaderTitle)},m.a.createElement(g.a,{highlightClassName:n.highlight,searchWords:[l],autoEscape:!0,textToHighlight:e.name}))),m.a.createElement(k.a,{className:Object(u.default)(n.cardContent,n.actionArea),onClick:function(){t.createRepoApp(e)}},m.a.createElement("div",{className:Object(u.default)(n.shortDesc)},e.shortDesc)),m.a.createElement(k.a,{className:n.cardFooter},m.a.createElement("div",{className:Object(u.default)(n.dateTime),style:{flexGrow:1}},m.a.createElement(z.a,{icon:H.B,style:{marginRight:o.spacing(.5)},fixedWidth:!0}),e.updatedAt?m.a.createElement("span",null,r("Last updated"),"\xa0",Object(E.a)(e.updatedAt)):m.a.createElement("span",null,r("Created"),"\xa0",Object(E.a)(e.createdAt))),m.a.createElement(tt.a,{title:r("Remove from repository"),placement:"bottom",enterDelay:Q.a.tooltipEnterDelay,enterNextDelay:Q.a.tooltipEnterNextDelay},m.a.createElement(T.a,{className:n.cardFooterLeftButton,onClick:function(){return t.removeAppFromRepository(e)}},m.a.createElement(z.a,{icon:H.wd,className:n.cardFooterIcon2}),s===e._id?m.a.createElement(I.a,{size:32,className:n.progress}):null)))))}},{key:"renderNoRepoApps",value:function(){var e=this.props,t=e.classes,a=e.t,n=e.theme;return m.a.createElement(m.a.Fragment,null,this.renderRepoAppHeadbar(0),m.a.createElement(k.a,{className:t.noDataPlaceholder2},m.a.createElement(Re.a,{icon:H.zc,mainMessage:m.a.createElement("div",null,m.a.createElement(b.a,{defaults:a("It looks like you don't have any application templates in your repository."),components:{bold:m.a.createElement("strong",null)}}),m.a.createElement("br",null),m.a.createElement(b.a,{defaults:a("First create a new app, and then you can add it to your private repository."),components:{bold:m.a.createElement("strong",null)}})),message:m.a.createElement("span",{style:{fontSize:n.typography.caption.fontSize}},m.a.createElement(b.a,{defaults:a("Learn <link1>Application Key Concepts</link1> or explore <link2>Platform Capabilities</link2> to understand what you can do with Altogic"),components:{link1:m.a.createElement(_.a,{href:"https://altogic.com/docs/key-concepts",target:"_blank"}),link2:m.a.createElement(_.a,{href:"https://altogic.com/docs/category/platform-capabilities",target:"_blank"})}})),smallIcon:!1,action:null,actionIcon:null})))}},{key:"renderRepoAppHeadbar",value:function(e){var t=this.props,a=t.t,n=t.classes,r=t.width;return m.a.createElement(k.a,{className:n.headBar},m.a.createElement(j.a,{xsDown:!0},m.a.createElement(k.a,{className:n.headBarTitle},m.a.createElement(S.a,{component:"span",variant:"body2",className:n.headBarTitleText},a("App templates")+" ("+e+")"))),m.a.createElement(k.a,{className:"xs"===r?n.fullWidth:null},this.renderAppRepoToolBar()))}},{key:"renderAppRepoToolBar",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=t.width,o=this.state,i=o.repoAppSearchFocused,l=o.repoAppSearchStr;return m.a.createElement(A.a,{className:Object(u.default)(a.headBarToolBar,i?a.headBarToolBarFocused:null),variant:"outlined"},m.a.createElement(z.a,{icon:H.Qc,className:a.icon,fixedWidth:!0}),m.a.createElement(C.a,{className:a.input,placeholder:n("Search repository..."),onChange:this.searchRepoApp,onFocus:this.focusRepoAppSearch,onBlur:this.unFocusRepoAppSearch,value:l,fullWidth:"xs"===r,inputProps:{spellCheck:"false"}}),m.a.createElement(z.a,{icon:G.x,className:a.closeIcon,fixedWidth:!0,onClick:function(){return e.setState({repoAppSearchStr:""})},style:{visibility:l?"visible":"hidden"}}),m.a.createElement(R.a,{className:a.divider,orientation:"vertical"}),m.a.createElement(T.a,{onClick:this.showRepoAppToolBarMenu,className:a.menuButton},m.a.createElement(z.a,{icon:G.k,className:a.menuButtonIcon})),this.renderAppRepoToolBarMenu())}},{key:"renderAppRepoToolBarMenu",value:function(){var e=this,t=this.state,a=t.anchorRepoAppEl,n=t.repoAppSortType,r=this.props,o=r.t,i=r.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(D.a,{id:"appListToolBarMenu",anchorEl:a,open:Boolean(a),onClose:this.closeRepoAppToolBarMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m.a.createElement(ee.a,{onClick:this.closeRepoAppToolBarMenu,icon:null},o("Sort by")),m.a.createElement(Z.a,{icon:H.B,text:m.a.createElement(m.a.Fragment,null,o("Date created"),"date_asc"===n?m.a.createElement("span",{className:i.description},"(asc)"):null,"date_desc"===n?m.a.createElement("span",{className:i.description},"(desc)"):null),parentMenuOpen:Boolean(a)},m.a.createElement($.a,{onClick:function(){return e.setRepoAppSortType("date_asc")},icon:H.ad,selected:"date_asc"===n},o("Ascending")),m.a.createElement($.a,{onClick:function(){return e.setRepoAppSortType("date_desc")},icon:H.Zc,selected:"date_desc"===n},o("Descending"))),m.a.createElement(Z.a,{icon:H.Yc,text:m.a.createElement(m.a.Fragment,null,o("Name"),"name_asc"===n?m.a.createElement("span",{className:i.description},"(asc)"):null,"name_desc"===n?m.a.createElement("span",{className:i.description},"(desc)"):null),parentMenuOpen:Boolean(a)},m.a.createElement($.a,{onClick:function(){return e.setRepoAppSortType("name_asc")},icon:H.ad,selected:"name_asc"===n},o("Ascending")),m.a.createElement($.a,{onClick:function(){return e.setRepoAppSortType("name_desc")},icon:H.Zc,selected:"name_desc"===n},o("Descending")))))}},{key:"renderNodes",value:function(){var e=this,t=this.state.repoNodeSearchStr,a=this.props,n=a.t,r=a.classes,o=a.repoNodes;if(o&&0===o.length)return this.renderNoRepoNodes();var i=this.getFilteredRepoNodes();return 0===i.length&&t?m.a.createElement(m.a.Fragment,null,this.renderRepoNodeHeadbar(i.length),m.a.createElement("div",{className:r.noDataPlaceholder},m.a.createElement(Re.a,{icon:H.Ab,mainMessage:n("No items matching search and/or filter criteria"),message:n("Didn't find what you're looking for? Some custom nodes may be hidden because of the search filter you've entered."),smallIcon:!0,action:n("Reset filters"),actionIcon:H.xd,callBack:function(){e.setState({repoNodeSearchStr:""})}}))):m.a.createElement(m.a.Fragment,null,this.renderRepoNodeHeadbar(i.length),m.a.createElement("div",{className:r.appsContainer},m.a.createElement(w.a,{container:!0,spacing:4,className:r.grid},i.map((function(t){return e.renderSingleRepoNode(t)})))))}},{key:"renderSingleRepoNode",value:function(e){var t=this,a=this.props,n=a.classes,r=a.t,o=a.theme,i=this.state,l=i.repoNodeSearchStr,s=i.removeProgressKey,c=i.editProgressKey;return m.a.createElement(w.a,{item:!0,xs:12,sm:6,md:4,className:n.cardHolder,key:e._id},m.a.createElement(A.a,{className:Object(u.default)(n.card),elevation:3},m.a.createElement(k.a,{className:n.cardHeader},m.a.createElement(S.a,{component:"span",variant:"body1",className:Object(u.default)(n.cardHeaderTitle)},m.a.createElement(z.a,{icon:H.Id,style:{marginRight:o.spacing(1)}}),m.a.createElement(g.a,{highlightClassName:n.highlight,searchWords:[l],autoEscape:!0,textToHighlight:e.name}),e.isDraft?m.a.createElement("span",{className:n.draft},r("draft")):m.a.createElement("span",{className:n.final},r("final")))),m.a.createElement(k.a,{className:n.cardFooter},m.a.createElement("div",{className:Object(u.default)(n.dateTime),style:{flexGrow:1}},m.a.createElement(z.a,{icon:H.B,style:{marginRight:o.spacing(.5)},fixedWidth:!0}),e.updatedAt?m.a.createElement("span",null,r("Last updated"),"\xa0",Object(E.a)(e.updatedAt)):m.a.createElement("span",null,r("Created"),"\xa0",Object(E.a)(e.createdAt))),m.a.createElement(tt.a,{title:r("Edit custom node"),placement:"bottom",enterDelay:Q.a.tooltipEnterDelay,enterNextDelay:Q.a.tooltipEnterNextDelay},m.a.createElement(T.a,{className:n.cardFooterLeftButton,onClick:function(){return t.editRepoNode(e)}},m.a.createElement(z.a,{icon:H.kb,className:n.cardFooterIcon2}),c===e._id?m.a.createElement(I.a,{size:32,className:n.progress}):null)),m.a.createElement(tt.a,{title:r("Remove from repository"),placement:"bottom",enterDelay:Q.a.tooltipEnterDelay,enterNextDelay:Q.a.tooltipEnterNextDelay},m.a.createElement(T.a,{className:n.cardFooterLeftButton,onClick:function(){return t.removeNodeFromRepository(e)}},m.a.createElement(z.a,{icon:H.wd,className:n.cardFooterIcon2}),s===e._id?m.a.createElement(I.a,{size:32,className:n.progress}):null)))))}},{key:"renderNoRepoNodes",value:function(){var e=this.props,t=e.classes,a=e.t,n=e.theme;return m.a.createElement(m.a.Fragment,null,this.renderRepoNodeHeadbar(0),m.a.createElement(k.a,{className:t.noDataPlaceholder2},m.a.createElement(Re.a,{icon:H.Id,mainMessage:m.a.createElement("div",null,m.a.createElement(b.a,{defaults:a("It looks like you don't have any custom nodes in your repository. Click/tap <bold>New node</bold> to create one."),components:{bold:m.a.createElement("strong",null)}})),message:m.a.createElement("span",{style:{fontSize:n.typography.caption.fontSize}},m.a.createElement(b.a,{defaults:a("Learn <link1>Custom Nodes Basics</link1> or explore <link2>Creating Custom REST API Nodes</link2> guide"),components:{link1:m.a.createElement(_.a,{href:"https://altogic.com/docs/platform-concepts/apps#custom-nodes",target:"_blank"}),link2:m.a.createElement(_.a,{href:"https://altogic.com/docs/category/creating-custom-nodes",target:"_blank"})}})),smallIcon:!1,action:null,actionIcon:null})))}},{key:"renderRepoNodeHeadbar",value:function(e){var t=this,a=this.props,n=a.t,r=a.classes,o=a.width;return m.a.createElement(m.a.Fragment,null,m.a.createElement(j.a,{smUp:!0},m.a.createElement(k.a,{className:r.headBarSimple},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(e){return t.setState({newNodeAnchorEl:e.currentTarget})}},m.a.createElement(z.a,{icon:Y.wb,className:r.actionButtonIcon}),n("Create new node"),m.a.createElement(z.a,{icon:Y.d,className:r.buttonIconRight})))),m.a.createElement(k.a,{className:r.headBar},m.a.createElement(j.a,{xsDown:!0},m.a.createElement(k.a,{className:r.headBarTitle},m.a.createElement(S.a,{component:"span",variant:"body2",className:r.headBarTitleText},n("Custom nodes")+" ("+e+")"))),m.a.createElement(k.a,{className:"xs"===o?r.fullWidth:null},this.renderNodeRepoToolBar()),m.a.createElement(j.a,{xsDown:!0},m.a.createElement(N.a,{variant:"contained",color:"primary",disableElevation:!0,className:r.actionButton,onClick:function(e){return t.setState({newNodeAnchorEl:e.currentTarget})}},m.a.createElement(z.a,{icon:Y.wb,className:r.actionButtonIcon}),n("New node"),m.a.createElement(z.a,{icon:Y.d,className:r.buttonIconRight})))),this.renderNewNodeMenu())}},{key:"renderNewNodeMenu",value:function(){var e=this,t=this.state.newNodeAnchorEl,a=this.props.t;return m.a.createElement(D.a,{id:"newNodeToolBarMenu",anchorEl:t,open:Boolean(t),onClose:function(){return e.setState({newNodeAnchorEl:null})},elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},m.a.createElement($.a,{onClick:function(){return e.setState({openEditRepoNodeDialog:!0,newNodeAnchorEl:null,selectedRepoNode:null})},icon:H.Kb},a("REST API node")))}},{key:"renderNodeRepoToolBar",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=t.width,o=this.state,i=o.repoNodeSearchFocused,l=o.repoNodeSearchStr;return m.a.createElement(A.a,{className:Object(u.default)(a.headBarToolBar,i?a.headBarToolBarFocused:null),variant:"outlined"},m.a.createElement(z.a,{icon:H.Qc,className:a.icon,fixedWidth:!0}),m.a.createElement(C.a,{className:a.input,placeholder:n("Search repository..."),onChange:this.searchRepoNode,onFocus:this.focusRepoNodeSearch,onBlur:this.unFocusRepoNodeSearch,value:l,fullWidth:"xs"===r,inputProps:{spellCheck:"false"}}),m.a.createElement(z.a,{icon:G.x,className:a.closeIcon,fixedWidth:!0,onClick:function(){return e.setState({repoNodeSearchStr:""})},style:{visibility:l?"visible":"hidden"}}),m.a.createElement(R.a,{className:a.divider,orientation:"vertical"}),m.a.createElement(T.a,{onClick:this.showRepoNodeToolBarMenu,className:a.menuButton},m.a.createElement(z.a,{icon:G.k,className:a.menuButtonIcon})),this.renderNodeRepoToolBarMenu())}},{key:"renderNodeRepoToolBarMenu",value:function(){var e=this,t=this.state,a=t.anchorRepoNodeEl,n=t.repoAppSortType,r=this.props,o=r.t,i=r.classes;return m.a.createElement(m.a.Fragment,null,m.a.createElement(D.a,{id:"nodeListToolBarMenu",anchorEl:a,open:Boolean(a),onClose:this.closeRepoNodeToolBarMenu,elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},m.a.createElement(ee.a,{onClick:this.closeRepoNodeToolBarMenu,icon:null},o("Sort by")),m.a.createElement(Z.a,{icon:H.B,text:m.a.createElement(m.a.Fragment,null,o("Date created"),"date_asc"===n?m.a.createElement("span",{className:i.description},"(asc)"):null,"date_desc"===n?m.a.createElement("span",{className:i.description},"(desc)"):null),parentMenuOpen:Boolean(a)},m.a.createElement($.a,{onClick:function(){return e.setRepoNodeSortType("date_asc")},icon:H.ad,selected:"date_asc"===n},o("Ascending")),m.a.createElement($.a,{onClick:function(){return e.setRepoNodeSortType("date_desc")},icon:H.Zc,selected:"date_desc"===n},o("Descending"))),m.a.createElement(Z.a,{icon:H.Yc,text:m.a.createElement(m.a.Fragment,null,o("Name"),"name_asc"===n?m.a.createElement("span",{className:i.description},"(asc)"):null,"name_desc"===n?m.a.createElement("span",{className:i.description},"(desc)"):null),parentMenuOpen:Boolean(a)},m.a.createElement($.a,{onClick:function(){return e.setRepoNodeSortType("name_asc")},icon:H.ad,selected:"name_asc"===n},o("Ascending")),m.a.createElement($.a,{onClick:function(){return e.setRepoNodeSortType("name_desc")},icon:H.Zc,selected:"name_desc"===n},o("Descending")))))}},{key:"getInitials",value:function(e){return e?e.profile.userName.charAt(0).toUpperCase():null}}]),a}(m.a.PureComponent));t.default=Object(f.b)((function(e,t){var a=new URLSearchParams(t.location.search);return{user:e.user,apps:e.apps,repoNodes:e.repoNodes,initiator:a.get("initiator")}}),{getUserAppsAction:we.Hd,addAppToFavsAction:we.g,removeAppFromFavsAction:we.ie,authActionGroup:at.b,authAction:at.a,getEligibleSnapshotAction:we.Bc,initiateTransferAction:we.Ld,acceptInvitationAction:we.a,getOwnedEnvsAction:we.fd,getUserAction:we.Gd,refreshAction:we.Yd,leaveTeamMemberAction:we.Nd,acceptTransferAction:we.b,saveUIPreferencesAction:we.Fe,updateUIPreferencesAction:we.Sf,getBuiltInAppTemplatesAction:we.vc,loadRepoApps:we.Pd,loadRepoNodes:we.Qd,removeAppFromRepoAction:we.ke,removeNodeFromRepoAction:we.me,getNodeRepositoryInfoAction:we.dd,getSystemModelsAction:we.Cd,getEnvPlansAction:we.Kc,getAppTemplateAction:we.qc,getLiveAppTemplate:we.Vc})(Object(x.a)()(Object(v.a)((function(e){return{centeredContainer:{flexGrow:1,display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",overflowY:"hidden",overflowX:"hidden"},content:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",marginTop:e.spacing(2),marginRight:e.spacing(0),marginLeft:e.spacing(0),marginBottom:e.spacing(2),overflowY:"hidden",overflowX:"hidden"},contentPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},noDataPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",marginTop:e.spacing(5)},noDataPlaceholder2:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:e.spacing(10)},headBar:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start",marginTop:e.spacing(0),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flexShrink:0},headBar2:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start",marginTop:e.spacing(0),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),marginBottom:e.spacing(2),flexShrink:0},headBarSimple:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-end",marginTop:e.spacing(0),marginBottom:e.spacing(1),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flexShrink:0},headBarTitle:{flexGrow:1},headBarTitleText:{textTransform:"uppercase",fontSize:e.typography.body2.fontSize,color:e.palette.text.primary},headBarToolBar:{display:"flex",alignItems:"center",fontSize:e.typography.body2.fontSize,minHeight:"40px"},headBarToolBarFocused:{borderColor:e.palette.primary.light},appsContainer:{flexGrow:1,marginTop:e.spacing(4),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),overflowY:"auto",overflowX:"hidden"},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1),width:180},icon:{color:e.palette.text.disabled,marginLeft:e.spacing(1)},closeIcon:{color:e.palette.text.disabled,width:"16px",height:"16px","&:hover":{color:e.palette.text.primary,cursor:"pointer"}},divider:{height:22,marginTop:e.spacing(.5),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),marginLeft:e.spacing(1)},menuButton:{padding:e.spacing(.5),marginRight:e.spacing(.5),color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},menuButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},description:{marginLeft:e.spacing(.5),fontSize:"0.75rem",color:e.palette.text.disabled,fontStyle:"italic"},description2:{fontSize:"0.75rem",color:e.palette.text.disabled,fontStyle:"italic"},actionButton:{marginLeft:e.spacing(2)},actionButtonIcon:{marginRight:e.spacing(1)},grid:{display:"flex"},cardHolder:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap"},card:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap",borderWidth:"1px",borderStyle:"solid",borderColor:e.palette.divider,overflow:"hidden",backgroundColor:e.palette.background.layer1},actionArea:{cursor:"pointer","&:hover":{opacity:.05}},fadeActionArea:{opacity:.05},designerButton:{position:"absolute",opacity:1,left:"45%",top:"50%",transform:"translate(-50%, -50%)",fontWeight:500,fontSize:e.typography.body1.fontSize,whiteSpace:"nowrap"},loadDesigner:{display:"flex",flexDirection:"row",alignItems:"center"},loadSpinner:{marginRight:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,backgroundColor:"transparent"},cardHeader:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),paddingTop:e.spacing(1),paddingBottom:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"center"},cardHeaderTitle:{fontWeight:500,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},cardContent:{flexGrow:1,padding:e.spacing(2,2,2,2),marginRight:e.spacing(10),backgroundColor:e.palette.background.layer2,fontSize:e.typography.body2.fontSize,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",borderTopRightRadius:2*e.shape.borderRadius,borderBottomRightRadius:2*e.shape.borderRadius,zIndex:100},panelImage:{position:"absolute",top:"40px",right:"-80px"},image:{width:"180px",height:"180px"},panelImage2:{position:"absolute",top:"80px",right:"10px"},image2:{minWidth:"60px",minHeight:"60px",maxWidth:"60px",maxHeight:"60px",color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},shortDesc:{flexGrow:1,color:e.palette.text.secondary,minHeight:e.spacing(10),wordBreak:"break-word",whiteSpace:"normal",wordWrap:"break-word",fontSize:e.typography.caption.fontSize},dateTime:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary,margin:e.spacing(1,0)},ownershipSatus:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary},disabledAccount:{fontSize:e.typography.caption.fontSize,color:e.palette.error.main},ownerAvatar:{marginTop:e.spacing(.5)},avatar:{width:"36px",height:"36px",fontSize:e.typography.body2.fontSize},cardFooter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(.5),paddingTop:e.spacing(.5),display:"flex",flexDirection:"row",alignItems:"center"},cardFooterIcon:{width:"24px",height:"24px",minWidth:"24px",color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},cardFooterIcon2:{width:"18px",height:"18px",minWidth:"18px",maxWidth:"18px",color:"light"===e.palette.type?e.palette.text.secondary:e.palette.primary.linkForDark},favorite:{color:e.palette.error.main},cardFooterRightButton:{marginLeft:"auto",padding:e.spacing(.5)},cardFooterLeftButton:{padding:e.spacing(1)},progress:{position:"absolute",left:0},progressLeft:{marginLeft:"auto"},rightMargin:{marginRight:e.spacing(.5)},disabled:{color:e.palette.text.disabled},fullWidth:{flexGrow:1},tabList:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.divider,marginBottom:e.spacing(2),borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},tabTextWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},tabIcon:{marginRight:e.spacing(1),width:"18px",height:"18px",minWidth:"18px"},tabRoot:{minWidth:0},footerStat:{padding:e.spacing(.5),display:"flex",alignItems:"center",fontSize:e.typography.caption.fontSize},buttonIconRight:{width:"14px",height:"14px",minWidth:"14px",marginLeft:e.spacing(1)},draft:{marginLeft:e.spacing(1),padding:e.spacing(.25),fontSize:"0.6rem",backgroundColor:e.palette.warning.light,color:e.palette.common.white,borderRadius:e.shape.borderRadius,fontWeight:500},final:{marginLeft:e.spacing(1),padding:e.spacing(.25),fontSize:"0.6rem",backgroundColor:e.palette.success.light,color:e.palette.common.white,borderRadius:e.shape.borderRadius,fontWeight:500}}}),{withTheme:!0})(Object(y.a)()(ct))))}}]);