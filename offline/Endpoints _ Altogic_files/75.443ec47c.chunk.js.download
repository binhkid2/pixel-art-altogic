(this["webpackJsonpui-designer"]=this["webpackJsonpui-designer"]||[]).push([[75],{578:function(e,a,t){"use strict";var n=t(2),l=t.n(n),s=t(3),o=t(11),r=t(12),i=t(13),c=t(14),d=t(5),p=t.n(d),m=t(349),u=t.n(m),h=t(51),g=t(22),f=t(109),E=t(61),y=t(323),v=t(346),b=t.n(v),S=t(796),w=t(805),I=t(799),N=t(806),_=t(800),k=t(298),x=t(778),T=t(80),C=t(71),A=t(337),D=t(807),R=t(811),O=t(810),P=t(904),W=t(808),j=t(809),M=t(561),L=t(589),z=t(671),B=t(381),U=t(745),F=t(82),G=t(328),H=t(81),Y=t(17),q=t(60),V=t(342),K=t(338),Q=function(e){Object(i.a)(t,e);var a=Object(c.a)(t);function t(e){var n;Object(o.a)(this,t),(n=a.call(this,e)).isDefault=function(e){for(var a=n.props,t=a.user,l=a.app,s=0;s<t.apps.length;s++){var o=t.apps[s];if(o.appId===l._id&&o.defaultSnapId===e._id)return!0}return!1},n.onClose=function(){(0,n.props.handleClose)(),n.setState({error:null,snaps:null,sortKey:"name",order:"asc",searchStr:""})},n.sort=function(e){var a=n.state,t=a.sortKey,l=a.order;e===t?n.setState({order:"asc"===l?"desc":"asc"}):n.setState({sortKey:e,order:"asc"})},n.searchSnaps=function(e){n.setState({searchStr:e.target.value&&e.target.value.trim()})},n.openSnap=function(e){var a=n.props,t=a.handleClose,l=a.history,s=a.user,o=a.app,r=a.callback;t(),r?r(e):l.push("/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(e._id,"/models"))};var l=n.props.user.uiPreferences.defaultSortOrder,s="date",r="desc";return"most-recent"===l?(s="date",r="desc"):"oldest-first"===l?(s="date",r="asc"):"alphabetically-asc"===l?(s="name",r="asc"):(s="name",r="desc"),n.state={error:null,sortKey:s,order:r,searchStr:"",snaps:null},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,a=e.classes,t=e.t,n=e.open,l=e.handleClose,s=e.fullWidth,o=e.maxWidth,r=e.isDeployment,i=e.width,c=this.state.error;return p.a.createElement(S.a,{fullWidth:s,maxWidth:o,fullScreen:"xs"===i,open:n,onClose:function(e,a){if("backdropClick"===a)return!1;l()},"aria-labelledby":"load-snapshot-dialog",classes:{paper:"xs"===i?null:a.dialogPaper}},p.a.createElement(w.a,{id:"load-snapshot-dialog"},p.a.createElement(T.a,{component:"span",variant:"h6"},t(r?"Deploy snapshot":"Open snapshot")),p.a.createElement(x.a,{"aria-label":"close",className:a.closeButton,onClick:this.onClose},p.a.createElement(F.a,{icon:G.x,className:a.closeButtonIcon}))),this.renderSearch(),p.a.createElement(I.a,{classes:{root:a.dialogContentRoot},className:a.dialogContentContainer,style:{flexGrow:"xs"===i?0:1}},c?this.renderError():this.renderContent()),p.a.createElement(_.a,{className:a.dialogActions},p.a.createElement(k.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},t("Cancel"))))}},{key:"renderError",value:function(){var e=this.props,a=e.t,t=e.classes,n=this.state.error;return n?p.a.createElement(N.a,{component:"div",className:t.fillSpace},p.a.createElement(C.a,{mainMessage:a("An error has occured while loading snapshots!"),message:n,bottomMargin:!1})):null}},{key:"renderSearch",value:function(){var e=this,a=this.state.searchStr,t=this.props,n=t.t,l=t.classes,s=t.isDeployment,o=t.isSwitch;return p.a.createElement("div",{className:l.searchBar},p.a.createElement(T.a,{component:"h1",variant:"body2",className:l.marginBottom},p.a.createElement(z.a,{severity:"info"},n(s?"Select a snapshot from table below for deployment":o?"Select a snapshot from table below to replace the current deployed snapshot of the environment":"Select a snapshot from table below to open it in designer."))),p.a.createElement(V.e,{placeholder:n("Search..."),align:"left",onChange:this.searchSnaps,marginLeft:!1,value:a,clearSearch:function(){return e.setState({searchStr:""})}}))}},{key:"renderContent",value:function(){var e=this.props,a=e.t,t=e.classes;return this.state.snaps?this.renderTable():(this.loadSnaps(),p.a.createElement("div",{className:t.fillSpace},p.a.createElement(A.a,{message:a("Loading snapshots..."),bottomMargin:!1})))}},{key:"renderTable",value:function(){var e=this,a=this.props,t=a.t,n=a.classes,l=a.width,s=this.state,o=s.sortKey,r=s.order;return p.a.createElement("div",{className:n.tableArea},p.a.createElement(D.a,{stickyHeader:!0,size:"small"},p.a.createElement(W.a,null,p.a.createElement(j.a,null,p.a.createElement(O.a,null,p.a.createElement(P.a,{active:"name"===o,direction:"name"===o?r:"asc",onClick:function(){return e.sort("name")}},p.a.createElement(F.a,{icon:H.ld,className:n.tableHeadIcon}),t("xs"===l?"Snapshot":"Name"))),p.a.createElement(U.a,{xsDown:!0},p.a.createElement(O.a,null,p.a.createElement(P.a,{active:"access"===o,direction:"access"===o?r:"asc",onClick:function(){return e.sort("access")}},p.a.createElement(F.a,{icon:H.nc,className:n.tableHeadIcon}),t("Access")))),p.a.createElement(O.a,null,p.a.createElement(P.a,{active:"date"===o,direction:"date"===o?r:"asc",onClick:function(){return e.sort("date")}},p.a.createElement(F.a,{icon:H.B,className:n.tableHeadIcon}),t("Created at"))))),p.a.createElement(R.a,null,this.renderSnapshots())))}},{key:"renderSnapshots",value:function(){var e=this,a=this.props,t=a.classes,n=a.t,l=a.theme,s=a.isDeployment,o=this.state.searchStr,r=this.getProcessedSnaps();return 0===this.state.snaps.length?p.a.createElement(j.a,null,p.a.createElement(O.a,{colSpan:3},p.a.createElement(z.a,{severity:"info"},n(s?"Either you don't have any snapshots to deploy or you do not have authorization to view other team member's snapshots.":"Either you don't have any snapshots to work on or you do not have authorization to view other team member's snapshots.")))):0===r.length&&this.state.snaps.length>0?p.a.createElement(j.a,null,p.a.createElement(O.a,{colSpan:3},p.a.createElement("div",{className:t.noDataPlaceholder},p.a.createElement(K.a,{icon:H.Ab,mainMessage:n("No items matching search and/or filter criteria"),message:n("Didn't find what you're looking for? Some snapshots may be hidden because of the search query you've entered."),smallIcon:!0,action:n("Reset filters"),actionIcon:H.xd,callBack:function(){e.setState({searchStr:""})},searchResult:!0}))," ")):r.map((function(a){return p.a.createElement(j.a,{key:a._id,hover:!0,className:t.selectRow,onClick:function(){return e.openSnap(a)}},p.a.createElement(O.a,{component:"th",scope:"row",className:t.noWrap},p.a.createElement("div",null,p.a.createElement(L.a,null,p.a.createElement("span",{className:t.noWrap},p.a.createElement(b.a,{highlightClassName:t.highlight,searchWords:[o],autoEscape:!0,textToHighlight:a.name}))),a.master?p.a.createElement(B.a,{title:n("Master snapshot"),placement:"bottom",enterDelay:Y.a.tooltipEnterDelay,enterNextDelay:Y.a.tooltipEnterNextDelay},p.a.createElement("span",{className:t.sticker},p.a.createElement(F.a,{icon:H.xb}))):null,e.isDefault(a)?p.a.createElement(B.a,{title:n("Default snapshot"),placement:"bottom",enterDelay:Y.a.tooltipEnterDelay,enterNextDelay:Y.a.tooltipEnterNextDelay},p.a.createElement("span",{className:t.sticker},p.a.createElement(F.a,{icon:H.m}))):null),p.a.createElement(U.a,{smUp:!0},p.a.createElement("div",{style:{marginTop:l.spacing(.5)}},p.a.createElement(M.a,{size:"small",label:a.private?p.a.createElement("span",null,p.a.createElement(F.a,{icon:H.ub,className:t.tableHeadIcon}),n("Private")):p.a.createElement("span",null,p.a.createElement(F.a,{icon:H.tb,className:t.tableHeadIcon}),n("Public")),className:a.private?t.private:t.public})))),p.a.createElement(U.a,{xsDown:!0},p.a.createElement(O.a,null,p.a.createElement(M.a,{size:"small",label:a.private?p.a.createElement("span",null,p.a.createElement(F.a,{icon:H.ub,className:t.tableHeadIcon}),n("Private")):p.a.createElement("span",null,p.a.createElement(F.a,{icon:H.tb,className:t.tableHeadIcon}),n("Public")),className:a.private?t.private:t.public}))),p.a.createElement(O.a,null,u()(a.createdAt).format("MMM Do, YYYY hh:mm a")))}))}},{key:"loadSnaps",value:function(){var e=Object(s.a)(l.a.mark((function e(){var a,t,n,s,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,t=a.user,n=a.app,s=a.getSnapshotsAction,o=a.match,!t||!n){e.next=6;break}return e.next=4,s(o.params.userId,t.token,n._id);case 4:200!==(r=e.sent).status?this.setState({error:r.data.details,snaps:null}):this.setState({error:null,snaps:r.data});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProcessedSnaps",value:function(){var e=this.state,a=e.snaps,t=e.sortKey,n=e.order,l=e.searchStr,s=this.props.filteredSnaps,o="asc"===n?1:-1,r=a;if(s&&s.length>0&&(r=r.filter((function(e){return!s.includes(e._id)}))),l&&l.length>0){var i=new RegExp(l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");r=a.filter((function(e){return e.name.search(i)>=0}))}return"name"===t?r.sort((function(e,a){var t=e.name.toLowerCase(),n=a.name.toLowerCase();return t<n?-1*o:t>n?1*o:0})):"access"===t?r.sort((function(e,a){var t=e.private?1:0;return((a.private?1:0)-t)*o})):r.sort((function(e,a){return(new Date(e.createdAt)-new Date(a.createdAt))*o}))}}]),t}(p.a.PureComponent);a.a=Object(E.g)(Object(h.b)((function(e){return{user:e.user}}),{getSnapshotsAction:q.zd})(Object(y.a)()(Object(g.a)((function(e){return{dialogPaper:{minHeight:"600px",maxHeight:"600px"},dialogContentContainer:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"flex-start",flexWrap:"nowrap",paddingTop:0,marginRight:"2px"},fillSpace:{flexGrow:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},fillSpaceTop:{flexGrow:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},dialogContentRoot:{"&:first-child":{paddingTop:8}},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},searchBar:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},marginBottom:{marginBottom:e.spacing(1)},tableHeadIcon:{marginRight:e.spacing(.5)},selectRow:{cursor:"pointer",borderBottom:0},noWrap:{whiteSpace:"normal",wordWrap:"break-word"},private:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,color:e.palette.error.main,cursor:"pointer"},public:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,color:e.palette.success.main,cursor:"pointer"},master:{height:"20px",fontSize:"0.6rem",cursor:"pointer"},highlight:{backgroundColor:"#ffeb3b"},tableArea:{flexGrow:1,overflowY:"auto",overflowX:"auto",paddingRight:e.spacing(1)},sticker:{marginLeft:e.spacing(.5),fontSize:"0.6rem",padding:e.spacing(.5),borderRadius:e.shape.borderRadius,color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,backgroundColor:e.palette.background.layer2}}}),{withTheme:!0})(Object(f.a)()(Q)))))},879:function(e,a,t){"use strict";t.r(a);var n=t(4),l=t(2),s=t.n(l),o=t(3),r=t(11),i=t(12),c=t(13),d=t(14),p=t(122),m=t(5),u=t.n(m),h=t(744),g=t(18),f=t(506),E=t(713),y=t(22),v=t(323),b=t(511),S=t(109),w=t(51),I=t(714),N=t(120),_=t(434),k=t(814),x=t(778),T=t(80),C=t(561),A=t(299),D=t(298),R=t(82),O=t(328),P=t(81),W=t(326),j=t(359),M=t(61),L=t(177),z=t(745),B=t(536),U=t(791),F=t(803),G=t(691),H=t(804),Y=t(17),q=t(60),V=t(110),K=t(578),Q=function(e){Object(c.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).openCustomerPortal=Object(o.a)(s.a.mark((function e(){var a,t,l,o,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.openingPortal){e.next=3;break}return e.abrupt("return");case 3:return a=n.props,t=a.user,l=a.createCustomerPortalSessionAction,o=a.location,n.setState({openingPortal:!0}),e.next=7,l(t._id,t.token,{redirectUrl:Y.a.baseClientURL+o.pathname});case 7:r=e.sent,n.setState({openingPortal:!1}),200===r.status&&(window.location.href=r.data.url);case 10:case"end":return e.stop()}}),e)}))),n.showMenu=function(){n.setState({showMenu:!0})},n.hideMenu=function(){n.setState({showMenu:!1})},n.showSwitchSnapshotDialog=function(){n.setState({openSwitchSnapshotDialog:!0})},n.hideSwitchSnapshotDialog=function(){n.setState({openSwitchSnapshotDialog:!1})},n.state={showMenu:!1,showAppSettings:!1,showAccountSettings:!1,openSwitchSnapshotDialog:!1,openingPortal:!1},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state.openSwitchSnapshotDialog,a=this.props,t=a.classes,n=a.head,l=a.children,s=a.centered,o=a.width,r=a.user,i=a.showMenu,c=a.app;return r?s?u.a.createElement(_.a,{maxWidth:"lg",className:t.centeredContainer},u.a.createElement(N.a,{className:t.container},u.a.createElement(N.a,{className:t.headerCentered},n),l)):u.a.createElement(N.a,{className:t.container},u.a.createElement(N.a,{className:t.header},i?u.a.createElement("div",{className:t.headerItemsHolder},u.a.createElement(z.a,{mdUp:!0},u.a.createElement("div",{className:t.menuButton},u.a.createElement(x.a,{className:t.button,onClick:this.showMenu},u.a.createElement(R.a,{icon:O.c,fixedWidth:!0,style:{width:"xs"===o||"sm"===o?"30":"36"}})))),u.a.createElement("div",{style:{flexGrow:1}},n)):n),l,u.a.createElement(z.a,{mdUp:!0},this.renderMenuDrawer(),e&&u.a.createElement(K.a,{fullWidth:!0,maxWidth:"sm",open:e,handleClose:this.hideSwitchSnapshotDialog,app:c}))):null}},{key:"renderMenuDrawer",value:function(){var e=this.props.classes,a=this.state.showMenu;return u.a.createElement(k.a,{anchor:"left",open:a,onClose:this.hideMenu,classes:{paper:e.menuPanel},elevation:4},this.renderDrawerHeader(),this.renderSwitchSnapshot(),this.renderDrawerContents())}},{key:"renderDrawerHeader",value:function(){var e=this.props,a=e.t,t=e.classes;return u.a.createElement("div",{className:t.drawerHeader},u.a.createElement("div",{className:t.title},u.a.createElement(T.a,{component:"h1",variant:"h6"},a("Menu"))),u.a.createElement(x.a,{className:t.closeButton,onClick:this.hideMenu},u.a.createElement(R.a,{icon:O.x,className:t.closeButtonIcon})))}},{key:"renderSwitchSnapshot",value:function(){var e=this.props,a=e.t,t=e.classes,n=e.theme,l=e.app,s=e.activeSnap;return l?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:t.appArea},l.name),u.a.createElement("div",{className:t.snapshotArea},s?u.a.createElement("div",{className:t.snapshotName},u.a.createElement(R.a,{icon:P.C,style:{marginRight:n.spacing(.5)},fixedWidth:!0}),s.name):u.a.createElement("div",{className:t.snapshotName},a("No snapshot selected")),u.a.createElement("div",{className:t.snapshotSwitch,onClick:this.showSwitchSnapshotDialog},a("Switch")))):null}},{key:"renderDrawerContents",value:function(){var e=this,a=this.props,t=a.t,n=a.classes,l=a.theme,s=a.user,o=a.app,r=a.activeSnap,i=a.authActionGroup,c=this.state,d=c.showAppSettings,p=c.showAccountSettings,m=null;return s&&o&&(m=i(["view-models","view-services","view-queues","view-tasks","view-endpoints","view-envs","test-snapshot","manage-app-settings"],{app:o})),u.a.createElement(B.a,{component:"nav"},u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:"/users/".concat(s._id,"/apps"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.u,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Apps")))})),u.a.createElement(H.a,null),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?r&&-1!==r?"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(r._id,"/home"):"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/home"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Yb,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Home")))})),m&&1===m["view-models"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?r&&-1!==r?"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(r._id,"/models"):"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/models"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.jd,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Models")))})),m&&1===m["view-services"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?r&&-1!==r?"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(r._id,"/services"):"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/services"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.vc,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Services")))})),m&&1===m["view-endpoints"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?r&&-1!==r?"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(r._id,"/endpoints"):"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/endpoints"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.sc,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Endpoints")))})),m&&1===m["view-queues"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?r&&-1!==r?"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(r._id,"/queues"):"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/queues"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.hc,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Message queues")))})),m&&1===m["view-tasks"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?r&&-1!==r?"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/").concat(r._id,"/tasks"):"/users/".concat(s._id,"/apps/").concat(o._id,"/snaps/tasks"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.a,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Tasks")))})),m&&(1===m["view-models"]||1===m["view-services"]||1===m["view-queues"]||1===m["view-tasks"]||1===m["view-endpoints"])&&u.a.createElement(H.a,null),m&&1===m["view-envs"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,component:L.a,to:s&&o?"/users/".concat(s._id,"/apps/").concat(o._id,"/envs"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.U,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Environments")))})),m&&1===m["view-envs"]&&1===m["manage-app-settings"]&&u.a.createElement(H.a,null),m&&1===m["manage-app-settings"]&&u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,onClick:function(){e.setState({showAppSettings:!d})}},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.X,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("App settings")))}),d?u.a.createElement("span",{style:{color:l.palette.text.primary,marginRight:l.spacing(2)}},u.a.createElement(R.a,{icon:W.f})):u.a.createElement("span",{style:{color:l.palette.text.primary,marginRight:l.spacing(2)}},u.a.createElement(R.a,{icon:W.d}))),u.a.createElement(G.a,{in:d,timeout:"auto",unmountOnExit:!0},u.a.createElement("div",{style:{paddingLeft:l.spacing(4)}},this.renderAppSettingsMenu()))),u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{button:!0,disableGutters:!0,className:n.menuItem,onClick:function(){e.setState({showAccountSettings:!p})}},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Bd,className:n.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Account settings")))}),p?u.a.createElement("span",{style:{color:l.palette.text.primary,marginRight:l.spacing(2)}},u.a.createElement(R.a,{icon:W.f})):u.a.createElement("span",{style:{color:l.palette.text.primary,marginRight:l.spacing(2)}},u.a.createElement(R.a,{icon:W.d}))),u.a.createElement(G.a,{in:p,timeout:"auto",unmountOnExit:!0},u.a.createElement("div",{style:{paddingLeft:l.spacing(4)}},this.renderAccountSettingsMenu()))))}},{key:"renderAppSettingsMenu",value:function(){var e=this.props,a=e.t,t=e.user,n=e.app,l=e.authActionGroup,s=e.classes,o=l(["view-team","view-roles","view-invites","transfer-ownership","view-app-logs","view-snapshots","view-approles","view-params","view-conns","view-nodes","update-app","view-models","view-envs","update-model"],{app:n});return!1===o.isAuthorized?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/info"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.cc,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("App info")))})),o&&1===o["view-snapshots"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:t&&n?"/users/".concat(t._id,"/apps/").concat(n._id,"/snaps"):"#",onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.C,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Snapshots")))})),o&&1===o["update-app"]&&1===o["view-models"]&&1===o["view-envs"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/auth"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.mc,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Authentication")))})),o&&1===o["update-app"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/clientlib"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.ec,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Client library keys")))})),o&&1===o["update-app"]&&1===o["update-model"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/objsecurity"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.D,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Object level security")))})),o&&1===o["update-app"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/ratelimit"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.kd,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Rate limiting")))})),o&&1===o["view-approles"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/approles"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.ac,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Access groups")))})),o&&1===o["view-params"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/params"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.jc,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Parameters")))})),o&&1===o["view-conns"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/connections"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.uc,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("External connections")))})),o&&1===o["view-nodes"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/nodes"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.jb,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Custom nodes")))})),o&&1===o["view-app-logs"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/logs"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Vb,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Activity history")))})),o&&(1===o["view-roles"]||1===o["view-team"]||1===o["view-invites"])&&u.a.createElement(H.a,null),o&&1===o["view-roles"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/roles"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Dd,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Team roles")))})),o&&1===o["view-team"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/team"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Gd,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Team members")))})),o&&1===o["view-invites"]&&u.a.createElement(U.a,{button:!0,disableGutters:!0,className:s.menuItem,component:L.a,to:"/users/".concat(t._id,"/apps/").concat(n._id,"/settings/invites"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.nb,className:s.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,a("Invitations")))})))}},{key:"renderAccountSettingsMenu",value:function(){var e=this.state.openingPortal,a=this.props,t=a.t,n=a.theme,l=a.user,s=a.app,o=a.classes;return u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/profile"):"/users/".concat(l._id,"/profile-settings/profile"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Zb,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Profile")))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/email"):"/users/".concat(l._id,"/profile-settings/email"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.mb,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Email")))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/account"):"/users/".concat(l._id,"/profile-settings/account"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Cd,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Account")))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/account-security"):"/users/".concat(l._id,"/profile-settings/account-security"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Tc,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Account security")))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/security-history"):"/users/".concat(l._id,"/profile-settings/security-history"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Vb,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Account logs")))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/subscriptions"):"/users/".concat(l._id,"/profile-settings/subscriptions"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.Nc,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Subscriptions")))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,onClick:this.openCustomerPortal},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement("div",{style:{display:"flex",alignItems:"center"}},!e&&u.a.createElement(R.a,{icon:P.zb,className:o.menuItemIcon,fixedWidth:!0}),e&&u.a.createElement(A.a,{size:17,className:o.menuItemIcon}),u.a.createElement("span",null,t("Billing")),u.a.createElement(R.a,{icon:W.P,style:{marginLeft:n.spacing(1),fontSize:n.typography.caption.fontSize}})))})),u.a.createElement(U.a,{button:!0,disableGutters:!0,className:o.menuItem,component:L.a,to:s?"/users/".concat(l._id,"/apps/").concat(s._id,"/profile-settings/publisher"):"/users/".concat(l._id,"/profile-settings/publisher"),onClick:this.hideMenu},u.a.createElement(F.a,{disableTypography:!0,primary:u.a.createElement("div",null,u.a.createElement(R.a,{icon:O.y,className:o.menuItemIcon,fixedWidth:!0}),u.a.createElement("span",null,t("Publisher")))})))}}]),t}(u.a.PureComponent);Q.defaultProps={centered:!1};var X=Object(M.g)(Object(w.b)((function(e){return{user:e.user,app:e.app,activeSnap:e.activeSnap}}),{authActionGroup:V.b,createCustomerPortalSessionAction:q.I})(Object(v.a)()(Object(y.a)((function(e){return{centeredContainer:{flexGrow:1,display:"flex"},container:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",overflow:"hidden",backgroundColor:e.palette.background.paper},header:{display:"flex",flexDirection:"column",alignItems:"stretch",flexWrap:"nowrap",flexShrink:0,minHeight:e.spacing(6),overflow:"hidden",borderBottom:"1px solid",borderBottomColor:e.palette.divider},headerCentered:{display:"flex",flexDirection:"column",alignItems:"stretch",flexWrap:"nowrap",flexShrink:0,minHeight:e.spacing(6),overflow:"hidden",borderBottom:"1px solid",borderBottomColor:e.palette.divider},headerItemsHolder:{display:"flex",alignItems:"flex-start",flexGrow:1},menuButton:{flexShrink:0,minHeight:e.spacing(6),overflow:"hidden",display:"flex",alignItems:"center",marginLeft:e.spacing(1)},button:{flexShrink:0,padding:e.spacing(.5)},logo:{marginLeft:"auto",marginRight:"auto",display:"block"},menuPanel:{width:"75%"},drawerHeader:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:e.spacing(1),marginTop:e.spacing(1),flexShrink:0},title:{flexGrow:1,paddingLeft:e.spacing(2)},closeButton:{padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},menuItem:{padding:e.spacing(1,2,1,2),fontSize:e.typography.body1.fontSize},menuItemIcon:{marginRight:e.spacing(2),color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},appArea:{display:"flex",alignItems:"center",padding:e.spacing(2,0,0,2),color:e.palette.text.disabled,fontSize:e.typography.caption.fontSize},snapshotArea:{display:"flex",alignItems:"center",padding:e.spacing(0,0,0,2)},snapshotName:{flexGrow:1,color:e.palette.text.disabled,fontSize:e.typography.caption.fontSize},snapshotSwitch:{flexShrink:0,marginRight:e.spacing(2),color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,fontSize:e.typography.caption.fontSize,"&:hover":{cursor:"pointer",textDecoration:"underline"}}}}),{withTheme:!0})(Object(S.a)()(Q))))),J=t(71),Z=t(337),$=t(352),ee=t(342),ae=t(796),te=t(805),ne=t(799),le=t(800),se=function(e){Object(c.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).onClick=function(){var a=e.props,t=a.handleClose,n=a.callback;t(),n&&n()},e.onClose=function(){(0,e.props.handleClose)()},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.t,n=e.open,l=e.handleClose,s=e.fullWidth,o=e.maxWidth,r=e.width,i=e.title,c=e.showCancel,d=e.buttonTitle,p=e.message,m=e.showCloseCross;return u.a.createElement(ae.a,{fullWidth:s,maxWidth:o,fullScreen:"xs"===r,open:n,onClose:function(e,a){if("backdropClick"===a)return!1;l()},disableEscapeKeyDown:!0,"aria-labelledby":"info-message-dialog"},u.a.createElement(te.a,{id:"info-message-dialog"},u.a.createElement(T.a,{component:"span",variant:"h6"},i),m&&u.a.createElement(x.a,{"aria-label":"close",className:a.closeButton,onClick:this.onClose},u.a.createElement(R.a,{icon:O.x,className:a.closeButtonIcon}))),u.a.createElement(ne.a,{classes:{root:a.dialogContentRoot},style:{flexGrow:"xs"===r?0:1}},u.a.createElement("div",{className:a.container},u.a.createElement(R.a,{icon:P.pb,className:a.icon}),u.a.createElement("div",{className:a.message},p))),u.a.createElement(le.a,{className:a.dialogActions},u.a.createElement(D.a,{type:"submit",variant:"contained",disableElevation:!0,color:"primary",onClick:this.onClick},d||t("OK")),c&&u.a.createElement(D.a,{variant:"contained",disableElevation:!0,onClick:this.onClose},t("Cancel"))))}}]),t}(u.a.PureComponent);se.defaultProps={title:null,buttonTitle:null,showCancel:!1,callback:null,message:null,showCloseCross:!1};var oe=Object(v.a)()(Object(y.a)((function(e){return{progress:{marginRight:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(2),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},red:{color:e.palette.error.main},container:{display:"flex",flexDirection:"row",alignItems:"flext-start"},icon:{fontSize:"3rem",color:e.palette.warning.main,marginRight:e.spacing(2)},message:{flexGrow:1},dialogContentRoot:{"&:first-child":{paddingTop:8}},dialogActions:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},confirmText:{marginBottom:e.spacing(1)}}}),{withTheme:!0})(Object(S.a)()(se))),re=t(129),ie=t(346),ce=t.n(ie),de=t(639),pe=t.n(de),me=t(903),ue=t(499),he=t(557),ge=t(119),fe=t(351),Ee=t(338),ye=t(366),ve=["InputLabelProps","InputProps"],be=function(e){Object(c.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).getMethodClass=function(e,a){return!1===a.enabled?e.disabledMethod:"GET"===a.method?e.getMethod:"POST"===a.method?e.postMethod:"PUT"===a.method?e.putMethod:"DELETE"===a.method?e.deleteMethod:void 0},n.resetSearch=function(){var e=n.state.searchType,a=n.props.setAppSearchResults,t={};"name"===e?t.searchNameStr="":"node"===e?t.searchNodeStr="":"field"===e?(t.searchField=null,t.autoCompleteText=""):"model"===e&&(t.searchModel=null,t.autoCompleteText=""),a(null),n.setState(t)},n.executeSearch=function(){var e=Object(o.a)(s.a.mark((function e(a){var t,l,o,r,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.searchType,l=n.props,o=l.user,r=l.app,i=l.activeSnap,c=l.searchAppAction,a&&("name"!==t&&"node"!==t||""!==a.trim())){e.next=4;break}return e.abrupt("return");case 4:return n.setState({searching:!0,hasErrors:!1,searchResults:null}),e.next=7,c(o._id,o.token,r._id,i._id,{type:t,input:a});case 7:200===e.sent.status?n.setState({searching:!1}):n.setState({hasErrors:!0,searching:!1});case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.panel=null,n.state={searchFocused:!1,searchType:"name",searchNameStr:"",searchNodeStr:"",searchField:null,searchModel:null,typeAnchorEl:null,searching:!1,hasErrors:!1,autoCompleteText:"",draggable:!1,dragging:!1},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.draggable,n=a.dragging,l=this.props,s=l.classes,o=l.t,r=l.theme,i=l.open,c=l.handleClose,d=l.fullWidth,p=l.maxWidth,m=l.width,h=l.searchResults;if(t&&"xs"!==m){var g={x:(window.innerWidth-Y.a.searchPanelWidth)/2,y:(window.innerHeight-(this.panel?this.panel.clientHeight+64:190))/2};return u.a.createElement(pe.a,{handle:"#search-panel-handle",defaultPosition:g,bounds:{left:0,top:0,right:window.innerWidth-Y.a.searchPanelWidth,bottom:window.innerHeight-64},onStart:function(){return e.setState({dragging:!0})},onStop:function(){return e.setState({dragging:!1})}},u.a.createElement(ge.a,{className:s.panel,elevation:n?12:6},u.a.createElement(te.a,{id:"search-panel-handle",style:{cursor:"move",backgroundColor:"light"===r.palette.type?r.palette.background.paper:r.palette.background.layer1}},u.a.createElement("div",{className:s.flexCenter},u.a.createElement(T.a,{component:"span",variant:"h6",className:s.flexGrow},u.a.createElement(R.a,{icon:W.Gb,className:s.searchIcon}),o("Search")),"xs"!==m&&u.a.createElement(x.a,{"aria-label":"drag",className:s.closeButton,onClick:function(){return e.setState({draggable:!t})}},u.a.createElement(R.a,{icon:t?O.z:O.b,className:s.closeButtonIcon})),u.a.createElement(x.a,{"aria-label":"close",className:s.closeButton,onClick:function(){h&&0===h.length&&e.resetSearch(),c()}},u.a.createElement(R.a,{icon:O.x,className:s.closeButtonIcon})))),u.a.createElement(ne.a,{classes:{root:s.dialogContentRoot}},this.renderSearchBar(),this.renderSearchResults())))}return u.a.createElement(ae.a,{fullScreen:"xs"===m,fullWidth:d,maxWidth:p,open:i,onClose:function(a,t){if("backdropClick"===t)return!1;h&&0===h.length&&e.resetSearch(),c()},"aria-labelledby":"search-dialog"},u.a.createElement(te.a,{id:"search-dialog"},u.a.createElement("div",{className:s.flexCenter},u.a.createElement(T.a,{component:"span",variant:"h6",className:s.flexGrow},u.a.createElement(R.a,{icon:W.Gb,className:s.searchIcon}),o("Search")),"xs"!==m&&u.a.createElement(x.a,{"aria-label":"drag",className:s.closeButton,onClick:function(){return e.setState({draggable:!t})}},u.a.createElement(R.a,{icon:t?O.z:O.b,className:s.closeButtonIcon})),u.a.createElement(x.a,{"aria-label":"close",className:s.closeButton,onClick:function(){h&&0===h.length&&e.resetSearch(),c()}},u.a.createElement(R.a,{icon:O.x,className:s.closeButtonIcon})))),u.a.createElement(ne.a,{classes:{root:s.dialogContentRoot},ref:function(a){return e.panel=a}},this.renderSearchBar(),this.renderSearchResults()))}},{key:"renderSearchBar",value:function(){var e=this.state,a=e.searchFocused,t=e.searchType,n=e.searching,l=this.props,s=l.t,o=l.classes,r=null;return r=n?u.a.createElement("div",{className:o.flexCenter},u.a.createElement(A.a,{size:14,className:o.mrhalf}),u.a.createElement("span",null,s("Searching..."))):"name"===t?u.a.createElement("div",null,s("Type the name of the item to search and hit enter"),u.a.createElement("span",{className:o.enter},"\u21b5")):"node"===t?u.a.createElement("div",null,s("Type the name of the node to search and hit enter"),u.a.createElement("span",{className:o.enter},"\u21b5")):"field"===t?u.a.createElement("div",null,s("Select the field from the drop-down list to search")):u.a.createElement("div",null,s("Select the model from the drop-down list to search")),u.a.createElement("div",null,u.a.createElement("div",{className:Object(g.default)(o.toolBar,a?o.toolBarFocused:null,n?null:o.toolBarActive)},this.renderInput(),u.a.createElement(H.a,{className:o.divider,orientation:"vertical"}),this.renderSearchType()),u.a.createElement("div",{className:Object(g.default)(o.desc)},r))}},{key:"renderInput",value:function(){var e=this,a=this.state,t=a.searchNameStr,n=a.searchNodeStr,l=a.searchType,s=a.searchField,o=a.searchModel,r=a.searching,i=a.autoCompleteText,c=this.props,d=c.t,p=c.classes,m=c.theme,h=c.app,f=c.rawModels;if("name"===l||"node"===l)return u.a.createElement("div",{className:Object(g.default)(p.flexCenter,p.flexGrow)},u.a.createElement(me.a,{className:p.input,placeholder:this.getPlacholderText(),inputRef:function(e){return e&&e.focus()},onChange:function(a){"name"===l?e.setState({searchNameStr:a.target.value}):e.setState({searchNodeStr:a.target.value})},onKeyDown:function(a){13===a.keyCode&&e.executeSearch(a.target.value)},onFocus:function(){return e.setState({searchFocused:!0})},onBlur:function(){return e.setState({searchFocused:!1})},value:"name"===l?t:n,inputProps:{spellCheck:"false"},disabled:r}),t&&"name"===l&&!r&&u.a.createElement(R.a,{icon:O.x,className:p.closeIcon,fixedWidth:!0,onClick:function(){return e.setState({searchNameStr:""})}}),n&&"node"===l&&!r&&u.a.createElement(R.a,{icon:O.x,className:p.closeIcon,fixedWidth:!0,onClick:function(){return e.setState({searchNodeStr:""})}}));if("field"===l||"model"===l){var E=this.getModels(f),y=this.getFields(f,h);return u.a.createElement(he.a,{disabled:r,className:p.input,autoComplete:!0,autoHighlight:!0,popupIcon:u.a.createElement(R.a,{icon:W.d,className:p.dropIcon,fixedWidth:!0}),options:"field"===l?y:E,noOptionsText:u.a.createElement("span",{style:{fontSize:m.typography.body2.fontSize}},d("field"===l?"No fields":"No models")),getOptionLabel:function(e){return e.fullName},getOptionSelected:function(e,a){return e._id===a._id},renderInput:function(a){a.InputLabelProps,a.InputProps;var t=Object(re.a)(a,ve);return u.a.createElement(me.a,Object.assign({inputRef:function(e){return e&&e.focus()}},a.InputProps,t,{placeholder:e.getPlacholderText()}))},renderOption:function(e){return"model"===l?u.a.createElement("div",{className:Object(g.default)(p.flexCenter,p.body2)},u.a.createElement(R.a,{icon:Object(ye.d)(e.type),className:Object(g.default)(p.optionIcon,Object(ye.e)(p,e.type)),fixedWidth:!0}),u.a.createElement(ce.a,{highlightClassName:p.highlight,searchWords:[i||""],autoEscape:!0,textToHighlight:e.fullName})):u.a.createElement("div",null,u.a.createElement("div",{className:Object(g.default)(p.flexCenter,p.body2)},u.a.createElement(R.a,{icon:Object(ye.d)(e.type),className:Object(g.default)(p.optionIcon,Object(ye.e)(p,e.type)),fixedWidth:!0}),e.name),u.a.createElement("div",{className:p.desc2},u.a.createElement(ce.a,{highlightClassName:p.highlight,searchWords:[i||""],autoEscape:!0,textToHighlight:e.fullName})))},onChange:function(a,t,n){"field"===l?e.setState({searchField:t}):e.setState({searchModel:t}),e.executeSearch(t)},value:"field"===l?s:o,onInputChange:function(a){return e.setState({autoCompleteText:a&&a.target&&a.target.value?a.target.value.trim():""})}})}}},{key:"renderSearchType",value:function(){var e=this,a=this.state.searching,t=this.props.classes;return u.a.createElement("div",{className:Object(g.default)(t.mlhalf,t.mrhalf)},u.a.createElement(C.a,{disabled:a,label:u.a.createElement("div",{className:t.searchTypeHolder},u.a.createElement("div",{className:Object(g.default)(t.body2,t.flexGrow)},this.getSearchTypeText()),u.a.createElement(R.a,{icon:W.d,className:t.mlhalf,fixedWidth:!0})),className:Object(g.default)(t.body2,t.bgcolor),onClick:function(a){e.setState({typeAnchorEl:a.currentTarget})}}),this.renderTypeMenu())}},{key:"renderTypeMenu",value:function(){var e=this,a=this.props.t,t=this.state,n=t.typeAnchorEl,l=t.searchType;return u.a.createElement(ue.a,{id:"searchCategoryMenu",anchorEl:n,open:Boolean(n),onClose:function(){return e.setState({typeAnchorEl:null})},elevation:4,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},u.a.createElement(fe.a,{key:"name",icon:P.ld,onClick:function(){e.setState({searchType:"name",typeAnchorEl:null})},selected:"name"===l},a("Name in app")),u.a.createElement(fe.a,{key:"field",icon:P.eb,onClick:function(){e.setState({searchType:"field",typeAnchorEl:null})},selected:"field"===l},a("Field in services")),u.a.createElement(fe.a,{key:"model",icon:P.jd,onClick:function(){e.setState({searchType:"model",typeAnchorEl:null})},selected:"model"===l},a("Model in services")),u.a.createElement(fe.a,{key:"node",icon:P.Id,onClick:function(){e.setState({searchType:"node",typeAnchorEl:null})},selected:"node"===l},a("Node in services")))}},{key:"renderSearchResults",value:function(){var e=this,a=this.props,t=a.t,n=a.classes,l=a.width,s=a.searchResults,o=a.setAppSearchResults;return s?0===s.length?u.a.createElement("div",{className:n.noDataPlaceholder},u.a.createElement(Ee.a,{icon:P.Ab,mainMessage:t("No items found"),message:t("No items found matching your search criteria."),smallIcon:!0,searchResult:!0,action:t("Reset search"),actionIcon:W.Wb,callBack:this.resetSearch})):u.a.createElement("div",null,u.a.createElement("div",{className:n.flexCenter},u.a.createElement("div",{className:Object(g.default)(n.title,n.flexGrow)},t("Results"),"\xa0",u.a.createElement("span",{className:n.badge},s.length)),u.a.createElement("div",{className:n.anchor,onClick:function(){return o(null)}},t("Clear results"))),u.a.createElement("div",{className:Object(g.default)(n.searchResults,"xs"!==l?n.wideScreen:null)},s.map((function(a,t){return"model"===a.element?e.renderModel(a,t):"field"===a.element?e.renderField(a,t):"endpoint"===a.element?e.renderEndpoint(a,t):"service"===a.element?e.renderService(a,t):"queue"===a.element?e.renderQueue(a,t):"task"===a.element?e.renderTask(a,t):"approle"===a.element?e.renderAppRole(a,t):"appparam"===a.element?e.renderAppParam(a,t):"appconn"===a.element?e.renderAppConn(a,t):null})))):null}},{key:"renderModel",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.activeSnap,d=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(c._id,"/models/").concat(e._id)),t||d()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:Object(ye.d)(e),fixedWidth:!0,className:s.mrhalf}),Object(ye.c)(l,e)),u.a.createElement("div",{className:s.entryName},e.fullName))}},{key:"renderField",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.activeSnap,d=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(c._id,"/models/").concat(e.modelId,"/fields/").concat(e._id)),t||d()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.eb,fixedWidth:!0,className:s.mrhalf}),l("Field")),u.a.createElement("div",{className:s.entryName},e.fullName))}},{key:"renderEndpoint",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.activeSnap,d=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(c._id,"/endpoints?ep=").concat(e._id)),t||d()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.sc,fixedWidth:!0,className:s.mrhalf}),l("Endpoint")),u.a.createElement("div",{className:s.entryName},e.name),u.a.createElement("div",{className:s.subText},u.a.createElement("span",{className:Object(g.default)(s.method,this.getMethodClass(s,e))},e.method),u.a.createElement("span",null,e.path)))}},{key:"renderService",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.activeSnap,d=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(c._id,"/services/").concat(e._id)),t||d()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.vc,fixedWidth:!0,className:s.mrhalf}),l("Service"),u.a.createElement("span",{className:s.mlhalf},"(",e.type,")")),u.a.createElement("div",{className:s.entryName},e.name),e.nodes&&e.nodes.map((function(e,a){return u.a.createElement("div",{className:s.subText2,key:e._id+"."+a},u.a.createElement("span",{className:s.mrhalf},e.name),e.matchFields&&e.matchFields.map((function(e,a){return u.a.createElement(C.a,{key:e.iname+"."+a,size:"small",label:u.a.createElement("div",{className:s.flexCenter},u.a.createElement(R.a,{icon:P.O,className:s.mrhalf,fixedWidth:!0}),u.a.createElement("div",{className:s.fieldInfoText},e.configName)),className:s.fieldInfo})})),e.matchExps&&e.matchExps.map((function(e,a){return u.a.createElement(C.a,{key:e._id+"."+a,size:"small",label:u.a.createElement("div",{className:Object(g.default)(s.flexCenter,s.expInfoText)},u.a.createElement(R.a,{icon:P.Ib,className:s.mrhalf,fixedWidth:!0}),u.a.createElement("div",null,e.configName)),className:s.expInfo})})))})))}},{key:"renderQueue",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.activeSnap,d=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(c._id,"/queues?queue=").concat(e._id)),t||d()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.hc,fixedWidth:!0,className:s.mrhalf}),l("Message queue")),u.a.createElement("div",{className:s.entryName},e.name))}},{key:"renderTask",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.activeSnap,d=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/snaps/").concat(c._id,"/tasks?task=").concat(e._id)),t||d()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.a,fixedWidth:!0,className:s.mrhalf}),l("Task")),u.a.createElement("div",{className:s.entryName},e.name))}},{key:"renderAppRole",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/settings/approles")),t||c()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.ac,fixedWidth:!0,className:s.mrhalf}),l("Acces group")),u.a.createElement("div",{className:s.entryName},e.name))}},{key:"renderAppParam",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/settings/params")),t||c()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.jc,fixedWidth:!0,className:s.mrhalf}),l("App parameter")),u.a.createElement("div",{className:s.entryName},e.name))}},{key:"renderAppConn",value:function(e,a){var t=this.state.draggable,n=this.props,l=n.t,s=n.classes,o=n.history,r=n.user,i=n.app,c=n.handleClose;return u.a.createElement("div",{key:e._id+"."+a,className:Object(g.default)(s.entry,t?s.entrybg:s.entrybg2),onClick:function(){o.push("/users/".concat(r._id,"/apps/").concat(i._id,"/settings/connections")),t||c()}},u.a.createElement("div",{className:s.type},u.a.createElement(R.a,{icon:P.uc,fixedWidth:!0,className:s.mrhalf}),l("External connection")),u.a.createElement("div",{className:s.entryName},e.name))}},{key:"getPlacholderText",value:function(){var e=this.props.t,a=this.state.searchType;return e("name"===a?"Name...":"field"===a?"Field name...":"model"===a?"Model name...":"node"===a?"Node name...":"Search...")}},{key:"getSearchTypeText",value:function(){var e=this.props,a=e.t,t=e.classes,n=this.state.searchType;return"name"===n?u.a.createElement("span",null,u.a.createElement(R.a,{icon:P.ld,className:Object(g.default)(t.mrhalf,t.primary),fixedWidth:!0}),a("Name in app")):"field"===n?u.a.createElement("span",null,u.a.createElement(R.a,{icon:P.eb,className:Object(g.default)(t.mrhalf,t.primary),fixedWidth:!0}),a("Field in services")):"model"===n?u.a.createElement("span",null,u.a.createElement(R.a,{icon:P.jd,className:Object(g.default)(t.mrhalf,t.primary),fixedWidth:!0}),a("Model in services")):"node"===n?u.a.createElement("span",null,u.a.createElement(R.a,{icon:P.Id,className:Object(g.default)(t.mrhalf,t.primary),fixedWidth:!0}),a("Node in services")):null}},{key:"getModels",value:function(e){var a=this;return e?e.map((function(t){return{_id:t._id,iname:t.iname,name:t.name,type:t.type,fullName:a.getModelFullName(t,e)}})).sort((function(e,a){var t=e.fullName.toLowerCase(),n=a.fullName.toLowerCase();return t<n?-1:t>n?1:0})):[]}},{key:"getParentModel",value:function(e,a){return a.find((function(a){return a.iname===e}))}},{key:"getModelFullName",value:function(e,a){if(e.parentiname){var t=this.getParentModel(e.parentiname,a);return this.getModelFullName(t,a)+"."+e.name}return e.name}},{key:"getFields",value:function(e,a){if(!e&&!a)return[];var t=[];if(e)for(var n=0;n<e.length;n++)for(var l=e[n],s=this.getModelFullName(l,e),o=0;o<l.fields.length;o++){var r=l.fields[o];r.hidden||t.push({selector:"field",_id:r._id,iname:r.iname,name:r.name,type:r.type,fullName:s+"."+r.name,modeliname:l.iname})}if(a)for(var i=0;i<a.params.length;i++){var c=a.params[i];t.push({selector:"param",_id:c._id,iname:c._id,name:c.name,type:c.type,fullName:"appParams."+c.name,modeliname:Y.a.appParamsModel})}return t}}]),t}(u.a.PureComponent),Se=Object(M.g)(Object(w.b)((function(e,a){return{user:e.user,app:e.app,activeSnap:e.activeSnap,rawModels:e.models,searchResults:e.searchResults}}),{searchAppAction:q.Ge,setAppSearchResults:q.Ne})(Object(v.a)()(Object(y.a)((function(e){return{panel:{minWidth:Y.a.searchPanelWidth,maxWidth:Y.a.searchPanelWidth,overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch",backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2,paddingBottom:e.spacing(1),position:"fixed",zIndex:100},searchResults:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",overflowY:"auto",overFlowX:"hidden"},wideScreen:{maxHeight:"300px"},noDataPlaceholder:{flexGrow:1,overflowY:"auto",minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",marginTop:e.spacing(5)},searchIcon:{marginRight:e.spacing(1)},closeButton:{marginLeft:e.spacing(1),padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},dialogContentRoot:{paddingTop:e.spacing(2),paddingBottom:e.spacing(4)},toolBar:{display:"flex",alignItems:"center",minHeight:"50px",fontSize:e.typography.body2.fontSize,border:"1px solid",borderColor:e.palette.divider,borderRadius:e.shape.borderRadius,backgroundColor:"light"===e.palette.type?e.palette.background.paper:e.palette.background.layer2},toolBarActive:{"&:hover":{borderColor:e.palette.primary.light}},toolBarFocused:{borderColor:e.palette.primary.light},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1)},closeIcon:{color:e.palette.text.disabled,width:"16px",height:"16px","&:hover":{color:e.palette.text.primary,cursor:"pointer"}},divider:{height:22,marginTop:e.spacing(.5),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),marginLeft:e.spacing(1)},mlhalf:{marginLeft:e.spacing(.5)},mrhalf:{marginRight:e.spacing(.5)},searchTypeHolder:{display:"flex",alignItems:"center",minWidth:"156px"},flexCenter:{display:"flex",alignItems:"center"},flexGrow:{flexGrow:1},body2:{fontSize:e.typography.body2.fontSize},bgcolor:{backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3},primary:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},desc:{color:e.palette.text.disabled,fontSize:e.typography.caption.fontSize,margin:e.spacing(.5,0),minHeight:"20px",height:"20px",display:"flex",alignItems:"center"},desc2:{color:e.palette.text.disabled,fontSize:e.typography.caption.fontSize,fontStyle:"italic"},enter:{border:"1px solid",borderColor:e.palette.divider,borderRadius:e.shape.borderRadius,backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3,marginLeft:e.spacing(.5)},dropIcon:{width:"24px",height:"24px",maxWidth:"24px",maxHeight:"24px",padding:e.spacing(.5)},optionIcon:{marginRight:e.spacing(.5),color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},nodeSystem:{color:e.palette.text.disabled},nodeBasic:{color:e.palette.success.main},nodeAdvanced:{color:e.palette.warning.main},nodeObject:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark},highlight:{backgroundColor:"#ffeb3b"},title:{fontWeight:500,margin:e.spacing(2,0,1,0)},entry:{margin:e.spacing(.5,0),padding:e.spacing(1,2),cursor:"pointer",borderRadius:e.shape.borderRadius,"&:hover":{backgroundColor:"light"===e.palette.type?e.palette.primary.bgColor:e.palette.action.hover}},entrybg:{backgroundColor:"light"===e.palette.type?e.palette.background.paper:e.palette.background.layer2},entrybg2:{backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.background.layer2},type:{color:e.palette.text.secondary,fontSize:"0.65rem"},entryName:{color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,fontWeight:500},anchor:{cursor:"pointer",color:"light"===e.palette.type?e.palette.primary.main:e.palette.primary.linkForDark,"&:hover":{textDecoration:"underline"}},subText:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:e.typography.caption.fontSize,color:e.palette.text.disabled},subText2:{whiteSpace:"normal",wordWrap:"break-word",fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary},method:{display:"inline-block",marginRight:e.spacing(1),minWidth:"60px",textAlign:"center",padding:e.spacing(.5),borderRadius:e.shape.borderRadius},getMethod:{backgroundColor:e.palette.info.main,color:e.palette.common.white,fontWeight:700},postMethod:{backgroundColor:e.palette.success.main,color:e.palette.common.white,fontWeight:700},putMethod:{backgroundColor:e.palette.warning.main,color:e.palette.common.white,fontWeight:700},deleteMethod:{backgroundColor:e.palette.error.main,color:e.palette.common.white,fontWeight:700},disabledMethod:{backgroundColor:e.palette.background.layer3,color:e.palette.text.disabled,fontWeight:700},badge:{backgroundColor:e.palette.background.layer3,color:e.palette.text.secondary,minHeight:"20px",padding:e.spacing(0,.75),fontSize:e.typography.body2.fontSize,minWidth:"20px",alignContent:"center",display:"inline-block",borderRadius:"10px",lineHeight:"20px"},fieldInfoText:{fontSize:e.typography.caption.fontSize},fieldInfo:{margin:e.spacing(.5),backgroundColor:"light"===e.palette.type?e.palette.action.selected:e.palette.background.layer3},expInfoText:{fontSize:e.typography.caption.fontSize},expInfo:{margin:e.spacing(.5),backgroundColor:e.palette.primary.main,color:e.palette.common.white}}}),{withTheme:!0})(Object(S.a)()(be))))),we=t(1),Ie=t(16),Ne=t(357),_e=t(48),ke=t(6),xe=t(595),Te=t.n(xe),Ce=t(596),Ae=t.n(Ce),De=t(597),Re=t.n(De),Oe=function(e){Object(c.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(r.a)(this,t),(l=a.call(this,e)).visibilityEvent=function(){I.isMobile&&"hidden"===document.visibilityState&&l.setState({disconnectTime:Date.now()})},l.storageEvent=function(e){var a=l.props,t=a.user,n=a.dispacthMessageAction,s=a.history,o=!1;if("users"===e.key){var r=[];try{(r=JSON.parse(e.newValue))&&Array.isArray(r)||(r=[]);for(var i=0;i<r.length;i++){if(r[i]._id===t._id){o=!0;break}}}catch(c){}}else o=!0;o||(Object(Ie.b)(t._id),window.sessionStorage.removeItem("user"),n({type:we.a.SIGN_OUT,payload:null}),s.push("/auth/signin"))},l.processConnectionChange=function(e){var a=l.props.app,t=l.state.noInternetTime;if(!1===e)l.setState({noInternetTime:Date.now()});else if(t&&(Date.now()-t)/1e3>=Y.a.maxAllowedNoInternetDuration){var n=!0;a&&a.team&&1===a.team.length&&(n=!1),l.setState({noInternetTime:null,showRefreshDialog:n})}},l.processObjDelete=function(){var e=l.props,a=e.match,t=e.dispacthMessageAction,n=e.user,s=e.app,o=e.activeSnap,r=e.model,i=e.env,c=l.state,d=c.objType,p=c.message;"snap"===d?"/users/:userId/apps/:appId/snaps/:snapId"===a.path?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps"))):l.navigateToApps():"snapPrivate"===d?"/users/:userId/apps/:appId/snaps/:snapId"===a.path?(t({type:we.a.REMOVE_SNAP,payload:{appId:p.payload.appId,snapId:p.payload.snap._id}}),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps"))):l.navigateToApps():"model"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps/").concat(o._id,"/models"))):"field"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps/").concat(o._id,"/models/").concat(r._id))):"service"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps/").concat(o._id,"/services"))):"endpoint"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps/").concat(o._id,"/endpoints"))):"queue"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps/").concat(o._id,"/queues"))):"task"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/snaps/").concat(o._id,"/tasks"))):"env"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/envs"))):"env-redeploy"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/envs/").concat(i._id,"/tests")),window.location.reload()):"env-undeploy"===d?(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/envs"))):"env-switch"===d&&(t(p),l.setState({objType:null,message:null}),_e.a.replace("/users/".concat(n._id,"/apps/").concat(s._id,"/envs/").concat(i._id,"/tests")),window.location.reload())},l.hideDeactivated=function(){l.setState({showDeactivated:!1,message:null})},l.hideAccountDeleted=function(){l.setState({showAccountDeleted:!1,message:null})},l.hideTransferredApp=function(){l.setState({showTransferred:!1,message:null})},l.hideAppDeleted=function(){l.setState({showAppDeleted:!1,message:null})},l.hideTeamMemberRemove=function(){l.setState({showTeamMemberRemove:!1,message:null})},l.hideRoleChange=function(){l.setState({showRoleChange:!1,message:null})},l.hideRoleUpdate=function(){l.setState({showRoleUpdate:!1,message:null})},l.hideObjDelete=function(){l.setState({showObjDelete:!1})},l.hideRefreshDialog=function(){l.setState({showRefreshDialog:!1})},l.hideSyncRefreshDialog=function(){l.setState({showSyncRefreshDialog:!1})},l.navigateToApps=function(){var e=l.props,a=e.user;e.history.push("/users/".concat(a._id,"/apps"))},l.loadUserProfile=Object(o.a)(s.a.mark((function e(){var a,t,n,o,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.props,t=a.t,n=a.user,o=a.profile,r=a.getUserInfoAction,e.next=3,r(n._id,n.token,o._id);case 3:200===(i=e.sent).status?l.setState({loadedUser:i.data}):l.setState({errorTitle:t("An error has occured while loading user info!"),errorMessage:i.data.details});case 5:case"end":return e.stop()}}),e)}))),l.onClose=function(){(0,l.props.hideProfile)(),l.setState({loadedUser:null})},l.editProfile=function(){var e=l.props,a=e.user,t=e.app,n=e.hideProfile,s=e.saveLocation;n(),s(_e.a.location),t?_e.a.push("/users/".concat(a._id,"/apps/").concat(t._id,"/profile-settings/profile")):_e.a.push("/users/".concat(a._id,"/profile-settings/profile"))},l.hideProductTour=function(){var e=l.props,a=e.user,t=e.saveUIPreferencesAction,s=e.updateUIPreferencesAction,o=Object(n.a)(Object(n.a)({},a.uiPreferences),{},{showTour:!1});s(a._id,o),t(a._id,a.token,o)},l.loadEnvStats=Object(o.a)(s.a.mark((function e(){var a,t,n,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.props,t=a.user,n=a.app,o=a.loadEnvStatsAction,!t||!n){e.next=4;break}return e.next=4,o(t._id,t.token,n._id);case 4:case"end":return e.stop()}}),e)}))),l.loadEnvStatsTimerId=null,l.state={loadedUser:null,errorTitle:null,errorMessage:null,showDeactivated:!1,showAccountDeleted:!1,showTransferred:!1,showAppDeleted:!1,showTeamMemberRemove:!1,showRoleChange:!1,showRoleUpdate:!1,showObjDelete:!1,showRefreshDialog:!1,showSyncRefreshDialog:!1,objType:null,message:null,syncServerStatus:"not connected",disconnectTime:null,noInternetTime:null,showSwitchSnapshotDialog:!1,isWelcome:!0,isTourOpen:!1},l}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){var a,t,n,l,o,r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props,t=a.setNotificationsAction,n=a.user,a.app,window.addEventListener("storage",this.storageEvent,!1),l="visibilitychange","undefined"!==typeof document.hidden?l="visibilitychange":"undefined"!==typeof document.mozHidden?l="mozvisibilitychange":"undefined"!==typeof document.msHidden?l="msvisibilitychange":"undefined"!==typeof document.webkitHidden&&(l="webkitvisibilitychange"),document.addEventListener(l,this.visibilityEvent),ke.a.connected?this.setState({syncServerStatus:"connected"}):this.setState({syncServerStatus:"disconnected",disconnectTime:Date.now()}),ke.a.io.on("reconnect",(function(){var e=r.props.app,a=r.state,t=a.disconnectTime,l=a.showRefreshDialog;if(Object(ke.b)({user:n,app:e}),t){if((Date.now()-t)/1e3>=Y.a.maxAllowedNoSyncDuration&&!1===l){var s=!0;e&&e.team&&1===e.team.length&&(s=!1),r.setState({syncServerStatus:"reconnected",disconnectTime:null,showSyncRefreshDialog:s})}}else r.setState({syncServerStatus:"reconnected"});setTimeout((function(){return r.setState({syncServerStatus:"connected"})}),Y.a.reconnectHideDuration)})),ke.a.io.on("reconnect_attempt",(function(e){r.setState({syncServerStatus:"reconnecting",attemptNumber:e})})),ke.a.on("disconnect",(function(e){r.state.disconnectTime?r.setState({syncServerStatus:"disconnected"}):r.setState({syncServerStatus:"disconnected",disconnectTime:Date.now()})})),ke.a.on("app-change",(function(e){return r.processMessage(e)})),e.next=12,Object(Ie.d)();case 12:return(o=e.sent)&&t(o),e.next=16,this.loadEnvStats();case 16:this.loadEnvStatsTimerId=setInterval(this.loadEnvStats,Y.a.loadEnvStatsTimerMs);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.storageEvent),document.removeEventListener("visibilitychange",this.visibilityEvent),this.loadEnvStatsTimerId&&(clearInterval(this.loadEnvStatsTimerId),this.loadEnvStatsTimerId=null)}},{key:"processMessage",value:function(e){var a=this.props,t=a.authAction,n=a.dispacthMessageAction,l=a.user,s=a.app,o=a.activeSnap,r=a.match,i=a.addNotificationMessageAction,c=e.message;switch(i(e.room,e),c.type){case we.a.DEACTIVATE_USER_ACCOUNT:if(l&&l._id===c.payload.userId)return Object(Ie.b)(l._id),n({type:we.a.SIGN_OUT,payload:null}),void _e.a.push("/auth/signin");if(s&&s._id===c.payload.appId&&s.owner._id===c.payload.userId)return void this.setState({showDeactivated:!0,message:c});break;case we.a.DELETE_USER_ACCOUNT:if(l&&l._id===c.payload.userId)return Object(Ie.b)(l._id),n({type:we.a.SIGN_OUT,payload:null}),void _e.a.push("/auth/signin");if(s&&s._id===c.payload.appId&&s.owner._id===c.payload.userId)return void this.setState({showAccountDeleted:!0,message:c});break;case we.a.TRANSFER_APP:s&&s._id===c.payload.appId&&this.setState({showTransferred:!0,message:c});break;case we.a.DELETE_APP:if(s&&s._id===c.payload.appId)return void this.setState({showAppDeleted:!0,message:c});break;case we.a.REMOVE_MEMBER:if(s&&s._id===c.payload.appId&&l&&l._id===c.payload.userId)return void this.setState({showTeamMemberRemove:!0,message:c});l&&l._id===c.payload.userId&&n({type:we.a.DELETE_APP,payload:{userId:c.payload.userId,appId:c.payload.appId}});break;case we.a.ASSIGN_ROLE:if(s&&s._id===c.payload.appId&&l&&l._id===c.payload.userId)return void this.setState({showRoleChange:!0,message:c});break;case we.a.ASSIGN_ROLE_MULTI:if(s&&s._id===c.payload.appId&&l&&c.payload.userIds.find((function(e){return e===l._id})))return void this.setState({showRoleChange:!0,message:c});break;case we.a.UPDATE_ROLE:if(s&&s._id===c.payload.appId&&l&&this.getAppRoleId()===c.payload.role._id)return void this.setState({showRoleUpdate:!0,message:c});break;case we.a.CREATE_SNAP:if(1!==t("view-snapshot",{app:s,snap:c.payload.snap})&&s&&s._id===c.payload.appId||c.payload.snap.private&&c.payload.snap.createdBy!==l._id||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_SNAP_REFERENCE,payload:{appId:c.payload.appId,snap:c.payload.snap}});break;case we.a.DELETE_SNAP:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_SNAP_REFERENCE,payload:{appId:c.payload.appId,snapId:c.payload.snapId}});if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId")&&r.params.snapId===c.payload.snapId)return void this.setState({showObjDelete:!0,objType:"snap",message:c});break;case we.a.UPDATE_SNAP:if(1!==t("view-snapshot",{app:s,snap:c.payload.snap})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId")&&r.params.snapId===c.payload.snap._id&&c.payload.snap.private&&c.payload.snap.createdBy!==l._id&&c.payload.privacyChanged)return void this.setState({showObjDelete:!0,objType:"snapPrivate",message:c});if(c.payload.privacyChanged&&c.payload.snap.private&&c.payload.snap.createdBy!==l._id)return void n({type:we.a.REMOVE_SNAP,payload:{appId:c.payload.appId,snapId:c.payload.snap._id}});if(c.payload.privacyChanged&&!1===c.payload.snap.private)return void n({type:we.a.ADD_SNAP,payload:{appId:c.payload.appId,snap:c.payload.snap}});break;case we.a.CREATE_MODEL:if(1!==t("view-model",{app:s,model:c.payload.model})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_MODEL_REFERENCE,payload:c.payload});break;case we.a.DELETE_MODEL_MULTI:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_MODEL_MULTI_REFERENCE,payload:c.payload});if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/models/:modelId")&&c.payload.modelIds.includes(r.params.modelId))return void this.setState({showObjDelete:!0,objType:"model",message:c});break;case we.a.UPDATE_MODEL:if(1!==t("view-model",{app:s,model:c.payload.model})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.CREATE_FIELD:if(1!==t("view-model",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId||o&&o._id!==c.payload.snapId)return;break;case we.a.ADD_AUTH_FIELDS:if(1!==t("view-model",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId||o&&o._id!==c.payload.snapId)return;break;case we.a.DELETE_FIELD:if(s&&s._id!==c.payload.appId||o&&o._id!==c.payload.snapId)return;if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/models/:modelId/fields/:fieldId")&&c.payload.fieldId===r.params.fieldId)return void this.setState({showObjDelete:!0,objType:"field",message:c});break;case we.a.DELETE_MULTI_FIELD:if(s&&s._id!==c.payload.appId||o&&o._id!==c.payload.snapId)return;if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/models/:modelId/fields/:fieldId")&&c.payload.fieldIds.includes(r.params.fieldId))return void this.setState({showObjDelete:!0,objType:"field",message:c});break;case we.a.UPDATE_MULTI_FIELD:case we.a.UPDATE_FIELD:if(s&&s._id!==c.payload.appId||o&&o._id!==c.payload.snapId)return;break;case we.a.CREATE_SERVICE:if(1!==t("view-service",{app:s,service:c.payload.service})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_SERVICE_REFERENCE,payload:c.payload});break;case we.a.DELETE_SERVICES:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_SERVICES_REFERENCE,payload:c.payload});if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/services/:serviceId")&&c.payload.serviceIds.includes(r.params.serviceId))return void this.setState({showObjDelete:!0,objType:"service",message:c});break;case we.a.UPDATE_SERVICE:if(1!==t("view-service",{app:s,service:c.payload.service})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.CREATE_QUEUE:if(1!==t("view-queue",{app:s,queue:c.payload.queue})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_QUEUE_REFERENCE,payload:c.payload});break;case we.a.DELETE_QUEUES:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_QUEUES_REFERENCE,payload:c.payload});if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/queues/:queueId")&&c.payload.queueIds.includes(r.params.queueId))return void this.setState({showObjDelete:!0,objType:"queue",message:c});break;case we.a.UPDATE_QUEUE:case we.a.ENABLE_QUEUES:case we.a.DISABLE_QUEUES:if(1!==t("view-queue",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.CREATE_TASK:if(1!==t("view-task",{app:s,task:c.payload.task})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_TASK_REFERENCE,payload:c.payload});break;case we.a.DELETE_TASKS:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_TASKS_REFERENCE,payload:c.payload});if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/tasks/:taskId")&&c.payload.taskIds.includes(r.params.taskId))return void this.setState({showObjDelete:!0,objType:"task",message:c});break;case we.a.UPDATE_TASK:case we.a.ENABLE_TASKS:case we.a.DISABLE_TASKS:if(1!==t("view-task",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.CREATE_ENDPOINT:if(1!==t("view-endpoint",{app:s,endpoint:c.payload.endpoint})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_ENDPOINT_REFERENCE,payload:c.payload});break;case we.a.DELETE_ENDPOINTS:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_ENDPOINTS_REFERENCE,payload:c.payload});if(r.path.startsWith("/users/:userId/apps/:appId/snaps/:snapId/endpoints/:endpointId")&&c.payload.endponintIds.includes(r.params.endpointId))return void this.setState({showObjDelete:!0,objType:"endpoint",message:c});break;case we.a.UPDATE_ENDPOINT:case we.a.ENABLE_ENDPOINTS:case we.a.DISABLE_ENDPOINTS:case we.a.SET_APIKEY_ENDPOINTS:case we.a.REMOVE_APIKEY_ENDPOINTS:case we.a.SET_SESSION_ENDPOINTS:case we.a.REMOVE_SESSION_ENDPOINTS:case we.a.ADD_APPROLE_TO_ENDPOINTS:case we.a.REMOVE_APPROLE_FROM_ENDPOINTS:if(1!==t("view-endpoint",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.CREATE_ENV:if(1!==t("view-env",{app:s,env:c.payload.env})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return void n({type:we.a.CREATE_ENV_REFERENCE,payload:c.payload});break;case we.a.DELETE_ENV:if(s&&s._id!==c.payload.appId)return void n({type:we.a.DELETE_ENV_REFERENCE,payload:c.payload});if(r.path.startsWith("/users/:userId/apps/:appId/envs/:envId")&&r.params.envId===c.payload.envId)return void this.setState({showObjDelete:!0,objType:"env",message:c});break;case we.a.UPDATE_ENV:if(1!==t("view-env",{app:s,env:c.payload.env})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.DEPLOY_SNAPSHOT:case we.a.REDEPLOY_SNAPSHOT:case we.a.SWITCH_SNAPSHOT:case we.a.UNDEPLOY_SNAPSHOT:case we.a.DEPLOY_SNAPSHOT_SUCCESS:case we.a.DEPLOY_SNAPSHOT_ERROR:case we.a.INITIATE_UNDEPLOY_SNAPSHOT:case we.a.CREATE_APIKEY:case we.a.UPDATE_APIKEY:case we.a.DELETE_APIKEY:case we.a.CREATE_PARAMOVERRIDE:case we.a.UPDATE_PARAMOVERRIDE:case we.a.DELETE_PARAMOVERRIDE:case we.a.CREATE_CONNOVERRIDE:case we.a.UPDATE_CONNOVERRIDE:case we.a.DELETE_CONNOVERRIDE:if(1!==t("view-env",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;break;case we.a.SWITCH_SNAPSHOT_ERROR:case we.a.SWITCH_SNAPSHOT_SUCCESS:case we.a.REDEPLOY_SNAPSHOT_ERROR:case we.a.REDEPLOY_SNAPSHOT_SUCCESS:case we.a.UNDEPLOY_SNAPSHOT_ERROR:case we.a.UNDEPLOY_SNAPSHOT_SUCCESS:if(1!==t("view-env",{app:s})&&s&&s._id===c.payload.appId||s&&s._id!==c.payload.appId)return;if(r.path.startsWith("/users/:userId/apps/:appId/envs/:envId/tests")&&r.params.envId===c.payload.env._id)return void(c.type===we.a.REDEPLOY_SNAPSHOT_ERROR||c.type===we.a.REDEPLOY_SNAPSHOT_SUCCESS?this.setState({showObjDelete:!0,objType:"env-redeploy",message:c}):c.type===we.a.UNDEPLOY_SNAPSHOT_ERROR||c.type===we.a.UNDEPLOY_SNAPSHOT_SUCCESS?this.setState({showObjDelete:!0,objType:"env-undeploy",message:c}):this.setState({showObjDelete:!0,objType:"env-switch",message:c}))}n(c)}},{key:"render",value:function(){var e=this,a=this.props,t=a.t,n=a.theme,l=a.classes,s=a.sideToolBar,o=a.rightToolBar,r=a.leftSideBar,i=a.head,c=a.content,d=a.centered,p=a.app,m=a.showMenu,h=a.profileView,g=a.activeSnap,f=this.state,y=f.showDeactivated,v=f.showAccountDeleted,S=f.showTransferred,w=f.showAppDeleted,I=f.showTeamMemberRemove,k=f.showRoleChange,x=f.showRoleUpdate,T=f.showObjDelete,C=f.showRefreshDialog,A=f.showSyncRefreshDialog,D=f.message,R=f.showSwitchSnapshotDialog;return u.a.createElement(N.a,{className:l.parentContainer},u.a.createElement(E.Offline,{polling:Y.a.networkDetectPolling,onChange:this.processConnectionChange},u.a.createElement("div",null,this.renderNoInternet())),p&&p.team&&p.team.length>1&&u.a.createElement(E.Online,null,u.a.createElement("div",null,this.renderSyncStatus())),u.a.createElement(N.a,{className:l.container},s,u.a.createElement("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",overflowY:"hidden",overflowX:"hidden"}},u.a.createElement("div",{style:{flexGrow:1,display:"flex",flexDirection:"row",overflowY:"hidden",overflowX:"hidden"}},h?u.a.createElement(_.a,{maxWidth:"md",style:{flexGrow:1,display:"flex",overflowY:"auto"}},r,u.a.createElement(X,{head:i,showMenu:!0},c)):u.a.createElement(u.a.Fragment,null,r,u.a.createElement(X,{head:i,centered:d,showMenu:m},c))),!h&&g&&u.a.createElement("div",null,this.renderFooter())),o,this.renderProfileDrawer(),this.renderProductTour(),this.renderSearch(),y&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:y,handleClose:this.hideDeactivated,title:t("Owner account deactivated"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("<bold>%s</bold>, owner of application <bold>%s</bold>, has deactivated his/her account which resulted in deactivation of all owned apps. <bold>You can't work on a deactivated account's application</bold>. You will be directed to your applications list.").sprintf(p.owner.profile.userName,p.name),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{marginTop:n.spacing(2)}},u.a.createElement("div",{style:{fontWeight:700}},t("App owner")),u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement($.a,{user:p.owner,size:"medium",email:!0,emailBelow:!0,showName:!0})))),callback:this.navigateToApps}),v&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:v,handleClose:this.hideAccountDeleted,title:t("Owner account deleted"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("<bold>%s</bold>, owner of application <bold>%s</bold>, has deleted his/her account which resulted in deletion of all owned apps. <bold>You can't work on a deleted application</bold>. You will be directed to your applications list.").sprintf(p.owner.profile.userName,p.name),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{marginTop:n.spacing(2)}},u.a.createElement("div",{style:{fontWeight:700}},t("App owner")),u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement($.a,{user:p.owner,size:"medium",email:!0,emailBelow:!0,showName:!0})))),callback:this.navigateToApps}),S&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:S,handleClose:this.hideTransferredApp,title:t("Owner account transferred"),buttonTitle:t("Refresh"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("<bold>%s</bold>, previous owner of application <bold>%s</bold>, has transfered the ownership of this application to its new owner <bold>%s<bold>. Application data will be refreshed to continue working on this app.").sprintf(D.payload.oldOwner.profile.userName,p.name,D.payload.newOwner.profile.userName),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{marginTop:n.spacing(2)}},u.a.createElement("div",{style:{fontWeight:700}},t("Previous owner")),u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement($.a,{user:D.payload.oldOwner,size:"medium",email:!0,emailBelow:!0,showName:!0}))),u.a.createElement("div",{style:{marginTop:n.spacing(2)}},u.a.createElement("div",{style:{fontWeight:700}},t("New owner")),u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement($.a,{user:D.payload.newOwner,size:"medium",email:!0,emailBelow:!0,showName:!0})))),callback:function(){e.props.user._id===D.payload.oldOwner._id?e.navigateToApps():window.location.reload()}}),w&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:w,handleClose:this.hideAppDeleted,title:t("Application deleted"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("<bold>%s</bold>, has deleted application <bold>%s</bold>. <bold>You can't work on a deleted application</bold>. You will be directed to your applications list.").sprintf(p.owner.profile.userName,p.name),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{marginTop:n.spacing(2)}},u.a.createElement("div",{style:{fontWeight:700}},t("App owner")),u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement($.a,{user:p.owner,size:"medium",email:!0,emailBelow:!0,showName:!0})))),callback:this.navigateToApps}),I&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:I,handleClose:this.hideTeamMemberRemove,title:t("Team member removed from app team"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("You have either left or been removed from the team of application <bold>%s</bold>. <bold>You can't work on an application that you are not a member of its team</bold>. You will be redirected to your applications list.").sprintf(p.name),components:{bold:u.a.createElement("strong",null)}}))),callback:this.navigateToApps}),k&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:k,handleClose:this.hideRoleChange,title:t("App team member role assignment"),buttonTitle:t("Refresh"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("Your role (authorization rights) for the application <bold>%s</bold> has changed. You have been assigned to the role of <bold>%s</bold>. You need to refresh your application data to continue working on this app.").sprintf(p.name,D.payload.role.name),components:{bold:u.a.createElement("strong",null)}}))),callback:this.navigateToApps}),x&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:x,handleClose:this.hideRoleUpdate,title:t("Access group update"),buttonTitle:t("Refresh"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("Your role <bold>%s</bold> (authorization rights) for the application <bold>%s</bold> has been updated. To reflect the latest changes and continue working on this app you need to refresh your application data.").sprintf(D.payload.role.name,p.name),components:{bold:u.a.createElement("strong",null)}}))),callback:this.navigateToApps}),T&&p&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:T,handleClose:this.hideObjDelete,title:this.getDialogTitle(),buttonTitle:this.getButtonTitle(),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,this.getDialogMessage())),callback:this.processObjDelete}),C&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:C,handleClose:this.hideRefreshDialog,title:t("Internet connection re-established"),buttonTitle:t("Refresh"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("<bold>You were disconnected from the Internet for some time</bold>. You need to refresh your application data to continue."),components:{bold:u.a.createElement("strong",null)}}))),callback:function(){return window.location.reload()}}),A&&u.a.createElement(oe,{fullWidth:!0,maxWidth:"sm",open:A,handleClose:this.hideSyncRefreshDialog,title:t("Connection re-established"),buttonTitle:t("Refresh"),message:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement(b.a,{defaults:t("<bold>You were disconnected from the synchronization server for some time</bold>. You need to refresh your application data to continue."),components:{bold:u.a.createElement("strong",null)}}))),callback:function(){return window.location.reload()}}),R&&u.a.createElement(K.a,{fullWidth:!0,maxWidth:"sm",open:R,handleClose:function(){return e.setState({showSwitchSnapshotDialog:!1})},app:p})))}},{key:"renderNoInternet",value:function(){var e=this.props,a=e.t,t=e.classes;return u.a.createElement("div",{className:t.statusBar},u.a.createElement(R.a,{icon:W.bc,className:t.element}),u.a.createElement("div",null,a("No Internet connection")))}},{key:"renderSyncStatus",value:function(){var e=this.props,a=e.t,t=e.classes,n=this.state,l=n.syncServerStatus,s=n.disconnectTime;return"connected"===l?null:"disconnected"===l?u.a.createElement("div",{className:t.statusBar},u.a.createElement("div",null,a("Disconnected from sync server"))):"reconnecting"===l?u.a.createElement("div",{className:t.statusBar},u.a.createElement(A.a,{size:18,className:t.element}),u.a.createElement("div",null,a("Reconnecting"),"\xa0-\xa0",a("Disconnected"),"\xa0",Object(f.a)(s))):"reconnected"===l?u.a.createElement("div",{className:t.statusBarSuccess},u.a.createElement(R.a,{icon:P.H,className:t.element}),u.a.createElement("div",null,a("Reconnected to sync server.")),"\xa0"):null}},{key:"getAppRoleId",value:function(){for(var e=this.props,a=e.user,t=e.app,n=0;n<a.apps.length;n++){var l=a.apps[n];if(l.appId===t._id)return l.roleId}return null}},{key:"getDialogTitle",value:function(){var e=this.props.t,a=this.state.objType;return"snap"===a?e("Snapshot deleted"):"snapPrivate"===a?e("Snapshot became private (hidden)"):"model"===a?e("Model/sub-model deleted"):"field"===a?e("Field deleted"):"service"===a?e("Service deleted"):"endpoint"===a?e("Endpoint deleted"):"env"===a?e("Environment deleted"):"queue"===a?e("Message queue deleted"):"task"===a?e("Task deleted"):"env-redeploy"===a?e("Snapshot redeployed"):"env-undeploy"===a?e("Snapshot undeployed"):"env-switch"===a?e("Snapshot switched"):void 0}},{key:"getButtonTitle",value:function(){var e=this.props.t,a=this.state.objType;return"snap"===a||"snapPrivate"===a||"model"===a||"field"===a||"service"===a||"endpoint"===a||"env"===a||"queue"===a||"task"===a||"env-redeploy"===a||"env-undeploy"===a||"env-switch"===a?e("Refresh"):void 0}},{key:"getDialogMessage",value:function(){var e=this.props,a=e.t,t=e.snaps,n=e.model,l=e.services,s=e.endpoints,o=e.envs,r=e.queues,i=e.tasks,c=e.match,d=this.state,p=d.objType,m=d.message;if("snap"===p){var h=t.find((function(e){return e._id===m.payload.snapId}));return u.a.createElement(b.a,{defaults:a('The <bold>snaphost "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted snapshot. To reflect the latest changes and continue working on this app you need to refresh your application data.').sprintf(h?h.name:""),components:{bold:u.a.createElement("strong",null)}})}if("snapPrivate"===p){var g=t.find((function(e){return e._id===m.payload.snapId}));return u.a.createElement(b.a,{defaults:a('The <bold>snaphost "%s"</bold> that you are currently working on <bold>has become private (hidden)</bold>. You cannot work on a private snapshot which is not created by yourself. To reflect the latest changes and continue working on this app you need to refresh your application data.').sprintf(g?g.name:""),components:{bold:u.a.createElement("strong",null)}})}if("model"===p)return u.a.createElement(b.a,{defaults:a('The <bold>model "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted model. To reflect the latest changes and continue working on this app you need to refresh your model data.').sprintf(n?n.name:""),components:{bold:u.a.createElement("strong",null)}});if("field"===p){var f=n.fields.find((function(e){return e._id===c.params.fieldId}));return u.a.createElement(b.a,{defaults:a('The <bold>field "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted field. To reflect the latest changes and continue working on this app you need to refresh your model data.').sprintf(f?f.name:""),components:{bold:u.a.createElement("strong",null)}})}if("service"===p){var E=l.find((function(e){return e._id===c.params.serviceId}));return u.a.createElement(b.a,{defaults:a('The <bold>service "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted service. To reflect the latest changes and continue working on this app you need to refresh your service data.').sprintf(E?E.name:""),components:{bold:u.a.createElement("strong",null)}})}if("endpoint"===p){var y=s.find((function(e){return e._id===c.params.endpointId}));return u.a.createElement(b.a,{defaults:a('The <bold>endpoint "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted endpoint. To reflect the latest changes and continue working on this app you need to refresh your endpoint data.').sprintf(y?y.name:""),components:{bold:u.a.createElement("strong",null)}})}if("queue"===p){var v=r.find((function(e){return e._id===c.params.queueId}));return u.a.createElement(b.a,{defaults:a('The <bold>message queue "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted message queue. To reflect the latest changes and continue working on this app you need to refresh your message queue data.').sprintf(v?v.name:""),components:{bold:u.a.createElement("strong",null)}})}if("task"===p){var S=i.find((function(e){return e._id===c.params.taskId}));return u.a.createElement(b.a,{defaults:a('The <bold>task "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted task. To reflect the latest changes and continue working on this app you need to refresh your task data.').sprintf(S?S.name:""),components:{bold:u.a.createElement("strong",null)}})}if("env"===p){var w=o.find((function(e){return e._id===m.payload.envId}));return u.a.createElement(b.a,{defaults:a('The <bold>environment "%s"</bold> that you are currently working on <bold>has been deleted</bold>. You cannot work on a deleted environment. To reflect the latest changes and continue working on this app you need to refresh your environment data.').sprintf(w?w.name:""),components:{bold:u.a.createElement("strong",null)}})}return"env-redeploy"===p?u.a.createElement(b.a,{defaults:a('The snapshot at <bold>environment "%s"</bold> that you are currently running tests <bold>has been redeployed</bold>. To reflect the latest changes and continue testing you need to refresh your environment data.').sprintf(m.payload.env?m.payload.env.name:""),components:{bold:u.a.createElement("strong",null)}}):"env-undeploy"===p?u.a.createElement(b.a,{defaults:a('The snapshot at <bold>environment "%s"</bold> that you are currently running tests <bold>has been undeployed</bold>. You cannot run tests on an environment without a deployment. To reflect the latest changes and continue testing you need to refresh your environment data.').sprintf(m.payload.env?m.payload.env.name:""),components:{bold:u.a.createElement("strong",null)}}):"env-switch"===p?u.a.createElement(b.a,{defaults:a('The snapshot at <bold>environment "%s"</bold> that you are currently running tests <bold>has been changed</bold>. To reflect the latest changes and continue testing you need to refresh your environment data.').sprintf(m.payload.env?m.payload.env.name:""),components:{bold:u.a.createElement("strong",null)}}):void 0}},{key:"renderProfileDrawer",value:function(){var e=this.props,a=e.classes,t=e.profile;return u.a.createElement(k.a,{anchor:"right",open:Boolean(t),onClose:this.onClose,classes:{paper:a.rightPanel},elevation:4,ModalProps:{BackdropProps:{invisible:!0}}},this.renderHeader(),this.renderProfile(),this.renderButtons())}},{key:"renderHeader",value:function(){var e=this.props,a=e.t,t=e.classes,n=e.theme;return u.a.createElement("div",{className:t.header},u.a.createElement("div",{className:t.title},u.a.createElement(T.a,{component:"h1",variant:"h6"},u.a.createElement(R.a,{icon:P.Zb,style:{marginRight:n.spacing(1)}}),a("Profile"))),u.a.createElement(x.a,{className:t.closeButton,onClick:this.onClose},u.a.createElement(R.a,{icon:O.x,className:t.closeButtonIcon})))}},{key:"renderProfile",value:function(){var e=this,a=this.props,t=a.t,n=a.classes,l=a.user,s=a.profile,o=this.state,r=o.loadedUser,i=o.errorTitle,c=o.errorMessage;return i||c?u.a.createElement(N.a,{className:n.profileContent,style:{flexGrow:1}},u.a.createElement(N.a,{className:n.contentPlaceholder},u.a.createElement(J.a,{mainMessage:i,message:c,bottomMargin:!1,largeFontSize:!1}))):(l&&s&&null===r&&(l._id===s._id?setTimeout((function(){return e.setState({loadedUser:l})}),0):s.apps&&s.planId&&s.planId.name?setTimeout((function(){return e.setState({loadedUser:s})}),0):setTimeout(this.loadUserProfile,0)),l&&s&&r?u.a.createElement(N.a,{className:n.profileContent},this.renderProfileDetails()):u.a.createElement(N.a,{className:n.profileContent,style:{flexGrow:1}},u.a.createElement(N.a,{className:n.contentPlaceholder},u.a.createElement(Z.a,{message:t("Loading user profile...")}))))}},{key:"renderProfileDetails",value:function(){var e=this.props,a=e.t,t=e.classes,n=e.theme,l=e.app,s=this.state.loadedUser;return u.a.createElement("div",null,u.a.createElement("div",{className:t.avatarHolder},u.a.createElement($.a,{user:s,size:"x-large",hover:!1}),u.a.createElement(T.a,{component:"h1",variant:"h6",style:{marginTop:n.spacing(1)}},s.profile.userName),u.a.createElement(T.a,{component:"h1",variant:"body2",style:{color:n.palette.text.disabled}},s.profile.email),l&&(l.owner._id===s._id?u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement("div",{style:{textAlign:"center"}},u.a.createElement("span",{className:t.owner},u.a.createElement(R.a,{icon:P.db,style:{marginRight:n.spacing(1)}}),a("Owner")),"\xa0",a("of")),u.a.createElement("div",{style:{textAlign:"center"}},l.name)):u.a.createElement("div",{style:{marginTop:n.spacing(1)}},u.a.createElement("div",{style:{textAlign:"center"}},u.a.createElement("span",{className:t.member},this.isMember()&&u.a.createElement(R.a,{icon:P.Gd,style:{marginRight:n.spacing(1)}}),this.isMember()?a("Member"):a("Former Member")),"\xa0",a("of")),u.a.createElement("div",{style:{textAlign:"center"}},l.name)))),u.a.createElement("div",{className:t.publicInfo},u.a.createElement(u.a.Fragment,null,u.a.createElement(T.a,{component:"h1",variant:"caption",className:t.label},a("Account status")),u.a.createElement(T.a,{component:"h1",variant:"body2"},this.renderAccountStatus(s.accountStatus))),(s.profile.firstName||s.profile.lastName)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(T.a,{component:"h1",variant:"caption",className:t.label},a("Display name")),u.a.createElement(T.a,{component:"h1",variant:"body2"},s.profile.firstName+" "+s.profile.lastName)),s.profile.jobTitle&&u.a.createElement(u.a.Fragment,null,u.a.createElement(T.a,{component:"h1",variant:"caption",className:t.label},a("Job title")),u.a.createElement(T.a,{component:"h1",variant:"body2"},s.profile.jobTitle)),s.profile.company&&u.a.createElement(u.a.Fragment,null,u.a.createElement(T.a,{component:"h1",variant:"caption",className:t.label},a("Company")),u.a.createElement(T.a,{component:"h1",variant:"body2"},s.profile.company)),(s.profile.city||s.profile.country)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(T.a,{component:"h1",variant:"caption",className:t.label},a("Location")),u.a.createElement(T.a,{component:"h1",variant:"body2"},this.getLocation()))))}},{key:"renderButtons",value:function(){var e=this.props,a=e.t,t=e.classes,n=e.user,l=e.profile,s=this.state.loadedUser;return n&&l&&s?n._id!==l._id?null:u.a.createElement(N.a,{className:t.profileActions},u.a.createElement(ee.a,{action:!0,text:a("Edit profile"),icon:P.yc,onClick:this.editProfile,margin:!1})):null}},{key:"renderAccountStatus",value:function(e){var a=this.props,t=a.t,n=a.classes,l=null,s=null;switch(e){case"Pending":l=t("Pending"),s=n.pending;break;case"Active":l=t("Active"),s=n.active;break;case"Admin suspended":case"Payment suspended":case"Deactivated":l=t("Inactive"),s=n.inactive;break;case"Deleted":l=t("Terminated"),s=n.inactive;break;default:l=t("Active"),s=n.active}return u.a.createElement(C.a,{size:"small",label:l,className:s})}},{key:"renderFooter",value:function(){var e=this,a=this.props,t=a.t,n=a.classes,l=a.theme,s=a.app,o=a.activeSnap,r=a.width;return s&&"xs"!==r&&"sm"!==r?u.a.createElement("div",{className:Object(g.default)(n.footer,"tour-snapshot")},u.a.createElement("div",{style:{flexGrow:1,display:"flex",alignItems:"center"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.u,style:{marginRight:l.spacing(.5)}}),s.name),o&&u.a.createElement("div",null,u.a.createElement(R.a,{icon:W.e,style:{margin:l.spacing(0,.5)}}),u.a.createElement(R.a,{icon:P.C,style:{marginRight:l.spacing(.5)}}),o.name)),u.a.createElement("div",null,u.a.createElement(D.a,{color:"primary",size:"small",onClick:function(){return e.setState({showSwitchSnapshotDialog:!0})},style:{fontSize:l.typography.caption.fontSize}},u.a.createElement(R.a,{icon:P.ob,style:{marginRight:l.spacing(.5)}}),t("Switch")))):null}},{key:"renderProductTour",value:function(){var e=this,a=this.state,t=a.isWelcome,n=a.isTourOpen,l=this.props,s=l.t,o=l.theme,r=l.classes,i=l.user,c=l.app,d=l.team,p=l.activeSnap,m=l.models,g=l.services,f=l.queues,E=l.tasks,y=l.endpoints,v=l.envs,S=l.width,w=l.authActionGroup;if(!i||!c||!d||!p||"xs"===S||"sm"===S||!1===i.uiPreferences.showTour)return null;var I=w(["view-models","view-services","view-tasks","view-queues","view-snapshots","view-endpoints","view-envs","test-snapshot","view-navigator","view-watcher"],{app:c});if(!m&&1===I["view-models"]||!g&&1===I["view-services"]||!f&&1===I["view-queues"]||!E&&1===I["view-tasks"]||!y&&1===I["view-endpoints"]||!v&&1===I["view-envs"])return null;var N=[{selector:".tour-welcome",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},u.a.createElement("span",null,s("Welcome"),"\xa0",u.a.createElement("span",{role:"img","aria-label":"Hello"},"\ud83d\udc4b"))),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("This is the <bold>Altogic designer</bold>. It is the core visual development tool you use to design, develop and deploy your backend applications."),components:{bold:u.a.createElement("strong",null)}})),u.a.createElement("div",{style:{marginTop:o.spacing(1)}},s("We'd love to show you around. It would only take a minute or two."))),u.a.createElement("div",{className:r.tour_footer},u.a.createElement(D.a,{className:r.button,variant:"text",size:"small",disableElevation:!0,onClick:function(){e.setState({isWelcome:!1}),e.hideProductTour()},style:{fontSize:o.typography.caption.fontSize}},s("No, thanks")),"\xa0\xa0",u.a.createElement(D.a,{className:r.button,variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(){return e.setState({isWelcome:!1,isTourOpen:!0})}},s("Let's go"),u.a.createElement(R.a,{icon:j.a,style:{marginLeft:o.spacing(1)}}))))}],_=[];return _.push({selector:".tour-apps",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Applications Dashboard")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.u,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Click on the Altogic logo anytime to navigate your <bold>applications dashboard</bold> to manage all your apps and create new ones."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-models"]&&_.push({selector:".tour-model",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Models")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.gb,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Create models, which are composed of data fields, to define your applications' <bold>data structure</bold> and <bold>data validation rules</bold>."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-services"]&&_.push({selector:".tour-service",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Services")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.vc,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Build services to define your applications' <bold>business logic</bold>, which are composed of nodes (actions) and relations (links) between these nodes."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-endpoints"]&&_.push({selector:".tour-endpoint",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Endpoints")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.sc,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Define endpoints of your application, which <bold>expose your applications' data and services to the outside world</bold>."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-queues"]&&_.push({selector:".tour-queue",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Messaging Queues")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.hc,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Create message queues to allow different parts of your application to communicate and <bold>perform activities asynchronously</bold>."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-tasks"]&&_.push({selector:".tour-task",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Tasks")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.a,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Create tasks to <bold>schedule application services that run periodically</bold> at fixed times, dates, or intervals to automate maintenance, administration, and repetitive jobs."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["test-snapshot"]&&_.push({selector:".tour-tester",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Altogic Tester")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement("img",{src:Te.a,alt:"Altogic Tester",className:r.logo})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("<bold>Test and debug</bold> your application's endpoint, message queue and scheduled task services."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-navigator"]&&_.push({selector:".tour-navigator",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Altogic Navigator")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement("img",{src:Ae.a,alt:"Altogic Navigator",className:r.logo})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("<bold>View and manage your application data</bold>, including the app database, cache keys, and cloud storage buckets and files."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-watcher"]&&_.push({selector:".tour-watcher",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Altogic Watcher")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement("img",{src:Re.a,alt:"Altogic Watcher",className:r.logo})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("View your application logs, <bold>identify performance bottlenecks</bold> and analyze resource utilizations."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-envs"]&&_.push({selector:".tour-environment",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Environments")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.U,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Create an environment, which is a <bold>storage and execution space</bold>, to deploy and run your application."),components:{bold:u.a.createElement("strong",null)}})))))}),1===I["view-snapshots"]&&_.push({selector:".tour-snapshot",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Snapshots")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.C,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Click on 'Switch' to <bold>load a different version (snapshot)</bold> of your application."),components:{bold:u.a.createElement("strong",null)}})))))}),_.push({selector:".tour-test",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Test & Monitor")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.R,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Access all your app environments with a single click. <bold>View key environment metrics</bold> and <bold>launch Tester</bold> to test your app services and <bold>launch Navigator</bold> to manage your app data."),components:{bold:u.a.createElement("strong",null)}})))))}),_.push({selector:".tour-quickaccess",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Quick access")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.dd,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Quickly <bold>access to the key design elements</bold> of your application. The quick access panel is displayed always on top so that you can <bold>easily find what your are looking for</bold>."),components:{bold:u.a.createElement("strong",null)}})))))}),_.push({selector:".tour-docs",content:u.a.createElement("div",null,u.a.createElement("div",{className:r.tour_title},s("Documentation")),u.a.createElement("div",{className:r.tour_contents},u.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.a.createElement("div",null,u.a.createElement(R.a,{icon:P.q,style:{marginRight:o.spacing(2),fontSize:o.typography.h1.fontSize,color:o.palette.primary.main}})),u.a.createElement("div",null,u.a.createElement(b.a,{defaults:s("Access to detailed platform <bold>documentation</bold>, <bold>how-to guides</bold>, and <bold>references</bold>."),components:{bold:u.a.createElement("strong",null)}})))))}),u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{steps:N,isOpen:t,onRequestClose:function(){return e.setState({isWelcome:!1})},accentColor:o.palette.primary.main,disableInteraction:!0,rounded:5,showNumber:!1,showNavigationNumber:!1,showNavigation:!1,showButtons:!1,showCloseButton:!1,closeWithMask:!1,maskClassName:r.tour_mask}),u.a.createElement(h.a,{steps:_,isOpen:n,onRequestClose:function(){return e.setState({isTourOpen:!1})},accentColor:o.palette.primary.main,disableInteraction:!0,rounded:5,maskSpace:5,showNumber:!1,showNavigationNumber:!1,onBeforeClose:function(){e.hideProductTour()},closeWithMask:!0,maskClassName:r.tour_mask}))}},{key:"renderSearch",value:function(){var e=this.props,a=e.uiState,t=e.app,n=e.activeSnap,l=e.hideSearch;return t&&n&&a&&a.search?u.a.createElement(Se,{fullWidth:!0,maxWidth:"sm",open:a.search,handleClose:l}):null}},{key:"getLocation",value:function(){var e=this.state.loadedUser;return e.profile.city?e.profile.country?e.profile.city+", "+e.profile.country:e.profile.city:e.profile.country?e.profile.country:null}},{key:"isMember",value:function(){for(var e=this.props.app,a=this.state.loadedUser,t=0;t<e.team.length;t++){if(e.team[t].userId===a._id)return!0}return!1}}]),t}(u.a.PureComponent);Oe.defaultProps={centered:!1,sideToolBar:null,leftSideBar:null,head:null,content:null,showMenu:!0,rightToolBar:null,profileView:!1};a.default=Object(w.b)((function(e,a){Object(ke.b)(e);var t=e.envs&&e.envs.length>0?e.envs.find((function(e){return e._id===a.match.params.envId})):null;return{user:e.user,profile:e.profile,app:e.app,team:e.team,snaps:e.snaps,activeSnap:e.activeSnap,models:e.models,model:e.model,services:e.services,endpoints:e.endpoints,queues:e.queues,tasks:e.tasks,envs:e.envs,env:t,notifications:e.notifications,envStats:e.envStats,uiState:e.uiState}}),{authAction:V.a,authActionGroup:V.b,hideProfile:Ne.d,getUserInfoAction:q.Id,dispacthMessageAction:q.Zb,addNotificationMessageAction:q.m,setNotificationsAction:q.Re,saveLocation:Ne.h,saveUIPreferencesAction:q.Fe,updateUIPreferencesAction:q.Sf,loadEnvStatsAction:q.Od,hideSearch:Ne.f})(Object(v.a)()(Object(y.a)((function(e){var a;return{parentContainer:{display:"flex",flexDirection:"column",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"stretch",height:"100vh",overflow:"hidden"},container:{flexGrow:1,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"stretch",backgroundColor:e.palette.background.paper,overflow:"hidden"},statusBar:{flexShrink:0,minHeight:e.spacing(4),display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,fontWeight:500,padding:e.spacing(0,2,0,2)},statusBarSuccess:{flexShrink:0,minHeight:e.spacing(4),display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",backgroundColor:e.palette.success.main,color:e.palette.common.white,fontWeight:500,padding:e.spacing(0,2,0,2)},element:{marginRight:e.spacing(1),color:e.palette.error.contrastText},rightPanel:(a={},Object(p.a)(a,e.breakpoints.down("sm"),{width:"100%"}),Object(p.a)(a,e.breakpoints.up("sm"),{width:"380px"}),Object(p.a)(a,"display","flex"),Object(p.a)(a,"flexDirection","column"),Object(p.a)(a,"flexWrap","nowrap"),Object(p.a)(a,"justifyContent","flex-start"),Object(p.a)(a,"alignItems","stretch"),a),header:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:e.spacing(1),marginTop:e.spacing(1)},title:{flexGrow:1,paddingLeft:e.spacing(2)},closeButton:{padding:e.spacing(.5),color:e.palette.grey[400]},closeButtonIcon:{width:"24px",height:"24px",minWidth:"24px"},profileContent:{padding:e.spacing(2,1,2,2),marginRight:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap",overflowY:"auto",overflowX:"hidden"},profileActions:{padding:e.spacing(0,1,2,4),marginRight:e.spacing(1),display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",flexWrap:"nowrap"},contentPlaceholder:{flexGrow:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},avatarHolder:{display:"flex",flexDirection:"column",flexWrap:"nowrap",alignItems:"center",marginTop:e.spacing(2)},owner:{display:"inline-block",padding:e.spacing(.5),fontWeight:700},member:{display:"inline-block",padding:e.spacing(.5),fontWeight:700},publicInfo:{margin:e.spacing(2,2,0,2),backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.action.hover,padding:e.spacing(1,2,2,2),borderRadius:e.shape.borderRadius},label:{marginTop:e.spacing(1),color:e.palette.text.secondary,fontWeight:500},pending:{color:e.palette.info.main,backgroundColor:e.palette.background.paper},active:{color:e.palette.success.main,backgroundColor:e.palette.background.paper},inactive:{color:e.palette.error.main,backgroundColor:e.palette.background.paper},footer:{borderTop:"1px solid",borderTopColor:e.palette.divider,flexShrink:0,padding:e.spacing(.5,2),backgroundColor:e.palette.background.default,fontSize:e.typography.caption.fontSize,display:"flex",alignItems:"center",color:e.palette.text.primary},tour_title:{fontWeight:500,fontSize:e.typography.body1.fontSize},tour_contents:{marginTop:e.spacing(2)},tour_footer:{marginTop:e.spacing(1),display:"flex",alignItems:"center",justifyContent:"flex-end"},tour_mask:{opacity:.25},logo:{width:"64px",height:"64px",marginLeft:"auto",marginRight:"auto",display:"block"}}}),{withTheme:!0})(Object(S.a)()(Oe))))}}]);